/**
 * Global configuration file , which includes environment configurations, global functions
 *    @dependency jquery.js
 **/
'use strict';

/*globals jQuery */
/*jshint loopfunc: true */

var ra = window.ra || {};

ra.cfg = ra.cfg || {};
ra.events = ra.events || {};

var Variants_ID = 0;
var Color_Code = '';
var lengthEx = 0;
var UserCityMarquee = '';
(function($) {

    (function() {
        var ua = navigator.userAgent;
        ra.cfg.isIphone = /iPhone/i.test(ua);
        ra.cfg.isIpaid = /iPad/i.test(ua);
        ra.cfg.isAndriod = /Android/i.test(ua);
        ra.cfg.isBlackBerry = /BB10|BlackBerry/i.test(ua);
        ra.cfg.isNexusTab = /Nexus/i.test(ua);
        ra.cfg.isChrome43 = /Chrome[/]43/i.test(ua);
        ra.cfg.isIE = /MSIE (\d+\.\d+);/.test(ua);
        ra.cfg.isIE11 = ua.indexOf('Trident/');
        ra.cfg.isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(ua);
        ra.cfg.isTouchEnabled = (function is_touch_device() {
            return (('ontouchstart' in window) || (navigator.MaxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0));
        })();

        ra.cfg.breakPoints = {
            XS: 'screen and (min-width:0px) and (max-width:480px)',
            SMX: 'screen and (min-width:481px) and (max-width:767px)',
            SM: 'screen and (min-width:768px) and (max-width:1024px)',
            MD: 'screen and (min-width:1025px) and (max-width:1280px)',
            LG: 'screen and (min-width:1281px)',
            XS_SMX: 'screen and (min-width:0px) and (max-width:767px)',
            XS_SM: 'screen and (min-width:0px) and (max-width:1024px)',
            SM_MD: 'screen and (min-width:768px)',
            MD_LG: 'screen and (min-width:1025px)'
        };

        ra.events = {
            WINDOW_RESIZE: 'ml/screen/resize/',
            WINDOW_LOAD: 'ml/window/load/',
            SCROLL: 'ml/mouse/scroll',
            VIEWPORT_CHANGE: 'ml/viewport/change', //for responsive implementation
            INIT_MODULES: 'ml/modules/init',
            VIEWPORT_XS: 'viewport/extrasmall',
            VIEWPORT_SMX: 'viewport/smallExtended',
            VIEWPORT_SM: 'viewport/small',
            VIEWPORT_MD: 'viewport/medium',
            VIEWPORT_LG: 'viewport/large',
            VIEWPORT_XS_SMX: 'viewport/mobile',
            VIEWPORT_XS_SM: 'viewport/mobileAndTablet',
            VIEWPORT_SM_MD: 'viewport/tabletAndAbove',
            VIEWPORT_MD_LG: 'viewport/desktopAndAbove'
        };
        ra.cfg.viewport = ra.events.VIEWPORT_LG;

    })();

    $(function() {
        if (ra.cfg.isAndriod) {
            $('html').addClass('android');
        }

        if (ra.cfg.isIpaid) {
            $('html').addClass('iPad');
        }

        if (ra.cfg.isIphone) {
            $('html').addClass('iphone');
        }

        if (ra.cfg.isIE11 > 0) {
            $('html').addClass('ie11');
        }

        if (ra.cfg.isBlackBerry) {
            $('html').addClass('blackberry');
        }

        if (ra.cfg.isNexusTab) {
            $('html').addClass('nexusTab');
        }

        if (ra.cfg.isChrome43) {
            $('html').addClass('chrome43');
        }

        // avoid subscribing to WINDOW_RESIZE event where ever possible
        $(window).resize($.throttle(250, function() {
            $.publish(ra.events.WINDOW_RESIZE);
        }));

        if (ra.cfg.isIE) {
            $(window).scroll($.throttle(500, function() {
                $.publish(ra.events.SCROLL);
            }));
        } else {
            $(window).scroll($.throttle(20, function() {
                $.publish(ra.events.SCROLL);
            }));
        }
        // for first time before module initialization
        for (var breakPoint in ra.cfg.breakPoints) {
            (function(breakName, mediaQuery) {
                var handler = function(data) {
                    if (data.matches) {
                        if (/\bSM\b|\bMD\b|\bLG\b|\bSMX\b|\bXS\b/.test(breakName)) {
                            ra.cfg.viewport = breakName;
                        }
                    }
                };
                handler({
                    media: mediaQuery,
                    matches: matchMedia(mediaQuery).matches
                });
            })(breakPoint, ra.cfg.breakPoints[breakPoint]);
        }

        $.publish(ra.events.INIT_MODULES);

        // publish events on viewport change based on media queries.
        for (var breakPoint1 in ra.cfg.breakPoints) {
            (function(breakName, mediaQuery) {
                var handler = function(data) {
                    if (data.matches) {
                        var vpAlias = 'VIEWPORT_' + breakName;
                        $.publish(ra.events[vpAlias], true);

                        if (/\bSM\b|\bMD\b|\bLG\b|\bSMX\b|\bXS\b/.test(breakName)) {
                            ra.cfg.viewport = breakName;
                            $.publish(ra.events.VIEWPORT_CHANGE);
                        }
                    } else {
                        $.publish(ra.events['VIEWPORT_' + breakName], false);
                    }
                };
                handler({
                    media: mediaQuery,
                    matches: matchMedia(mediaQuery).matches
                });
                window.matchMedia(mediaQuery).addListener(handler);

            })(breakPoint1, ra.cfg.breakPoints[breakPoint1]);
        }

    });
    $(window).load(function() {
        $.publish(ra.events.WINDOW_LOAD);
    });


})(jQuery);


$(function() {
    // Fire modules based on the presence of their .mod-* class
    var modules = [],
        unique = [],
        context = '',
        pattern = '[class^=\'mod-\'], [class*=\' mod-\']',
        targets = $(pattern, context);

    // NOTE: When calling this function you CAN pass either a selector
    // string or jQuery object as the context, it will handle either.
    context = $(context);

    // No context? Set as the document
    if (context.length === 0) { context = $(document); }

    // If context is a valid element, add it as a target. This catches
    // instances where the context is also a module
    // NOTE: Context could reference multiple elements, hence the loop
    context.each(function() {
        if (!!$(this).filter(pattern).length) { targets = targets.add($(this)); }
    });

    // Loop through all targets (target are elements with .mod class)
    targets.each(function() {

        // Grab element classes & match pattern mod-{module}
        var matches = $(this).prop('class').match(/mod-([^ ]+)/g);

        // Add module(s) to modules array
        $.each(matches, function(i) {

            // NOTE: We strip out 'mod-' here as the global tag in the
            // regex causes the whole match to be returned, not just
            // the capture group #BangsHeadAgainstWall
            var module = matches[i].replace('mod-', '');

            // Add only if module exists
            if (ra[module]) {
                modules.push(module);

            }
        });
    });

    // Remove duplicate entries
    $.each(modules, function(i, n) {
        if ($.inArray(n, unique) === -1) { unique.push(n); }
    });
    modules = unique;

    // Fire init on each module
    var defer = [];
    $.each(modules, function(i) {
        if (ra[modules[i]].init) {

            // Defer till after main init loop?
            if (ra[modules[i]].settings.defer) {
                defer.push(modules[i]);
            } else {
                ra[modules[i]].init(context);
            }
        } else {}
    });

    // Fire init on deferred modules
    $.each(defer, function(i) {
        if (ra[defer[i]].init) {
            ra[defer[i]].init(context);
        } else {}
    });

    // Return list of modules
    return modules;

});
/* jshint ignore:start */
/** ============================================================================
 jQuery Tiny Pub/Sub - v0.7 - 10/27/2011 http://benalman.com/
===============================================================================*/
;
(function(a) {
    var b = a({});
    a.subscribe = function() { b.on.apply(b, arguments) }, a.unsubscribe = function() { b.off.apply(b, arguments) }, a.publish = function() { b.trigger.apply(b, arguments) }
})(jQuery);

/** ===========================================================================
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * Copyright (c) 2010 'Cowboy' Ben Alman
===============================================================================*/
(function(b, c) {
    var $ = b.jQuery || b.Cowboy || (b.Cowboy = {}),
        a;
    $.throttle = a = function(e, f, j, i) {
        var h, d = 0;
        if (typeof f !== 'boolean') {
            i = j;
            j = f;
            f = c
        }

        function g() {
            var o = this,
                m = +new Date() - d,
                n = arguments;

            function l() {
                d = +new Date();
                j.apply(o, n)
            }

            function k() { h = c }
            if (i && !h) { l() }
            h && clearTimeout(h);
            if (i === c && m > e) { l() } else { if (f !== true) { h = setTimeout(i ? k : l, i === c ? e - m : e) } }
        }
        if ($.guid) { g.guid = j.guid = j.guid || $.guid++ }
        return g
    };
    $.debounce = function(d, e, f) { return f === c ? a(d, e, false) : a(d, f, e !== false) }
})(this);

/**============================================================================
 * Protect window.console method calls, e.g. console is not defined on IE
 * unless dev tools are open, and IE doesn't define console.debug
 *=============================================================================*/
;
(function() { window.console || (window.console = {}); for (var b = 'log info warn error debug trace dir group groupCollapsed groupEnd time timeEnd profile profileEnd dirxml assert count markTimeline timeStamp clear'.split(' '), a = 0; a < b.length; a++) window.console[b[a]] || (window.console[b[a]] = function() {}) })();

/**=============================================================================
 Few functions to provide support for IE 8 : Array.indexOf and Array.move
===============================================================================*/
Array.indexOf || (Array.prototype.indexOf = function(b) {
    for (var a = 0, c = this.length; a < c; a++)
        if (this[a] === b) return a;
    return -1
});
Array.move || (Array.prototype.move = function(b, a) {
    if (a >= this.length)
        for (var c = a - this.length; c-- + 1;) this.push(void 0);
    this.splice(a, 0, this.splice(b, 1)[0])
});
/* jshint ignore:end */
'use strict';

/*globals ra */

(function() {
    ra.utils = {
        // Global method for creating cookie
        // For creating cookie use this method ra.utils.createCookie(name, value, days, path, domain)
        // If any parameter is blank just pass blank quotes in it
        createCookie: function(name, value, days, path, domain) {

            if (name.length === 0) {
                return;
            }

            var expires, pathValue;
            if (days) {
                var date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = '; expires=' + date.toGMTString();
            } else {
                expires = '';
            }

            if (path) {
                pathValue = path;
            } else {
                pathValue = '';
            }

            if (domain) {
                document.cookie = name + '=' + value + expires + '; path=' + pathValue + '; domain=' + domain;
            } else {
                document.cookie = name + '=' + value + expires + '; path=' + pathValue;
            }
        },
        //Create Cookie Function

        setCookieUniversal:  function (name, value, hours) {
            if (hours)
            {
                var date = new Date();
                date.setTime(date.getTime()+(hours*60*60*1000));
                var expires = '; expires='+date.toGMTString();
            }
            else
            {
                var expires = '';
            }
            document.cookie = name+'='+value+expires+'; path=/';
          },

        // Global method for read cookie
        // For read cookie use this method ra.utils.readCookie(name)
        readCookie: function(name) {

            var expression = '(?:^|;\\s*)' + ('' + name).replace(/[-[\]{}()*+?.,\\^$|#\s]/g, '\\$&') + '=([^;]*)';
            return (name = new RegExp(expression).exec(document.cookie)) && name[1];
        },

        // Global method for eraseCookie cookie
        // For erase cookie use this method ra.utils.eraseCookie(name)
        // Here negative day is passed to remove the cookies. Negative date means cookies no more exist.

        eraseCookie: function(name) {
            this.createCookie(name, '', -1, '/', '');
        },
        setLocalStorage: function(key, value) {
            window.localStorage.setItem(key, value);
        },
        getLocalStorage: function(key) {
            return window.localStorage.getItem(key);
        },
        removeLocalStorage: function() {
            window.localStorage.clear();
        },
        removeLocalStorageByKey: function(key) {
            window.localStorage.removeItem(key);
        },
        getUrlParam: function(name) {
            // Read a page's GET URL and return the query parameter value.
            var vars = [],
                hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            return vars[name];
        },
        getDataFromService: function(params) {
            var form = $('#__AjaxAntiForgeryForm'),
                token = $('input[name="__RequestVerificationToken"]', form).val(); //can be removed
            $.ajax({
                url: params.url,
                dataType: params.dataType,
                data: params.data,
                headers: { '__RequestVerificationToken': token },
                contentType: 'application/json; charset=utf-8',
                cache: false,
                type: params.type,
                success: function(data) {
                    //var data = JSON.parse(data);
                    var data = $('#hdn-colorAPI').val() ? JSON.parse(data) : data;
                    if ($.isFunction(params.success_callback)) {
                        params.success_callback(data);
                    }
                },
                error: function(a, b, c) {
                    if ($.isFunction(params.error_callback)) {
                        params.error_callback();
                    }
                }
            });
        },
        getDataFromEncAPI: function(params) {
            var settings = {
                'url': params.url,
                'method': params.type,
                'timeout': 0,
                'headers': {
                  'Content-Type': 'application/json',
                  'Http-X-Access': 'NexaWebConfigurator',
                  'Token': 'K2Qatk7n06'
                },
                'data': params.data
              };
              $.ajax(settings).done(function (data) {
              
                    var data = JSON.parse(code.decryptMessage(data));
                    //var data = $('#hdn-colorAPI').val() ? JSON.parse(data) : data;
                    if ($.isFunction(params.success_callback)) {
                        params.success_callback(data);
                    }               
            });
        },
        /*func - Validate string is in email format or not*/
        validateEmail: function(email) {
            var re = /^(([^<>()\[\]\\.,;:\s@']+(\.[^<>()\[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        validateNumber: function(phoneNumber) {
            var phone = /^([0|\+[0-9]{1,5})?([7-9][0-9]{9})$/;
            return phone.test(phoneNumber);
        },
        priceFormat: function(price) {
            price = Math.round(price);
            //price = price.toString();
            var str = price.toString();
            // var afterPoint = '';
            // if (str.indexOf('.') > 0)
            // {
            //     afterPoint = price.substring(str.indexOf('.'), str.length);
            //     afterPoint = afterPoint.split('.');
            //     afterPoint = Number(afterPoint[1]);
            //     if(afterPoint >= 50)
            //     {
            //         str = Number(str)+1;
            //     }
            //     else{
            //         str = Number(str)+0;
            //     }
            //     str = str.toString();
            // }
            // str = Math.floor(str);
            //str = str.toString();
            var lastThree = str.substring(str.length - 3);
            var otherNumbers = str.substring(0, str.length - 3);
            if (otherNumbers !== ''){
                lastThree = ' ' + lastThree;}
            str = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ' ') + lastThree;
            if (str === 0) {
                str = 'N/A';
            }
            return str;
        },
        initMenuslider: function(lengthEx) {
            var that = this;
            var winW = $(window).width();
            var onMulti = lengthEx > 1 ? true : false;
            $('.submenu_slider').owlCarousel({
                loop: false,
                margin: 25,
                nav: false,
                responsive: {
                    0: {
                        items: 1.3,
                        loop: onMulti,
                        margin: 45
                    },
                    800: {
                        items: 2
                    },
                    1280: {
                        items: 2
                    }
                }
            });
        },
        initMenusliderForAddon: function() {
            var that = this;
            var winW = $(window).width();
            $('.submenu_slider').owlCarousel({
                loop: false,
                margin: 25,
                nav: false,
                responsive: {
                    0: {
                        items: 2,
                        margin: 15
                    },
                    400: {
                        items: 2,
                        margin: 15
                    },
                    768: {
                        items: 1,
                        margin: 15
                    },
                    1024: {
                        items: 2,
                        margin: 15
                    },
                    1280: {
                        items: 2
                    }
                }
            });
        },
        initMenusliderPackage: function() {
            var that = this;
            var winW = $(window).width();
            $('.submenu_slider').owlCarousel({
                loop: false,
                center: true,
                margin: 25,
                nav: false,
                responsive: {
                    0: {
                        items: 1
                    },
                    800: {
                        items: 1
                    },
                    1280: {
                        items: 1
                    }
                }
            });
        },
        initConfigListSlider: function() {
            $('#owl-carousel3').owlCarousel({
                margin: 0,
                dots: false,
                loop: false,
                nav: true,
                navText: ['<img src="/dist/assets/images/configurator/slider-left.png">', '<img src="/dist/assets/images/configurator/slider-right.png">'],
                //loop: true,
                responsive: {
                    0: {
                        items: 1,
                    },
                    600: {
                        items: 1,
                    },
                    1000: {
                        items: 2,
                    },
                    1200: {
                        items: 2,
                    },
                    1300: {
                        items: 2,
                    }
                }
            });
        },
        initExploreFeaturesSlider: function() {
            $('.list-inline').owlCarousel({
                dots: false,
                margin: 10,
                responsiveClass: true,
                navText: ['❮ Prev', 'Next ❯'],
                responsive: {
                    0: {
                        items: 1,
                        nav: true
                    },
                    400: {
                        items: 4,
                        nav: true,
                        slideBy: 4
                    },
                    1000: {
                        items: 5,
                        nav: true,
                        loop: false,
                        slideBy: 5
                    }
                }
            });
        },
        savedArrayColor: [],
        savedArrayAddon: [],
        savedArrayExtInt: [],
        savedPackageArray: [],
        savedFeaturesArray: [],
        savedArrayDef :[],
        /*saved data for variants*/
        saveDataColor: function(data) {
            var that = this,
                savedColorObj = {};
            that.savedArrayColor = [];
            Object.keys(data).forEach(function(key) {
                savedColorObj = { 'key1': data[key].code, 'key2': data[key].colors, 'key3': data[key].variants_id, 'key4': data[key].is_default, 'key5': data[key].description, 'key6': data[key].features,'key7': data[key].model_code };
                that.savedArrayColor.push(savedColorObj);
            });
        },
        /*saved data for addon*/
        saveDataAddon: function(data) {
            var that = this,
                savedAddonObj = {};
            that.savedArrayAddon = [];
            Object.keys(data).forEach(function(key) {
                savedAddonObj = { 'key1': key, 'key2': data[key] };
                that.savedArrayAddon.push(savedAddonObj);
            });
        },
        /*saved data for external,internal,safety and other menus*/
        savedDataExtInt: function(data) {
            var that = this,
                savedExtIntObj = {};
            that.savedArrayExtInt = [];
            Object.keys(data).forEach(function(key) {
                savedExtIntObj = { 'key1': key, 'key2': data[key] };
                that.savedArrayExtInt.push(savedExtIntObj);
            });
        },

         /*saved data for default external,internal,safety and other menus ajay*/
         savedDataDef: function(data) {
            var that = this,
                savedDefObj = {};
            that.savedArrayDef = [];
            Object.keys(data).forEach(function(key) {
                savedDefObj = { 'key1': key, 'key2': data[key] };
                that.savedArrayDef.push(savedDefObj);
            });
        },

        /*saved data for package*/
        savedPackageDetails: function(data) {
            var that = this,
                savedPackageData = {};
            that.savedPackageArray = [];
            Object.keys(data).forEach(function(key) {
                savedPackageData = { 'key1': key, 'key2': data[key] };
                that.savedPackageArray.push(savedPackageData);
            });
        },
        //Saved data for explore features
        saveDataFeature: function(data) {
            var that = this,
                savedFeatureObj = {};
            that.savedFeaturesArray = [];
            Object.keys(data.features).forEach(function(key) {
                savedFeatureObj = { 'key1': data.features[key].name, 'key2': data.features[key].title, 'key3': data.features[key].description, 'key4': data.features[key].note, 'key5': data.features[key].hotspot };
                that.savedFeaturesArray.push(savedFeatureObj);
            });
        },
        basePrice: $('.js-showroom-price').text(),
        packagePrice: 0,
        colorPrice: '',
        buildArray: [],
        buildArrayPackage: [],
        phoneNumber: '',
        carName: '',
        email: '',
        email_plain: '',
        mobile_plain: '',
        kit_id: '',
        modelId: $('#hdn-modelId').val() ? $('#hdn-modelId').val() : '3',
        carModel: $('#hdn-Car').val() ? $('#hdn-Car').val() : '',
        variantId: '',
        variantCode: $('#hdn-variantCode').val() ? $('#hdn-variantCode').val() : '',
        colorId: $('#hdn-colorId').val() ? $('#hdn-colorId').val() : '',
        configurationCity: (JSON.parse(localStorage.getItem('city')) && JSON.parse(localStorage.getItem('city')).city_name)?JSON.parse(localStorage.getItem('city')).city_name:'GURUGRAM',
        colorSelected: '',
        colorCode: '',
        colorName:'',
        sourceData: '',
        source: 'website',
        accItemArray: [],
        orderDetails: [],
        addedPackageArray: [],
        pin_no: $('#hdn-pinNo').val() ? $('#hdn-pinNo').val() : '',
        shareUrl: $('#hdn-shareUrl').val() ? $('#hdn-shareUrl').val() : 'shareurl',
        configratorUrl: $('#hdn-configratorUrl').val() ? $('#hdn-configratorUrl').val() : 'configratorUrl',
        baseUrlHttp: $('#hdn-baseUrlHttp').val() ? $('#hdn-baseUrlHttp').val() : 'https://nexa-configurator.azurewebsites.net/',
        mode: $('#hdn-viewMod').val() ? $('#hdn-viewMod').val() : 'edit',
        tb_submit_config:'config_nexa',
        apiURLs: {
            //'colorAPIURL': $('#hdn-colorAPI').val() ? $('#hdn-colorAPI').val() : 'http://www.mocky.io/v2/5cd27d68310000bc29339787',
            'colorAPIURL': 'https://nexa-configurator.azurewebsites.net/api/get-web-variants-encrypted',//get variants
            'defaultAPIURL': 'https://nexa-configurator.azurewebsites.net/api/get-web-default-accessories-encrypted',//GET DEFAULT ACCESSORIES
            'extIntAPIURL': 'https://nexa-configurator.azurewebsites.net/api/get-web-variants-accessories-encrypted',//GET ACCESSORIES
            'packageAPIURL': $('#hdn-packageAPI').val() ? $('#hdn-packageAPI').val() : 'http://www.mocky.io/v2/5c4039de3500000736ec3bcf',
            'otpAPIURL': $('#hdn-otpAPI').val() ? $('#hdn-otpAPI').val() : 'http://www.mocky.io/v2/5c334ba62e00005500121fe4',
            'verifyOtpAPIURL': $('#hdn-verifyOtpURL').val() ? $('#hdn-verifyOtpURL').val() : 'http://www.mocky.io/v2/5c49b670320000c7300b5a26',
            'saveConfigAPIURL': $('#hdn-saveConfigURL').val() ? $('#hdn-saveConfigURL').val() : 'http://www.mocky.io/v2/5c36e6863000005a001f609d',
            'loadCanvasAPIURL': $('#hdn-loadCanvasURL').val() ? $('#hdn-loadCanvasURL').val() : 'http://www.mocky.io/v2/5c49b670320000c7300b5a26',
            'shareConfigAPIURL': $('#hdn-shareCanvasURL').val() ? $('#hdn-shareCanvasURL').val() : 'http://www.mocky.io/v2/5c36e6863000005a001f609d',
            'phonedataAPIURL': $('#hdn-phonedataAPIURL').val() ? $('#hdn-phonedataAPIURL').val() : 'http://www.mocky.io/v2/5c481aac3100005d478a1ff4',
            'addonAPIURL': 'https://nexa-configurator.azurewebsites.net/api/get-web-addons-encrypted',//GET ADDON
            'featureAPIURL': 'https://nexa-configurator.azurewebsites.net/api/get-web-model-features-encrypted'//GET FEATURES
        },
        marquee_event:{
            'time_spent_1min':'500',
            'time_spent_3min':'750',
            'total_time_spent':'0',
            'configurator':'500',
            'pll_forms':'750',
            'brochure_download':'1000',
            'smart_finance':'2000',
            'e_book':'4000',
            'subscribe_view':'0',
            'accessories_view':'0',
            'btd_form':'1000',
            'total_point':'10000'
        },
        marquee_event_touch_id:{
            'TIME_SPENT':'1',
            'CONFIGURATOR':'2',
            'PLL_FORM':'3',
            'BROCHURE_DOWNLOAD':'4',
            'SMART_FINANCE':'5',
            'E_BOOK':'6',
            'SUBSCRIBE_VIEW':'7',
            'ACCESSORIES_VIEW':'8',
            'BTD_FORM':'9'
        }
    };




}(ra));


'use strict';
/*globals ra */

(function(){
    ra.safetyfeature = {
        settings:{
          target:'.mod-safetyfeature'
        },
        init:function(){
          this.bindCarouselEvent();
        },
        bindCarouselEvent : function(){
            $('.inrsafetymobilebox').owlCarousel({
                loop:true,
                margin:0,
                nav:false,
                pagination:true,
                navigation:false,
                autoplay:true,
                dots:true,
                touchDrag:true,
                mouseDrag : false, 
                autoplayTimeout:5000,   
                responsive:{
                    0:{
                        items:1
                    },
                    767:{
                        items:2,
                    }
                }
            });         
        }
    };
}(ra));


/*!
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 */
 !function(e,t,i,n){"use strict";var a=i("html"),s=i(e),o=i(t),r=i.fancybox=function(){r.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=t.createTouch!==n,h=function(e){return e&&e.hasOwnProperty&&e instanceof i},p=function(e){return e&&"string"===i.type(e)},u=function(e){return p(e)&&e.indexOf("%")>0},f=function(e){return e&&!(e.style.overflow&&"hidden"===e.style.overflow)&&(e.clientWidth&&e.scrollWidth>e.clientWidth||e.clientHeight&&e.scrollHeight>e.clientHeight)},g=function(e,t){var i=parseInt(e,10)||0;return t&&u(e)&&(i=r.getViewport()[t]/100*i),Math.ceil(i)},m=function(e,t){return g(e,t)+"px"};i.extend(r,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){return e&&(i.isPlainObject(t)||(t={}),!1!==r.close(!0))?(i.isArray(e)||(e=h(e)?i(e).get():[e]),i.each(e,function(a,s){var o,l,c,d,u,f,g,m={};"object"===i.type(s)&&(s.nodeType&&(s=i(s)),h(s)?(m={href:s.data("fancybox-href")||s.attr("href"),title:s.data("fancybox-title")||s.attr("title"),isDom:!0,element:s},i.metadata&&i.extend(!0,m,s.metadata())):m=s),o=t.href||m.href||(p(s)?s:null),l=t.title!==n?t.title:m.title||"",c=t.content||m.content,d=c?"html":t.type||m.type,!d&&m.isDom&&(d=s.data("fancybox-type"),d||(u=s.prop("class").match(/fancybox\.(\w+)/),d=u?u[1]:null)),p(o)&&(d||(r.isImage(o)?d="image":r.isSWF(o)?d="swf":"#"===o.charAt(0)?d="inline":p(s)&&(d="html",c=s)),"ajax"===d&&(f=o.split(/\s+/,2),o=f.shift(),g=f.shift())),c||("inline"===d?o?c=i(p(o)?o.replace(/.*(?=#[^\s]+$)/,""):o):m.isDom&&(c=s):"html"===d?c=o:d||o||!m.isDom||(d="inline",c=s)),i.extend(m,{href:o,type:d,content:c,title:l,selector:g}),e[a]=m}),r.opts=i.extend(!0,{},r.defaults,t),t.keys!==n&&(r.opts.keys=t.keys?i.extend({},r.defaults.keys,t.keys):!1),r.group=e,r._start(r.opts.index)):void 0},cancel:function(){var e=r.coming;e&&!1!==r.trigger("onCancel")&&(r.hideLoading(),r.ajaxLoad&&r.ajaxLoad.abort(),r.ajaxLoad=null,r.imgPreload&&(r.imgPreload.onload=r.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),r.coming=null,r.current||r._afterZoomOut(e))},close:function(e){r.cancel(),!1!==r.trigger("beforeClose")&&(r.unbindEvents(),r.isActive&&(r.isOpen&&e!==!0?(r.isOpen=r.isOpened=!1,r.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),r.wrap.stop(!0,!0).removeClass("fancybox-opened"),r.transitions[r.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),r._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(r.player.timer)},i=function(){t(),r.current&&r.player.isActive&&(r.player.timer=setTimeout(r.next,r.current.playSpeed))},n=function(){t(),o.unbind(".player"),r.player.isActive=!1,r.trigger("onPlayEnd")},a=function(){r.current&&(r.current.loop||r.current.index<r.group.length-1)&&(r.player.isActive=!0,o.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":t}),i(),r.trigger("onPlayStart"))};e===!0||!r.player.isActive&&e!==!1?a():n()},next:function(e){var t=r.current;t&&(p(e)||(e=t.direction.next),r.jumpto(t.index+1,e,"next"))},prev:function(e){var t=r.current;t&&(p(e)||(e=t.direction.prev),r.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,i){var a=r.current;a&&(e=g(e),r.direction=t||a.direction[e>=a.index?"next":"prev"],r.router=i||"jumpto",a.loop&&(0>e&&(e=a.group.length+e%a.group.length),e%=a.group.length),a.group[e]!==n&&(r.cancel(),r._start(e)))},reposition:function(e,t){var n,a=r.current,s=a?a.wrap:null;s&&(n=r._getPosition(t),e&&"scroll"===e.type?(delete n.position,s.stop(!0,!0).animate(n,200)):(s.css(n),a.pos=i.extend({},a.dim,n)))},update:function(e){var t=e&&e.type,i=!t||"orientationchange"===t;i&&(clearTimeout(c),c=null),r.isOpen&&!c&&(c=setTimeout(function(){var n=r.current;n&&!r.isClosing&&(r.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&n.autoResize)&&r._setDimension(),"scroll"===t&&n.canShrink||r.reposition(e),r.trigger("onUpdate"),c=null)},i&&!d?0:300))},toggle:function(e){r.isOpen&&(r.current.fitToView="boolean"===i.type(e)?e:!r.current.fitToView,d&&(r.wrap.removeAttr("style").addClass("fancybox-tmp"),r.trigger("onUpdate")),r.update())},hideLoading:function(){o.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var e,t;r.hideLoading(),e=i('<div id="fancybox-loading"><div></div></div>').click(r.cancel).appendTo("body"),o.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),r.cancel())}),r.defaults.fixed||(t=r.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=r.current&&r.current.locked||!1,i={x:s.scrollLeft(),y:s.scrollTop()};return t?(i.w=t[0].clientWidth,i.h=t[0].clientHeight):(i.w=d&&e.innerWidth?e.innerWidth:s.width(),i.h=d&&e.innerHeight?e.innerHeight:s.height()),i},unbindEvents:function(){r.wrap&&h(r.wrap)&&r.wrap.unbind(".fb"),o.unbind(".fb"),s.unbind(".fb")},bindEvents:function(){var e,t=r.current;t&&(s.bind("orientationchange.fb"+(d?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),r.update),e=t.keys,e&&o.bind("keydown.fb",function(a){var s=a.which||a.keyCode,o=a.target||a.srcElement;return 27===s&&r.coming?!1:(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||o&&(o.type||i(o).is("[contenteditable]"))||i.each(e,function(e,o){return t.group.length>1&&o[s]!==n?(r[e](o[s]),a.preventDefault(),!1):i.inArray(s,o)>-1?(r[e](),a.preventDefault(),!1):void 0}),void 0)}),i.fn.mousewheel&&t.mouseWheel&&r.wrap.bind("mousewheel.fb",function(e,n,a,s){for(var o=e.target||null,l=i(o),c=!1;l.length&&!(c||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)c=f(l[0]),l=i(l).parent();0===n||c||r.group.length>1&&!t.canShrink&&(s>0||a>0?r.prev(s>0?"down":"left"):(0>s||0>a)&&r.next(0>s?"up":"right"),e.preventDefault())}))},trigger:function(e,t){var n,a=t||r.coming||r.current;if(a){if(i.isFunction(a[e])&&(n=a[e].apply(a,Array.prototype.slice.call(arguments,1))),n===!1)return!1;a.helpers&&i.each(a.helpers,function(t,n){n&&r.helpers[t]&&i.isFunction(r.helpers[t][e])&&r.helpers[t][e](i.extend(!0,{},r.helpers[t].defaults,n),a)}),o.trigger(e)}},isImage:function(e){return p(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return p(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,n,a,s,o,l={};if(e=g(e),t=r.group[e]||null,!t)return!1;if(l=i.extend(!0,{},r.opts,t),s=l.margin,o=l.padding,"number"===i.type(s)&&(l.margin=[s,s,s,s]),"number"===i.type(o)&&(l.padding=[o,o,o,o]),l.modal&&i.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),l.autoSize&&(l.autoWidth=l.autoHeight=!0),"auto"===l.width&&(l.autoWidth=!0),"auto"===l.height&&(l.autoHeight=!0),l.group=r.group,l.index=e,r.coming=l,!1===r.trigger("beforeLoad"))return r.coming=null,void 0;if(a=l.type,n=l.href,!a)return r.coming=null,r.current&&r.router&&"jumpto"!==r.router?(r.current.index=e,r[r.router](r.direction)):!1;if(r.isActive=!0,("image"===a||"swf"===a)&&(l.autoHeight=l.autoWidth=!1,l.scrolling="visible"),"image"===a&&(l.aspectRatio=!0),"iframe"===a&&d&&(l.scrolling="scroll"),l.wrap=i(l.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+a+" fancybox-tmp "+l.wrapCSS).appendTo(l.parent||"body"),i.extend(l,{skin:i(".fancybox-skin",l.wrap),outer:i(".fancybox-outer",l.wrap),inner:i(".fancybox-inner",l.wrap)}),i.each(["Top","Right","Bottom","Left"],function(e,t){l.skin.css("padding"+t,m(l.padding[e]))}),r.trigger("onReady"),"inline"===a||"html"===a){if(!l.content||!l.content.length)return r._error("content")}else if(!n)return r._error("href");"image"===a?r._loadImage():"ajax"===a?r._loadAjax():"iframe"===a?r._loadIframe():r._afterLoad()},_error:function(e){i.extend(r.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:r.coming.tpl.error}),r._afterLoad()},_loadImage:function(){var e=r.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,r.coming.width=this.width/r.opts.pixelRatio,r.coming.height=this.height/r.opts.pixelRatio,r._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,r._error("image")},e.src=r.coming.href,e.complete!==!0&&r.showLoading()},_loadAjax:function(){var e=r.coming;r.showLoading(),r.ajaxLoad=i.ajax(i.extend({},e.ajax,{url:e.href,error:function(e,t){r.coming&&"abort"!==t?r._error("ajax",e):r.hideLoading()},success:function(t,i){"success"===i&&(e.content=t,r._afterLoad())}}))},_loadIframe:function(){var e=r.coming,t=i(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);i(e.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(r.showLoading(),t.one("load",function(){i(this).data("ready",1),d||i(this).bind("load.fb",r.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),r._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||r._afterLoad()},_preloadImages:function(){var e,t,i=r.group,n=r.current,a=i.length,s=n.preload?Math.min(n.preload,a-1):0;for(t=1;s>=t;t+=1)e=i[(n.index+t)%a],"image"===e.type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,t,n,a,s,o,l=r.coming,c=r.current,d="fancybox-placeholder";if(r.hideLoading(),l&&r.isActive!==!1){if(!1===r.trigger("afterLoad",l,c))return l.wrap.stop(!0).trigger("onReset").remove(),r.coming=null,void 0;switch(c&&(r.trigger("beforeChange",c),c.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),r.unbindEvents(),e=l,t=l.content,n=l.type,a=l.scrolling,i.extend(r,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:c}),s=e.href,n){case"inline":case"ajax":case"html":e.selector?t=i("<div>").html(t).find(e.selector):h(t)&&(t.data(d)||t.data(d,i('<div class="'+d+'"></div>').insertAfter(t).hide()),t=t.show().detach(),e.wrap.bind("onReset",function(){i(this).find(t).length&&t.hide().replaceAll(t.data(d)).data(d,!1)}));break;case"image":t=e.tpl.image.replace("{href}",s);break;case"swf":t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+s+'"></param>',o="",i.each(e.swf,function(e,i){t+='<param name="'+e+'" value="'+i+'"></param>',o+=" "+e+'="'+i+'"'}),t+='<embed src="'+s+'" type="application/x-shockwave-flash" width="100%" height="100%"'+o+"></embed></object>"}h(t)&&t.parent().is(e.inner)||e.inner.append(t),r.trigger("beforeShow"),e.inner.css("overflow","yes"===a?"scroll":"no"===a?"hidden":a),r._setDimension(),r.reposition(),r.isOpen=!1,r.coming=null,r.bindEvents(),r.isOpened?c.prevMethod&&r.transitions[c.prevMethod]():i(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),r.transitions[r.isOpened?e.nextMethod:e.openMethod](),r._preloadImages()}},_setDimension:function(){var e,t,n,a,s,o,l,c,d,h,p,f,v,w,b,y=r.getViewport(),x=0,_=!1,k=!1,j=r.wrap,C=r.skin,I=r.inner,T=r.current,S=T.width,W=T.height,H=T.minWidth,L=T.minHeight,D=T.maxWidth,A=T.maxHeight,P=T.scrolling,B=T.scrollOutside?T.scrollbarWidth:0,M=T.margin,R=g(M[1]+M[3]),O=g(M[0]+M[2]);if(j.add(C).add(I).width("auto").height("auto").removeClass("fancybox-tmp"),e=g(C.outerWidth(!0)-C.width()),t=g(C.outerHeight(!0)-C.height()),n=R+e,a=O+t,s=u(S)?(y.w-n)*g(S)/100:S,o=u(W)?(y.h-a)*g(W)/100:W,"iframe"===T.type){if(w=T.content,T.autoHeight&&1===w.data("ready"))try{w[0].contentWindow.document.location&&(I.width(s).height(9999),b=w.contents().find("body"),B&&b.css("overflow-x","hidden"),o=b.outerHeight(!0))}catch(E){}}else(T.autoWidth||T.autoHeight)&&(I.addClass("fancybox-tmp"),T.autoWidth||I.width(s),T.autoHeight||I.height(o),T.autoWidth&&(s=I.width()),T.autoHeight&&(o=I.height()),I.removeClass("fancybox-tmp"));if(S=g(s),W=g(o),d=s/o,H=g(u(H)?g(H,"w")-n:H),D=g(u(D)?g(D,"w")-n:D),L=g(u(L)?g(L,"h")-a:L),A=g(u(A)?g(A,"h")-a:A),l=D,c=A,T.fitToView&&(D=Math.min(y.w-n,D),A=Math.min(y.h-a,A)),f=y.w-R,v=y.h-O,T.aspectRatio?(S>D&&(S=D,W=g(S/d)),W>A&&(W=A,S=g(W*d)),H>S&&(S=H,W=g(S/d)),L>W&&(W=L,S=g(W*d))):(S=Math.max(H,Math.min(S,D)),T.autoHeight&&"iframe"!==T.type&&(I.width(S),W=I.height()),W=Math.max(L,Math.min(W,A))),T.fitToView)if(I.width(S).height(W),j.width(S+e),h=j.width(),p=j.height(),T.aspectRatio)for(;(h>f||p>v)&&S>H&&W>L&&!(x++>19);)W=Math.max(L,Math.min(A,W-10)),S=g(W*d),H>S&&(S=H,W=g(S/d)),S>D&&(S=D,W=g(S/d)),I.width(S).height(W),j.width(S+e),h=j.width(),p=j.height();else S=Math.max(H,Math.min(S,S-(h-f))),W=Math.max(L,Math.min(W,W-(p-v)));B&&"auto"===P&&o>W&&f>S+e+B&&(S+=B),I.width(S).height(W),j.width(S+e),h=j.width(),p=j.height(),_=(h>f||p>v)&&S>H&&W>L,k=T.aspectRatio?l>S&&c>W&&s>S&&o>W:(l>S||c>W)&&(s>S||o>W),i.extend(T,{dim:{width:m(h),height:m(p)},origWidth:s,origHeight:o,canShrink:_,canExpand:k,wPadding:e,hPadding:t,wrapSpace:p-C.outerHeight(!0),skinSpace:C.height()-W}),!w&&T.autoHeight&&W>L&&A>W&&!k&&I.height("auto")},_getPosition:function(e){var t=r.current,i=r.getViewport(),n=t.margin,a=r.wrap.width()+n[1]+n[3],s=r.wrap.height()+n[0]+n[2],o={position:"absolute",top:n[0],left:n[3]};return t.autoCenter&&t.fixed&&!e&&s<=i.h&&a<=i.w?o.position="fixed":t.locked||(o.top+=i.y,o.left+=i.x),o.top=m(Math.max(o.top,o.top+(i.h-s)*t.topRatio)),o.left=m(Math.max(o.left,o.left+(i.w-a)*t.leftRatio)),o},_afterZoomIn:function(){var e=r.current;e&&(r.isOpen=r.isOpened=!0,r.wrap.css("overflow","visible").addClass("fancybox-opened"),r.update(),(e.closeClick||e.nextClick&&r.group.length>1)&&r.inner.css("cursor","pointer").bind("click.fb",function(t){i(t.target).is("a")||i(t.target).parent().is("a")||(t.preventDefault(),r[e.closeClick?"close":"next"]())}),e.closeBtn&&i(e.tpl.closeBtn).appendTo(r.skin).bind("click.fb",function(e){e.preventDefault(),r.close()}),e.arrows&&r.group.length>1&&((e.loop||e.index>0)&&i(e.tpl.prev).appendTo(r.outer).bind("click.fb",r.prev),(e.loop||e.index<r.group.length-1)&&i(e.tpl.next).appendTo(r.outer).bind("click.fb",r.next)),r.trigger("afterShow"),e.loop||e.index!==e.group.length-1?r.opts.autoPlay&&!r.player.isActive&&(r.opts.autoPlay=!1,r.play()):r.play(!1))},_afterZoomOut:function(e){e=e||r.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(r,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),r.trigger("afterClose",e)}}),r.transitions={getOrigPosition:function(){var e=r.current,t=e.element,i=e.orig,n={},a=50,s=50,o=e.hPadding,l=e.wPadding,c=r.getViewport();return!i&&e.isDom&&t.is(":visible")&&(i=t.find("img:first"),i.length||(i=t)),h(i)?(n=i.offset(),i.is("img")&&(a=i.outerWidth(),s=i.outerHeight())):(n.top=c.y+(c.h-s)*e.topRatio,n.left=c.x+(c.w-a)*e.leftRatio),("fixed"===r.wrap.css("position")||e.locked)&&(n.top-=c.y,n.left-=c.x),n={top:m(n.top-o*e.topRatio),left:m(n.left-l*e.leftRatio),width:m(a+l),height:m(s+o)}},step:function(e,t){var i,n,a,s=t.prop,o=r.current,l=o.wrapSpace,c=o.skinSpace;("width"===s||"height"===s)&&(i=t.end===t.start?1:(e-t.start)/(t.end-t.start),r.isClosing&&(i=1-i),n="width"===s?o.wPadding:o.hPadding,a=e-n,r.skin[s](g("width"===s?a:a-l*i)),r.inner[s](g("width"===s?a:a-l*i-c*i)))},zoomIn:function(){var e=r.current,t=e.pos,n=e.openEffect,a="elastic"===n,s=i.extend({opacity:1},t);delete s.position,a?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===n&&(t.opacity=.1),r.wrap.css(t).animate(s,{duration:"none"===n?0:e.openSpeed,easing:e.openEasing,step:a?this.step:null,complete:r._afterZoomIn})},zoomOut:function(){var e=r.current,t=e.closeEffect,i="elastic"===t,n={opacity:.1};i&&(n=this.getOrigPosition(),e.closeOpacity&&(n.opacity=.1)),r.wrap.animate(n,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:i?this.step:null,complete:r._afterZoomOut})},changeIn:function(){var e,t=r.current,i=t.nextEffect,n=t.pos,a={opacity:1},s=r.direction,o=200;n.opacity=.1,"elastic"===i&&(e="down"===s||"up"===s?"top":"left","down"===s||"right"===s?(n[e]=m(g(n[e])-o),a[e]="+="+o+"px"):(n[e]=m(g(n[e])+o),a[e]="-="+o+"px")),"none"===i?r._afterZoomIn():r.wrap.css(n).animate(a,{duration:t.nextSpeed,easing:t.nextEasing,complete:r._afterZoomIn})},changeOut:function(){var e=r.previous,t=e.prevEffect,n={opacity:.1},a=r.direction,s=200;"elastic"===t&&(n["down"===a||"up"===a?"top":"left"]=("up"===a||"left"===a?"-":"+")+"="+s+"px"),e.wrap.animate(n,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},r.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(e){e=i.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(r.coming?r.coming.parent:e.parent),this.fixed=!1,e.fixed&&r.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=i.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(s.bind("resize.overlay",i.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){return i(e.target).hasClass("fancybox-overlay")?(r.isActive?r.close():t.close(),!1):void 0}),this.overlay.css(e.css).show()},close:function(){var e,t;s.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),e=s.scrollTop(),t=s.scrollLeft(),this.el.removeClass("fancybox-lock"),s.scrollTop(e).scrollLeft(t)),i(".fancybox-overlay").remove().hide(),i.extend(this,{overlay:null,fixed:!1})},update:function(){var e,i="100%";this.overlay.width(i).height("100%"),l?(e=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),o.width()>e&&(i=o.width())):o.width()>s.width()&&(i=o.width()),this.overlay.width(i).height(o.height())},onReady:function(e,t){var n=this.overlay;i(".fancybox-overlay").stop(!0,!0),n||this.create(e),e.locked&&this.fixed&&t.fixed&&(n||(this.margin=o.height()>s.height()?i("html").css("margin-right").replace("px",""):!1),t.locked=this.overlay.append(t.wrap),t.fixed=!1),e.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var n,a;t.locked&&(this.margin!==!1&&(i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),n=s.scrollTop(),a=s.scrollLeft(),this.el.addClass("fancybox-lock"),s.scrollTop(n).scrollLeft(a)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!r.coming&&this.overlay.fadeOut(e.speedOut,i.proxy(this.close,this))}},r.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t,n,a=r.current,s=a.title,o=e.type;if(i.isFunction(s)&&(s=s.call(a.element,a)),p(s)&&""!==i.trim(s)){switch(t=i('<div class="fancybox-title fancybox-title-'+o+'-wrap">'+s+"</div>"),o){case"inside":n=r.skin;break;case"outside":n=r.wrap;break;case"over":n=r.inner;break;default:n=r.skin,t.appendTo("body"),l&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),r.current.margin[2]+=Math.abs(g(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](n)}}},i.fn.fancybox=function(e){var t,n=i(this),a=this.selector||"",s=function(s){var o,l,c=i(this).blur(),d=t;s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||c.is(".fancybox-wrap")||(o=e.groupAttr||"data-fancybox-group",l=c.attr(o),l||(o="rel",l=c.get(0)[o]),l&&""!==l&&"nofollow"!==l&&(c=a.length?i(a):n,c=c.filter("["+o+'="'+l+'"]'),d=c.index(this)),e.index=d,r.open(c,e)!==!1&&s.preventDefault())};return e=e||{},t=e.index||0,a&&e.live!==!1?o.undelegate(a,"click.fb-start").delegate(a+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):n.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},o.ready(function(){var t,s;i.scrollbarWidth===n&&(i.scrollbarWidth=function(){var e=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),n=t.innerWidth()-t.height(99).innerWidth();return e.remove(),n}),i.support.fixedPosition===n&&(i.support.fixedPosition=function(){var e=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),t=20===e[0].offsetTop||15===e[0].offsetTop;return e.remove(),t}()),i.extend(r.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")}),t=i(e).width(),a.addClass("fancybox-lock-test"),s=i(e).width(),a.removeClass("fancybox-lock-test"),i("<style type='text/css'>.fancybox-margin{margin-right:"+(s-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery);
!function(t){var s=t.fancybox;s.helpers.buttons={defaults:{skipSingle:!1,position:"top",tpl:'<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(t,s){if(t.skipSingle&&s.group.length<2)return s.helpers.buttons=!1,void(s.closeBtn=!0);s.margin["bottom"===t.position?2:0]+=30},onPlayStart:function(){this.buttons&&this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")},onPlayEnd:function(){this.buttons&&this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")},afterShow:function(l,i){var n=this.buttons;n||(this.list=t(l.tpl).addClass(l.position).appendTo("body"),n={prev:this.list.find(".btnPrev").click(s.prev),next:this.list.find(".btnNext").click(s.next),play:this.list.find(".btnPlay").click(s.play),toggle:this.list.find(".btnToggle").click(s.toggle),close:this.list.find(".btnClose").click(s.close)}),i.index>0||i.loop?n.prev.removeClass("btnDisabled"):n.prev.addClass("btnDisabled"),i.loop||i.index<i.group.length-1?(n.next.removeClass("btnDisabled"),n.play.removeClass("btnDisabled")):(n.next.addClass("btnDisabled"),n.play.addClass("btnDisabled")),this.buttons=n,this.onUpdate(l,i)},onUpdate:function(t,s){var l;this.buttons&&(l=this.buttons.toggle.removeClass("btnDisabled btnToggleOn"),s.canShrink?l.addClass("btnToggleOn"):s.canExpand||l.addClass("btnDisabled"))},beforeClose:function(){this.list&&this.list.remove(),this.list=null,this.buttons=null}}}(jQuery);
'use strict';
/*globals ra */

(function(){

  $('.fancybox').fancybox();	
  $('.form_box_poup').fancybox({
      fitToView : true,
      wrapCSS : 'popup_wrapp' // add a class selector to the fancybox wrap
  });


		$(document).on('click', 'a.video', function() {
			$.fancybox({
				'padding'		: 0,
				'autoScale'		: false,
				'transitionIn'	: 'none',
				'transitionOut'	: 'none',
				'title'			: this.title,
				'width'			: 850,
				'height'		: 400,
				'href'			: this.href.replace(new RegExp('watch\\?v=', 'i'), 'v/'),
				'type'			: 'swf',
				'swf'			: {
				'wmode'				: 'transparent',
				'allowfullscreen'	: 'true'
				}
			});
	
			return false;
		});
  
 
}(ra));
'use strict';

$(window).load(function () {
    setTimeout(function () {
        $('#myModalAutoOpen_rfi').modal('show');
        if ($(window).width() < 992) {
          $('.thanksAccsereesSlider').owlCarousel({
            margin: 10,
            responsiveClass: true,
            navigation: false,
            pagination: true,
            loop: true,
            //autoplay: true,
            autoplayTimeout: 4000,
            autoplayHoverPause: false,
            dots:true,
            responsive: {
                0: {
                  items: 2.2
                },
                480: {
                  items: 2.2
                },
                768: {
                    items: 2.2
                },
                1000: {
                  items: 2.2
                }
            }
        });  
        }
    }, 10000);
})

	    $(document).ready(function () {
    //initialise validation rules for all input fields
    var rfipopup_form = $('#form-rfipopup').validate({
        rules: {
            Name: {
                required: true,
                maxlength: 60,
                name_regex: /^[A-z]*((-|\s)*[A-z])*$/g
            },
            Email: {
                required: true,
                email: true,
                maxlength: 100,
                email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
            },
            Mobile: {
                required: true,
                minlength: 10,
                maxlength: 10,
                number: true
            },
            IsDisclaimerAccepted: 'required',
            CarModel: {
                required: true
            },
            BuyerType: {
                required: true
            },
            State: {
                required: true
            },
            City: {
                required: true
            },
            Dealer: {
                required: true
            }
        },
        messages: {
            // Name: $('#form-rfipopup').find('#Name').attr('data-error'),
            Name: {
                required: 'Name is required field',
                maxlength: 'Maximum length should be 60 characters',
                name_regex: 'Remove extra space from the name field'
             },
            Email: $('#form-rfipopup').find('#Email').attr('data-error'),
            Mobile: $('#form-rfipopup').find('#Mobile').attr('data-error'),
            IsDisclaimerAccepted: $('#IsDisclaimerAccepted').attr('data-error'),
            CarModel: $('#form-rfipopup').find('#rfimodel').attr('data-error'),
            BuyerType: $('#form-rfipopup').find('#RFIBuyerType').attr('data-error'),
            State: $('#form-rfipopup').find('#rfistate').attr('data-error'),
            City: $('#form-rfipopup').find('#rficity').attr('data-error'),
            Dealer: $('#form-rfipopup').find('#enrldealer').attr('data-error')
        },
        errorElement: 'em',
        errorPlacement: function (error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');

            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function (element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
        },
        unhighlight: function (element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function (form) {
            form.submit();
        }
    });

	var $inputEmailbtdpopup = $('#form-rfipopup #Email');
	$inputEmailbtdpopup.keypress(function(e) {
	  var max = 99;
	  if ($inputEmailbtdpopup.val().length > max) {
		  $inputEmailbtdpopup.val($inputEmailbtdpopup.val().substr(0, max));
	  }
	  var key = e.keyCode;
	  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64  || key==46);
	  if (!returnn) {
		return false;
	  }
	});

    $('#rfistate').change(function () {
        if($(this).val()!=""){
            $(document).find('#form-rfipopup').css('pointer-events', 'none');
            $(document).find('body').css('pointer-events', 'none');
            // $(document).find('body').css({"height": "100%", "overflow": "hidden"});
            $('#RfiLoader').css('display','block');
		}
        var cities = $('#rficity');
        cities.html('');
        cities.append($('<option></option>').val('').text('City'));
        $('#enrldealer').html('');
        $('#enrldealer').append($('<option></option>').val('').text('Dealer'));
        var data = $(this).closest('form').serialize();
        var rowdata = PrepareRequest('/api/sitecore/Forms/LoadCities', data);
        $.ajax(rowdata).done(function (response) {
            // cities.html('');
            // cities.append($('<option></option>').val('').text('City'));
            // $('#enrldealer').html('');
            // $('#enrldealer').append($('<option></option>').val('').text('Dealer'));
            $.each(response, function (index, item) {
                cities.append($('<option></option>').val(item.Value).html(item.Text));
            });
            $('#RfiLoader').css('display','none');
            $(document).find('#form-rfipopup').css('pointer-events', 'inherit');            
            $(document).find('body').css('pointer-events', 'inherit');
            // $(document).find('body').css({"height": "100%", "overflow": "auto"});
            
        }).error(function (err) {});
    });

    $('#rficity').change(function () {
if($(this).val()!=""){
    $(document).find('#form-rfipopup').css('pointer-events', 'none');
    $(document).find('body').css('pointer-events', 'none');
    // $(document).find('body').css({"height": "100%", "overflow": "hidden"});
    $('#RfiLoader').css('display','block');
}
        
        var dealer = $('#enrldealer');
        dealer.html('');
        dealer.append($('<option></option>').val('').text('Dealer'));
        var data = $(this).closest('form').serialize();
		var rowdata = PrepareRequest('/api/sitecore/Forms/LoadDealers', data);
        $.ajax(rowdata).done(function (response) {
            // dealer.html('');
            // dealer.append($('<option></option>').val('').text('Dealer'));
            $.each(response, function (index, item) {
                dealer.append($('<option></option>').val(item.Value.split('|')[0]).html(item.Text));
            });
            $('#RfiLoader').css('display','none');
            $(document).find('#form-rfipopup').css('pointer-events', 'inherit');
            $(document).find('body').css('pointer-events', 'inherit');

            // $(document).find('body').css({"height": "100%", "overflow": "auto"});
        }).error(function (err) {});
    });

    $('#rfistate,#rficity').change(function () {
        rfipopup_form.form();
    });

    var intervalrfipop;
    var rfipopOtpTimer = function () {
        var count = 90;
        clearInterval(intervalrfipop);
        intervalrfipop = setInterval(function () {
            $('#countrfi').html(count);
            count--;
            if (count === 0) {
                clearInterval(intervalrfipop);
                $('#countrfi').html('');
                $('#counterrfi').css('display', 'none');
                $('.resend0rfi').css('pointer-events', 'inherit');
                $('.resend0rfi').css('color', 'red');
            }
        }, 1000);
    };

    $('#submit_rfipopup').click(function (e) {
        if (rfipopup_form.form()) {
            $('#submit_rfipopup').addClass('disableCls');
			var data = $(this).closest('form').serialize();
			var data = data + '&CarModelName=' + $('.rfimodel option:selected').text();
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
                $('#submit_rfipopup').removeClass('disableCls');
				if (response.IsSuccess) {
                    $('#myModalAutoOpen_rfi').modal('hide');
					$('#myModal_testdrive_rfi').modal('show');
					$('.resend0rfi').css('pointer-events', 'none');
					rfipopOtpTimer();
					$('#counterrfi').css('display', 'block');
					$('.resend0rfi').css('color', 'grey');
                    $('.verifyotp').val('');
                    tdSubmit({
						name:convertAES($('#form-rfipopup').find('#Name').val()),						
						email:convertSHA($('#form-rfipopup').find('#Email').val()),
						mobile:convertSHA($('#form-rfipopup').find('#Mobile').val()),
						state:$('#form-rfipopup').find('#rfistate option:selected').text(),
						city: $('#form-rfipopup').find('#rficity option:selected').text(),
						dealer:$('#form-rfipopup').find('#enrldealer option:selected').text(),
						model:$('#form-rfipopup').find('.rfimodel option:selected').text()
                    }, 'register_your_intrest_nexa');
                    tdSubmit({
						'eventCategory': 'NEXa World RFI POPUP page Pre OTP '+$('#form-rfipopup').find('.rfimodel option:selected').text(),
						'eventAction': 'click',
						'eventLabel': 'NEXa World POPUP RFI-Pre OTP '+$('#form-rfipopup').find('.rfimodel option:selected').text(),
					}, 'event_nexa');
                    DataLayerMSILDL_FormSubmission_Type.Push('Sticky-RFI_nexaworld', 'Submit', $('.rfimodel option:selected').text()+' RFI Pre OTP', $('.rfimodel option:selected').text(), $('#form-rfipopup').find('#Mobile').val(), 'Popup Nexaworld');

				} else { }
			}).error(function (err) {
                $('#submit_rfipopup').removeClass('disableCls');
             });
        }
    });

    $('.rfiotpsubmit').click(function () {
		if ($('#btdotrfi').val()) {
            $('.rfiotperror').hide();
            $('.rfiotpsubmit').addClass('disableCls');
            
            var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}

			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}


            var f_thankyouaccessories = $('#f_thankyouaccessories').val();
			if(typeof f_thankyouaccessories == 'undefined')
			{
                var data = $('#form-rfipopup').serialize() + '&Otp=' + $('#btdotrfi').val() + '&CarModelName=' + $('.rfimodel option:selected').text() + '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			}else{
                var data = $('#form-rfipopup').serialize() + '&Otp=' + $('#btdotrfi').val() + '&CarModelName=' + $('.rfimodel option:selected').text() + '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP+ '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories;
			 }


			
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			var rowdata2 = PrepareRequest('/api/sitecore/Forms/RegisterForInterest', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
                    $('.rfiotperror').hide();
 
					$.ajax(rowdata2).done(function (response2) {

                        if(ra.utils.readCookie('pll_forms')==null){
                          ra.utils.setCookieUniversal('pll_forms',ra.utils.marquee_event.pll_forms,'5000'); 
                          ra.utils.setCookieUniversal('pll_forms_name','Register For Interest','5000'); 
                          Marquee_Total();
                        }
                        msildl.push({ 'event': 'Sticky-RFI_POPUP_OTP', 'eventCategory': 'Sticky-RFI_POPUP_OTP', 'eventAction': 'Submit', 'eventLabel': 'RFI_POPUP_SUBMIT_POST_OTP' });
                        $('.rfiotpsubmit').removeClass('disableCls');
                        $('#myModal_testdrive_rfi').modal('hide');
                        $('#myModalAutoOpen_rfi').find('.bookTestDriveSection').hide();
                        // $('#myModalAutoOpen_rfi').find('.testThankyouMsg').show();
                        $('#myModalAutoOpen_rfi').find('.testThankyouMsg').parent('.modal-content').find('.close').addClass('thankyou_close');
                        $('#myModalAutoOpen_rfi').modal('show');

                        DataLayerMSILDL_FormSubmission_Type.Push('Sticky-RFI_nexaworld', 'Submit', $('.rfimodel option:selected').text()+' RFI Post OTP', $('.rfimodel option:selected').text(), $('#form-rfipopup').find('#Mobile').val(), 'Popup Nexaworld');
                       
                         var CarModelType = $('#rfimodel option:selected').val();
                        // if(CarModelType=='2'){
                        // 	$('.ExploreUrlresBaleno').show();
                        // }else{
                        // 	$('.ExploreUrlresBaleno').hide();
                        // }
                    //Hide Ebook button
                    $('#myModalAutoOpen_rfi').find('.expAccessoriesBtn').hide();


                    if(response2.IsEnable !== 'undefined'){
                        $('#myModalAutoOpen_rfi').find('#sf-thankyou').show();
                        $('#myModalAutoOpen_rfi').find('.testThankyouMsg').show();
                            // $('.thankyoutitleres').html(response2.ThankyouTitle);
                            $('#myModalAutoOpen_rfi').find('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 

                             
                            if(CarModelType=='16'){
                                $('#myModalAutoOpen_rfi').find('.thankyouMsgCarBoxSection').hide();
                                $('#myModalAutoOpen_rfi').find('.expAccessoriesBtn').css('display','block');
                                 }else{
                                    $('#myModalAutoOpen_rfi').find('.expAccessoriesBtn').css('display','none');
                                    $('#myModalAutoOpen_rfi').find('.thankyouMsgCarBoxSection').show();
                                    $('#myModalAutoOpen_rfi').find('.BrandImageRes').attr('src', response2.BrandImage);
                                    $('#myModalAutoOpen_rfi').find('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
                                    $('#myModalAutoOpen_rfi').find('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
                                    $('#myModalAutoOpen_rfi').find('.BrandImageResBig').attr('src', response2.BrandImage);
                                    if(response2.AccessoryItems){
                                        for(var i = 0; i < response2.AccessoryItems.length; i++){
                                            const element = response2.AccessoryItems[i];  
                                            $('#myModalAutoOpen_rfi').find('.resulVal').append('<a href='+ element.AccessoryURL + '><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
                                    }
                                    }
                                    
                                 }

                    }else if(response2){
                        $('#myModalAutoOpen_rfi').find('.testThankyouMsg').show();

                        if(CarModelType=='16'){
                            $('#myModalAutoOpen_rfi').find('.expAccessoriesBtn').css('display','block');
                        }else{
                            $('#myModalAutoOpen_rfi').find('.expAccessoriesBtn').css('display','none');
                        }
                    }


					}).error(function (err) {

					});
                    tdSubmit({
						'eventCategory': 'NEXa World RFI POPUP page Post OTP '+$('#form-rfipopup').find('.rfimodel option:selected').text(),
						'eventAction': 'click',
						'eventLabel': 'NEXa World POPUP RFI-Post OTP '+$('#form-rfipopup').find('.rfimodel option:selected').text(),
					}, 'event_nexa');
				} else {
					$('.rfiotperror').show();
					$('.rfiotpsubmit').removeClass('disableCls');
				}
			}).error(function (err) {
                $('.rfiotpsubmit').removeClass('disableCls');
			});
        }
        else{
            $('.rfiotperror').show();
        }
    });

    $('.resend0rfi').click(function () {
		var data = $('#form-rfipopup').serialize();
		var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
		$.ajax(rowdata).done(function (response) {
			if (response.IsSuccess) {
				$('.resend0rfi').css('pointer-events', 'none');
				$('#counterrfi').css('display', 'block');
				rfipopOtpTimer();
				$('.resend0rfi').css('color', 'grey');
			} else { }
		}).error(function (err) { });
	});
});




'use strict';
var baseURL = 'https://api.uat.marutifinancemarketplace.com';
//Prepare request to sending data to server require parameters endpoint, data, and token
function PrepareRequest(url, data) {
    return {
        'async': true,
        'crossDomain': true,
        'url': url,
        'method': 'POST',
        'data': data
    }
}

function postDetails(url, data) {
    return new Promise(
        function(resolve, reject) {
            $.ajax({
                type: 'POST',
                url: url,
                data: data,
                contentType: 'application/json; charset=utf-8',
                datatype: 'json',
                async: 'true',
                success: function(response) {
                    if (response) {
                        response = jQuery.parseJSON(response);
                        resolve(response);
                    }

                },
                error: function(response) {
                    reject(response);
                }
            });
        }
    )
}

function PrepareRequestMedia(url, data, token) {
    return {
        'async': true,
        'crossDomain': true,
        'url': url,
        'method': 'POST',
        'headers': {
            'Authorization': token,
            'Http-X-Access': 'NexaConfigurator',
            'Content-Type': 'application/json',
            'X-Requested-With': 'XMLHttpRequest',
            'cache-control': 'no-cache'
        },
        'processData': false,
        'contentType': false,
        'mimeType': 'multipart/form-data',
        'data': data

    }
}

// get data from mocky
function getData(url) {
    return new Promise(
        function(resolve, reject) {
            var settings = {
                'async': true,
                'url': url,
                'method': 'GET',
                'mimeType': 'multipart/form-data'
            }

            $.ajax(settings)
                .done(function(response) {
                    var res = JSON.parse(response);
                    resolve(res);
                })
                .error(function(err) {
                    reject(err);
                });
        }
    );
}

// get data from mocky
function postData(url, data) {
    return new Promise(
        function(resolve, reject) {
            var settings = {
                'async': true,
                'url': url,
                'method': 'POST',
                'mimeType': 'multipart/form-data',
                'data': data
            }

            $.ajax(settings)
                .done(function(response) {
                    var res = JSON.parse(response);
                    resolve(res);
                })
                .error(function(err) {
                    reject(err);
                });
        }
    );
}

// get data from mocky
function getDataDirect(url) {
    return new Promise(
        function(resolve, reject) {
            var settings = {
                'async': true,
                'url': baseURL + url,
                'method': 'GET',
                'mimeType': 'multipart/form-data'
            }

            $.ajax(settings)
                .done(function(response) {
                    var res = JSON.parse(response);
                    resolve(res);
                })
                .error(function(err) {
                    reject(err);
                });
        }
    );
}
// load youtube video
function loadFilm(ytbSrc){	
	if(!$('#ytb_iframe_div').find('iframe').length){
		$('<iframe>')                         
		.attr('height',560)
		.attr('data-src',ytbSrc) 
		.attr('src',ytbSrc) 
		.attr('id','iframeid')
		.attr('frameborder','0')
		.attr('allow','autoplay; encrypted-media')
		.attr('allowfullscreen','')
		.attr('data-gtm-yt-inspected-8345729_115','true')
		.appendTo('#ytb_iframe_div');
	}
}
function loadVideos(ytbid,ytbSrc){	
	if(!$('#'+ytbid).find('iframe').length){
		$('<iframe>')                         
		.attr('height',560)
		.attr('data-src',ytbSrc) 
		.attr('src',ytbSrc) 
		.attr('id','iframeid')
		.attr('frameborder','0')
		.attr('allow','autoplay; encrypted-media')
		.attr('allowfullscreen','')
		.attr('data-gtm-yt-inspected-8345729_115','true')
		.appendTo('#'+ytbid);
	}
}


window.IsPermit = {};
IsPermit.ScrollOnForVideo = true;

$(window).on('scroll',function() {
    if($('.pictureSlideSection').length>0){
    if (checkVisible($('.pictureSlideSection'))) {
  if($('#youtube-video1').length>0){
    var ytbSrc  = $('#youtube-video1').val();
      if(IsPermit.ScrollOnForVideo){
      var ytbid = 'YouTubeVideo1';
      loadVideos(ytbid,ytbSrc);  
      IsPermit.ScrollOnForVideo = false;
    }
        }
    } 
}
});

function checkVisible( elm, evalue ) {
    evalue = evalue || 'object visible';
    var viewportHeight = $(window).height(),
        scrolltop = $(window).scrollTop(), 
        y = $(elm).offset().top,
        elementHeight = $(elm).height();   
    
    if (evalue == 'object visible') return ((y < (viewportHeight + scrolltop)) && (y > (scrolltop - elementHeight)));
    if (evalue == 'above') return ((y < (viewportHeight + scrolltop)));
}

$(document).find('.bannercontentmssf a').on('click',function(){
    var ytbSrc = $('#BannerVideoUrl').val();
    var ytbid = 'YouTubeVideo2';
    loadVideos(ytbid,ytbSrc);  
 });

$(document).ready(function() {
	$('#myModal_btd_popup').modal({
		show:false,
		backdrop:'static'
		});
	$('#myModal_btd_popup').modal('show');

    var btdpop = $('#form-btdpop').validate({
		rules: {
			Name: {
				required: true,
				maxlength: 30,
				name_regex: /^[A-z]*((-|\s)*[A-z])*$/g
			},
			Email: {
				required: true,
				email: true,
				maxlength: 100,
				email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
			},
			Mobile: {
				required: true,
				minlength: 10,
				maxlength: 10,
				mobile_regex: /^[^0-5]\d{9}$/,
				number: true
			},
			CarModel: {
				required: true
			},
			BuyerType: {
				required: true
			},
			IsDisclaimerAccepted: 'required',
			State: {
				required: true
			},
			City: {
				required: true
			},
			Dealer: {
				required: true
            }
		},
		messages: {
			Name: $('#form-btdpop').find('#Name').attr('data-error'),
			Email: $('#form-btdpop').find('#Email').attr('data-error'),
            Mobile: $('#form-btdpop').find('#Mobile').attr('data-error'),
			CarModel: $('#form-btdpop').find('#btdpopcarmodel').attr('data-error'),
			BuyerType: $('#form-btdpop').find('#btdpopupByrtyp').attr('data-error'),
			IsDisclaimerAccepted: $('input[name=IsDisclaimerAccepted]').attr('data-error'),
			State: $('#form-btdpop').find('#btdpopState').attr('data-error'),
			City: $('#form-btdpop').find('#btdpopCity').attr('data-error'),
			Dealer: $('#form-btdpop').find('#btdpopDealer').attr('data-error')
		},
		errorElement: 'em',
		errorPlacement: function (error, element) {
			// Add the `invalid-feedback` class to the error element
			error.addClass('invalid-feedback');
			if (element.prop('type') === 'checkbox') {
				error.insertAfter(element.next('label'));
			} else {
				error.insertAfter(element);
			}
		},
		highlight: function (element, errorClass, validClass) {
			$(element).addClass('is-invalid').removeClass('is-valid');
		},
		unhighlight: function (element, errorClass, validClass) {
			$(element).addClass('is-valid').removeClass('is-invalid');
		},
		submitHandler: function (form) {
			form.submit();
		}
    });
    
	var $inputEmailbtdpop = $('#form-btdpop #Email');
	$inputEmailbtdpop.keypress(function(e) {
	  var max = 99;
	  if ($inputEmailbtdpop.val().length > max) {
		  $inputEmailbtdpop.val($inputEmailbtdpop.val().substr(0, max));
	  }
	  var key = e.keyCode;
	  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64  || key==46);
	  if (!returnn) {
		return false;
	  }
	});

    $('#btdpopState').change(function (e,cityCode) {
		var cities = $('#btdpopCity');
		var data = $(this).closest('form').serialize();
		var that = this;
		var rowdata = PrepareRequest('/api/sitecore/Forms/LoadCities', data);
		$.ajax(rowdata).done(function (response) {
			cities.html('');
			$('#btdpopDealer').html('');
			$('#btdpopDealer').append($('<option></option>').val('').text('Dealer'));
			cities.append($('<option></option>').val('').text('City'));
			$.each(response, function (index, item) {
				cities.append($('<option></option>').val(item.Value).html(item.Text));
			});
			
			//popultae city if value is passed from aut_Populate_StateCity
			if(cityCode){
				$('select[name="City"]').val(cityCode).trigger('change');
			}
			
			
		}).error(function (err) { });
	});
	$('#btdpopCity').change(function () {
		var dealer = $('#btdpopDealer');
		var data = $(this).closest('form').serialize();
		var that = this;
		var rowdata = PrepareRequest('/api/sitecore/Forms/LoadDealers', data);
		$.ajax(rowdata).done(function (response) {
			dealer.html('');
			dealer.append($('<option></option>').val('').text('Dealer'));
			$.each(response, function (index, item) {
				dealer.append($('<option></option>').val(item.Value).html(item.Text));
			});
		}).error(function (err) { });
    });
  


var intervalbtdpop;
var btdpopOtpTimer = function () {
    var count = 60;
    clearInterval(intervalbtdpop);
    intervalbtdpop = setInterval(function () {
		$('#countpop').html(count);
		$('#count').html(count);
        count--;
        if (count === 0) {
            clearInterval(intervalbtdpop);
            $('#countpop').html('');
            $('#counterpop').css('display', 'none');
            $('.resend0pop').css('pointer-events', 'inherit');
			$('.resend0pop').css('color', 'red');
			$('#count').html('');
			$('#count').css('display', 'none');
			$('#OtpCounter').css('display', 'none');
			$('#ReSent_OTP').css('pointer-events', 'inherit');
			$('#ReSent_OTP').css('color', 'red');
        }
    }, 1000);
};

    $('.btdpop_submit').click(function() {
        if(btdpop.form())
        {
            $('.btdpop_submit').addClass('disableCls');
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}

			var data = $(this).closest('form').serialize()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			var data = data + '&CarModelName=' + $('#btdpopcarmodel option:selected').text();
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
                $('.btdpop_submit').removeClass('disableCls');
				if (response.IsSuccess) {
					tdSubmit({
						name:convertAES($('#form-btdpop').find('#Name').val()),						
						email:convertSHA($('#form-btdpop').find('#Email').val()),
						mobile:convertSHA($('#form-btdpop').find('#Mobile').val()),
						state:$('#form-btdpop').find('#btdpopState option:selected').text(),
						city: $('#form-btdpop').find('#btdpopCity option:selected').text(),
						dealer:$('#form-btdpop').find('#btdpopDealer option:selected').text(),
						model:$('#form-btdpop').find('#btdpopcarmodel option:selected').text()
					}, 'book_test_drive_nexa');
					tdSubmit({
						'eventCategory': 'BTD POPUP Page Pre OTP '+$('#form-btdpop').find('#btdpopcarmodel option:selected').text(),
						'eventAction': 'click',
						'eventLabel': 'POPUP BTD - Pre OTP '+$('#form-btdpop').find('#btdpopcarmodel option:selected').text(),
					}, 'event_nexa');
					DataLayerMSILDL_BTDForm.Push('Popup-BTD_nexa', 'Submit', $('#btdpopcarmodel option:selected').text()+' btd Pre OTP', $('#btdpopcarmodel option:selected').text(), 'Popup Brand Page', $('#form-btdpop').find('.mobile').val());
                    //DataLayerMSILDL_BTDForm.Push('Popup-BTD_nexa', 'Submit', $('#CarModel option:selected').text()+' btd Dealer', $('#CarModel option:selected').text(), 'Popup Brand Page', $('#form-btdpop').find('.mobile').val());
                    
                    $('.verifyotp').val('');
                    $('#myModalAutoOpen_booktestDrive').modal('hide');
					$('#myModal_testdrive_pop').modal('show');
					$('.resend0pop').css('pointer-events', 'none');
					btdpopOtpTimer();
					$('#counterpop').css('display', 'block');
					$('.resend0pop').css('color', 'grey');
				} else { }
			}).error(function (err) {
                $('.btdpop_submit').removeClass('disableCls');
             });
        }
    })

    $('.btdotpsubmit').click(function () {
		if ($('#btdotpop').val()) {
            $('.rfiotperror').hide();
			$('.btdotpsubmit').addClass('disableCls');
			
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}

			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}

			
			var f_thankyouaccessories = $('#f_thankyouaccessories').val();
			if(typeof f_thankyouaccessories == 'undefined')
			{
				var data = $('#form-btdpop').serialize() + '&Otp=' + $('#btdotpop').val()  + '&CarModelName=' + $('#btdpopcarmodel option:selected').text()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			}else{
				var data = $('#form-btdpop').serialize() + '&Otp=' + $('#btdotpop').val() + '&CarModelName=' + $('#btdpopcarmodel option:selected').text()  + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories + '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			 }
			
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			var rowdata2 = PrepareRequest('/api/sitecore/Forms/BookTestDrive', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					DataLayerMSILDL_BTDForm.Push('Popup-BTD_nexa', 'Submit', $('#btdpopcarmodel option:selected').text()+' btd Post OTP', $('#btdpopcarmodel option:selected').text(), 'Popup Brand Page', $('#form-btdpop').find('.mobile').val());
					tdSubmit({
						'eventCategory': 'BTD POPUP Page Post OTP '+$('#form-btdpop').find('#btdpopcarmodel option:selected').text(),
						'eventAction': 'click',
						'eventLabel': 'POPUP BTD - Post OTP '+$('#form-btdpop').find('#btdpopcarmodel option:selected').text(),
					}, 'event_nexa');
					$('.rfiotperror').hide();
					$.ajax(rowdata2).done(function (response2) {
						DataLayerMSILDL_BTDForm.Push('Popup-BTD_nexa', 'Submit', $('#btdpopcarmodel option:selected').text()+' btd submit_popup', $('#btdpopcarmodel option:selected').text(), 'Popup Brand Page', $('#form-btdpop').find('.mobile').val());
						if($.trim(response2) == null || $.trim(response2) == undefined){ dis = 0; console.log(response2); }else{
							if(response2.IsEnable !== 'undefined'){
								ra.utils.setCookieUniversal('btd_form',ra.utils.marquee_event.btd_form,'5000'); 
                				Marquee_Total();			
						$('.btdotpsubmit').removeClass('disableCls');
                        $('#myModal_testdrive_pop').modal('hide');
                        $('#myModalAutoOpen_booktestDrive').find('.bookTestDriveSection').hide();
                        $('#myModalAutoOpen_booktestDrive').find('.testThankyouMsg').show();
						$('#myModalAutoOpen_booktestDrive').modal('show');
						// $('.thankyoutitleres').html(response2.ThankyouTitle);
						$('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 
						$('.BrandImageRes').attr('src', response2.BrandImage);
						$('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
						$('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
						$('.BrandImageResBig').attr('src', response2.BrandImage);
						if(response2.AccessoryItems){
						for(var i = 0; i < response2.AccessoryItems.length; i++){
								const element = response2.AccessoryItems[i];  
								$('.resulVal').append('<a href="+ element.AccessoryURL + "><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
						} 
					}
					}else if(response2){
						$('#myModal_testdrive').modal('toggle');
						$('.stepform1').hide();
						$('#sf-thankyou').show();
					}
				}						
					}).error(function (err) {

					});
				} else {
					$('.rfiotperror').show();
					$('.btdotpsubmit').removeClass('disableCls');
				}
			}).error(function (err) {
                $('.btdotpsubmit').removeClass('disableCls');
			});
        }
        else{
            $('.rfiotperror').show();
        }
    });
    
    $('.resend0pop').click(function () {
		var data = $('#form-btdpop').serialize();
		var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
		$.ajax(rowdata).done(function (response) {
			if (response.IsSuccess) {
				$('.resend0pop').css('pointer-events', 'none');
				$('#counterpop').css('display', 'block');
				btdpopOtpTimer();
				$('.resend0pop').css('color', 'grey');
				
			} else { }
		}).error(function (err) { });
	});



	//Booking Cancel OTP send
	$(document).find('#Sent_OTP').on('click', function () {	
		var MobileNumber  = $('#OTP_Number').val();
		$.ajax({
			method:'post',
			url:'/api/sitecore/Forms/SendOtp',
			data:{Mobile:MobileNumber},
			success:function(response){
				if (response.IsSuccess) {
					//alert(response);
				}
			}
		});
	});


		//Booking Cancel Resend OTP CANCEL
	$(document).find('#ReSent_OTP').on('click', function () {
			var MobileNumber = $.trim($('#OTP_Number').val()); 
			$.ajax({
				method:'post',
				url:'/api/sitecore/Forms/SendOtp',
				data:{Mobile:MobileNumber},
				success:function(response){
					if (response.IsSuccess) {
						$('#ReSent_OTP').css('pointer-events', 'none');
						$('#count').css('display', 'block');
						$('#OtpCounter').css('display', 'block');
						btdpopOtpTimer();
						$('#ReSent_OTP').css('color', 'grey');
					} else { }
				}
			}).error(function (err) {});
		});
	
	// Booking Cancel  otp Verify
	$(document).find('#otpVerify').on('keyup', function () {
		var Otp = $(this).val();
		var Mobile  = $.trim($('#OTP_Number').val());
		if(Otp.length>3){
		$.ajax({
			method:'post',
			url:'/api/sitecore/Forms/VerifyOtp',
			data:{Mobile:Mobile,Otp:Otp},
			success:function(response){
				if (response.IsSuccess){
					$('#ValidateOTP').hide();
					$('#OtpCounter').css('display', 'none');
					 $('#CancelBTNclickable').css('pointer-events', 'inherit');
				} else { 
					 $('#CancelBTNclickable').css('pointer-events', 'none');
					$('#ValidateOTP').show();
				}
			}
		});
	}
	});

	

	 $(document).find('.CancelBTNclickable').on('click', function () {	
		var data = $(this).closest('form').serialize();
		var rowdata = PrepareRequest('/api/sitecore/BookingCancellation/CancelBookingRequest', data);
		$.ajax(rowdata).done(function (response) {
			if (response){
				$('#overlayBox').show();
				$('.buynowPopup').show();
			} else { 	console.log(response);}
		}).error(function (err) {});
    });






//Booking Cancellation price format

var x=$('#modelprice').val();
if(x){
x=x.toString();
var lastThree = x.substring(x.length-3);
var otherNumbers = x.substring(0,x.length-3);
if(otherNumbers != '')
	lastThree = ' ' + lastThree;
var res = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ' ') + lastThree;
$('.cancelDetails .cancelDetailsRow .cancelCar h2').html('<i class="fa fa-rupee-sign"></i> ' +res);

}


});
'use strict';
/*globals ra */

(function () {

    var localStorageKey='HighlightDot_'+$('#HdnCarModelName').val();
    
    var activeDot = localStorage.getItem(localStorageKey)
    if (!activeDot) {
        $('.dc__container .mySlides').hide();
        $('.dc__container .mySlides:first').show();
        $('.dc__picker .dc_dots:first').addClass('active');
        var urlimg = $('.dc__picker .dc_dots:first').attr('data-url');
        var id = $('.dc__picker .dc_dots:first').attr('data-id');
        $('#' + id).children('img').attr('src', urlimg);
        if ($('.hero-banner').length > 0) {
            setCookie('banner_image_url', urlimg);
            setCookie('LastViewedBrandDetails', 'LastVisitedBrandName=' + $('#HdnCarModelName').val() + '&InteractiveBrochure=' + $('#InteractiveBrochure').attr('href'));
        }

        //Triggerd event or set cookies Specific color car viewd

        var dataKeyValue = $('.dc__picker .dc_dots:first').data('carmodel-color');
        if (dataKeyValue) {
            var carModel = dataKeyValue.split('|')[0];
            var carColor = dataKeyValue.split('|')[1];
            setCookie('color_click_' + carModel, carColor);
        }

    }


    $('.dc__picker .dc_dots').click(function (event) {
        $('.dc__picker .dc_dots').removeClass('active');
        $(this).addClass('active');
        $('.dc__container .mySlides').hide();
        var selectTab = $(this).attr('data-id');
        var selectUrl = $(this).attr('data-url');
        var img2 = new Image();
        img2.src = selectUrl;

        img2.onload = function () {
            $('#' + selectTab).children('img').attr('src', selectUrl);
            $('#' + selectTab).show();
        };

        // To Set values in cookies
        setCookie('banner_image_url', selectUrl);
        if($('#HdnCarModelName').val()){
        setCookie('LastViewedBrandDetails', 'LastVisitedBrandName=' + $('#HdnCarModelName').val() + '&InteractiveBrochure=' + $('#InteractiveBrochure').attr('href'));
    }
        //setCookie('HighlightDot', activeDot);
        var activeDot = $(this).data('id');
		var localStorageKey='HighlightDot_'+$('#HdnCarModelName').val();
        
        localStorage.setItem(localStorageKey,activeDot)
        tdSubmit({
            'eventCategory': 'color selection',
            'eventAction': 'Click',
            'eventLabel': $(this).find('p').text().trim(),
        }, 'event_nexa');

        //Triggerd event or set cookies Specific color car viewd
        
        var dataKeyValue = $(this).data('carmodel-color');
        if (dataKeyValue) {
            var carModel = dataKeyValue.split('|')[0];
            var carColor = dataKeyValue.split('|')[1];
            setCookie('color_click_' + carModel, carColor);
        }
    });

    //CDP_PSN components
    $('.dc__picker .dc_dots_cdp').click(function (event) {
        $('.dc__picker .dc_dots_cdp').removeClass('active');
        $(this).addClass('active');
        $('.dc__container .mySlides_cdp').hide();
        var selectTab = $(this).attr('data-id');
        var selectUrl = $(this).attr('data-url');
        var img2 = new Image();
        img2.src = selectUrl;

        img2.onload = function () {
            $('#' + selectTab).children('img').attr('src', selectUrl);
            $('#' + selectTab).show();
        };

        // To Set values in cookies
        //var activeDot = $(this).data('id');
		//var localStorageKey='HighlightDot_'+$('#HdnCarModelName').val();
        //localStorage.setItem(localStorageKey,activeDot)
        
        //Triggerd event or set cookies Specific color car viewd
        //var dataKeyValue = $(this).data('carmodel-color');
        //if (dataKeyValue) {
        //    var carModel = dataKeyValue.split('|')[0];
        //    var carColor = dataKeyValue.split('|')[1];
        //    setCookie('color_click_' + carModel, carColor);
        //}
    });

    $('.colorcode_cdp').click(function() {
        $('.colorcode_cdp a').removeClass('active');
        $(this).find('a').addClass('active');

        $('.mobilecarvariant .tab-pane').removeClass('active');
        var selectTab = $(this).attr('data-id');
        $('#'+selectTab).addClass('active');
    });

    if ($(window).width() < 767) {
        $('.sticky-navigation.technology ul').scrollLeft(50);
        $('.sticky-navigation.features ul').scrollLeft(130);
        $('.sticky-navigation.engine ul').scrollLeft(240);
        $('.sticky-navigation.safety ul').scrollLeft(320);
        $('.sticky-navigation.specifications ul').scrollLeft(415);
        $('.sticky-navigation.media-coverage ul').scrollLeft(540);
        $('.sticky-navigation.baleno-rs ul').scrollLeft(540);
    }
}(ra));

function scTriggerGoal(goalID) {
    var data = 'goalID=' + goalID;
    var rowdata = PrepareRequest('/api/sitecore/api/trackgoal', data);
    $.ajax(rowdata).done(function (response) {

    }).error(function (err) {

    });
}
//datalayer and cdp
$('.hero-banner.scross-banner .hero__mobile a:first-of-type').on('click', function(){
    DataLayerMSILDL_Banner.Push('user_action', 'S-Cross Web AR - Banner', 'Click', 'Banner - ' + $(this).text().trim(), $('#HdnCarModelName').val());
});
$('.hero-banner.scross-banner .hero__mobile a:nth-of-type(2)').on('click', function(){
    DataLayerMSILDL_Banner.Push('user_action', 'S-Cross Web AR - Banner', 'Click', 'Banner - ' + $(this).text().trim(), $('#HdnCarModelName').val());
});
//Brand Page Mast Head JS
'use strict';
/*globals ra */

$(document).ready(function() {
    var priceListForSelectedCity;
    var getCookiesval = getCookie('ActiveVariantCity');

    if (getCookiesval) {
        getCookiesval = getCookiesval.split('+');
        //Check if city is selected or not
        $('#ddcity').val(getCookiesval[0]);
        $('.price').html('');
        // make 1 st option of variant drowp down as  Selected
        $('#exampleFormControlSelect2').val(getCookiesval[1]);
        $('#exampleFormControlSelect3').val(getCookiesval[1]);
    } else {
        //Check if city is selected or not
        if ($('#ddcity').val() == 'Location') {
            $('#ddcity').val('95');
        }
        // make 1 st option of variant drowp down as  Selected
        $('#exampleFormControlSelect2').prop('selectedIndex', 0);
        $('#exampleFormControlSelect3').prop('selectedIndex', 0);
    }

    if ($('.visitPersonalise').length > 0) {
        if (ra.cfg.isMobile) {
            if (ra.cfg.isIpaid) {
                getPriceDetails();
            } else {
                //getPriceDetailsOnMobile();
            }
        } else {
            getPriceDetails();
        }
    } else {
        if (!$('.desktopcarvariant').length > 0 || !$('.personalize_carvariant').length > 0) {
            // if (ra.cfg.isMobile) {
            //     getPriceDetailsOnMobile();
            // } else {
            //     getPriceDetails();
            // }
            if (window.matchMedia('only screen and (min-width: 992px)').matches)  
     {
        getPriceDetails();
     }
     if (window.matchMedia('only screen and (max-width: 992px)').matches){
        getPriceDetailsOnMobile();
     }
        }
    }


    $('#ddcity').change(function() {
       // $('.price').html('');
        if (ra.cfg.isMobile) {
            var rowdata = $('#ddcity').val() + '+' + $('#exampleFormControlSelect3').val();
            setCookie('ActiveVariantCity', rowdata);
        } else {
            var rowdata = $('#ddcity').val() + '+' + $('#exampleFormControlSelect2').val();
            setCookie('ActiveVariantCity', rowdata);
        }
        getPriceDetails();
    });

    $('#exampleFormControlSelect2').change(function() {
        $('.price').html('');
        SetVariantPrice();
        var rowdata = $('#ddcity').val() + '+' + $('#exampleFormControlSelect2').val();
        setCookie('ActiveVariantCity', rowdata);
        //Data Layer GTM
        DataLayerMSILDL.Push('', 'Variant Selection', 'Select', $('#exampleFormControlSelect2 option:selected').text() + '-' + $('#exampleFormControlSelect2').attr('data-model'));
    });

    //Change Variant dropdown on brand page banner
    $('#exampleFormControlSelect3').change(function() {
        $('.price').html('');
        SetVariantPriceonMobile();
        var rowdata = $('.city_search_list').find('option:selected').val() + '+' + $('#exampleFormControlSelect3').val();
        setCookie('ActiveVariantCity', rowdata);
        //Data Layer GTM
        DataLayerMSILDL.Push('', 'Variant Selection', 'Select', $('#exampleFormControlSelect3 option:selected').text() + '-' + $('#exampleFormControlSelect3').attr('data-model'));
    });

    function getPriceDetails(thisObj, currentCarModelCode) {

        var cityCode = '08';
        var currentcity = JSON.parse(localStorage.getItem('city'));
        if (!currentcity) {
            var psn_city_code = $('#mobile_city_header').attr('data-city-code');
            if (psn_city_code) {
                cityCode = psn_city_code;
            }
        } else {
            cityCode = currentcity.city_code;
        }
    
        var selectedCityCode = cityCode;
        //var defaultCityCodeCookie = '08';
        // var defaultCityCodeCookie = (getCookie('defaultCityCodeCookie') != null && getCookie('defaultCityCodeCookie') != String.Empty) ?
        //     getCookie('defaultCityCodeCookie') : '08';
        //if ($('.city_search_list').find('option:selected').val() == null || $('.city_search_list').find('option:selected').val() == '') {
        //    selectedCityCode = defaultCityCodeCookie;
        //} else {
        //    selectedCityCode = $('.city_search_list').find('option:selected').val();
        //}
    
        var carCityModelDetails = {
            CarModelCode: currentCarModelCode,
            CityCode: selectedCityCode
        }
        carCityModelDetails = JSON.stringify({
            'carCityModelDetails': carCityModelDetails
        });
        if (currentCarModelCode && selectedCityCode) {
            $.ajax({
                type: 'POST',
                 url: '/api/sitecore/API/GetCarPrice',
                 data: carCityModelDetails,
                contentType: 'application/json; charset=utf-8',
                datatype: 'json',
                async: 'true',
                success: function (response) {
                    response = jQuery.parseJSON(response);
                    var Price = '';
                    if (response != null && response.items != null) {
                        for (var i = 0; i < response.items.length; i++) {
                            if (thisObj.val().toUpperCase() === response.items[i].MODL_CODE.toUpperCase()) {
                                Price = (response.items[i]['METALLIC PRICE'] != null) ? response.items[i]['METALLIC PRICE'] : response.items[i]['NON-METALLIC PRICE'];
                                break;
                            }
                        }
                    }
                    if (Price != null || Price != '') {
                        //var commaSeperatedPrice = toCommaSepratedPrice(Price);
                        thisObj.closest('.cardetailbox').find('.carPrice').html('&#x20B9;' + toCommaSepratedPrice(Price) + '<span>ex-showroom</span>');
                    } else {
                        thisObj.closest('.cardetailbox').find('.carPrice').html('&#x20B9; N/A <span>ex-showroom</span>');
                    }
                },
                error: function (response) {}
            });
        }
    
    }

    function SetVariantPrice() {
        var i;
        var Price = '';
        for (i = 0; i < priceListForSelectedCity.items.length; i++) {

            if ($('#exampleFormControlSelect2').val() && $('#exampleFormControlSelect2').val().toUpperCase() === priceListForSelectedCity.items[i].MODL_CODE.toUpperCase()) {
                Price = (priceListForSelectedCity.items[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity.items[i]['METALLIC PRICE'] : priceListForSelectedCity.items[i]['NON-METALLIC PRICE'];
                break;
            }
        }
        if (Price != null) {
            $('.price').html(toCommaSepratedPrice(Price));
        } else {

            Price = '';

            $('.price').html(toCommaSepratedPrice(Price));

        }
    }

    $('.brandemicacl').click(function() {


        var url = '/api/sitecore/CarBrand/SaveEMICalculatorAnalytics/';


        var Obj = {

            CarModel: $('#HdnCarModelName').val(),

            CarModelId: $('#HdnCarModelId').val(),

            VariantName: $('#exampleFormControlSelect2 option:selected').text().trim(),

            VariantID: $('#exampleFormControlSelect2').val().trim(),

            City: $('#ddcity option:selected').val().trim(),

            CityID: $('#ddcity').val().trim()

        };


        $.ajax({


            type: 'POST',

            contentType: 'application/json; charset=utf-8',

            dataType: 'json',

            url: url,

            data: JSON.stringify({ 'emiCalculatorAnalytics': Obj }),

            cache: false,

            success: function(response) {


                var financevariant = $('#exampleFormControlSelect2').val();


                var financearmodel = $('#HdnCarModelId').val();


                var city = $('#ddcity').val();


                DataLayerMSILDL_FormSubmission_Calculator.Push('EMI Calculator', 'Submit', $('.brandemicacl').attr('data-model') + '-' + $('#exampleFormControlSelect2 option:selected').text() + '-' + $('#ddcity option:selected').text(), $('.brandemicacl').attr('data-model'), $('#exampleFormControlSelect2 option:selected').text());


                window.location.href = '/emi-calculator?financearmodel=' + financearmodel + '&financevariant=' + financevariant + '&city=' + city;


            },

            error: function(response) {

            }


        });


    });
	
	

});
//End Brand Page Mast Head JS
'use strict';
/*globals ra */

$('#highlights_subtab').on('click', 'li', function(event) {
    if ($(this).index() === $('#highlights_subtab li').length - 1) {
        var activeTab = $('#highlights_subtab li').eq(0).find('a').attr('href');
    } else {
        var activeTab = $(this).next().find('a').attr('href');
    }
    setCookie('HighlightTab', activeTab);

});

function intialiseHighilight() {
    var valueq = getCookie('HighlightTab');
    if (valueq) {
        $('#highlights_subtab .nav-link').removeClass('active show');
        $('#highlights_subtab a').each(function(index, value) {
            var hashedId = $(this).attr('href');
            if (hashedId === valueq) {
                $(this).addClass('active show');
                $('.highlightsSec .tab-content .tab-pane').removeClass('active show');
                $('.highlightsSec .tab-content .tab-pane').each(function(index, value) {
                    if (hashedId.split('#')[1] === $(this).attr('id')) {
                        $(this).addClass('show active');
                    }
                });
            }
        });
    }
}
intialiseHighilight();
$(document).ready(function() {
    if($('#registersectionxl6').length && isPwa())
    {
        tdSubmit({
            'eventCategory': 'PWA Nexa Open',
            'eventAction': 'Click',
            'eventLabel': 'PWA Nexa Open',
         }, 'event_nexa');
    }

    $('.brochureBtnSection').on('click','a', function() {
        tdSubmit({
            'eventCategory': 'Car Broucher Download',
            'eventAction': 'Click',
            'eventLabel': toTitleCase($(this).attr('cdplbl')),
         }, 'event_nexa');
    });

    $('.topcontactbtn').on('click','a', function() {
        tdSubmit({
            'eventCategory': 'Navigation Menu Top',
            'eventAction': 'Click',
            'eventLabel': toTitleCase($(this).text()),
         }, 'event_nexa');
    });

    $('.menubox').on('click','li a', function() {
        tdSubmit({
            'eventCategory': 'Navigation Menu Head',
            'eventAction': 'Click',
            'eventLabel': toTitleCase($(this).text()),
         }, 'event_nexa');
    });

    $('.foot1').on('click','li a h4', function() {
        tdSubmit({
            'eventCategory': 'Navigation Menu Footer',
            'eventAction': 'Click',
            'eventLabel': toTitleCase($(this).text()),
         }, 'event_nexa');
    });

    $('#cwrfbn').click(function() {
        tdSubmit({
            'eventCategory': 'Navigation Menu Footer',
            'eventAction': 'Click',
            'eventLabel': 'Register',
         }, 'event_nexa');
    });

    $('.innerfooter').on('click','ul li', function() {
        tdSubmit({
            'eventCategory': 'Toll Free Number Clicked',
            'eventAction': 'Click',
            'eventLabel': $(this).text(),
         }, 'event_nexa');
    });

    $('.innerfooter').on('click','ul li img', function() {
        tdSubmit({
            'eventCategory': 'Navigation Menu Footer',
            'eventAction': 'Click',
            'eventLabel': $(this).attr('title'),
         }, 'event_nexa');
    });

    $('.downloadapplogo').on('click','li img', function() {
        tdSubmit({
            'eventCategory': 'Navigation Menu Footer',
            'eventAction': 'Click',
            'eventLabel': $(this).attr('title'),
         }, 'event_nexa');
    });

    $('.nexacars').on('click','ul li a:first', function() {
        tdSubmit({
            'eventCategory': 'Navigation Menu Top',
            'eventAction': 'Click',
            'eventLabel': toTitleCase($(this).text()),
         }, 'event_nexa');
    });

    $('#form-fmpland1-brand').find('#Name').blur(function(){
        DataLayerMSILDL.Push('user_action', 'nexa_finance-PI enter name', 'enter', 'PI finance - name entered');
    });

    $('#form-fmpland1-brand').find('#Email').blur(function(){
        DataLayerMSILDL.Push('user_action', 'nexa_finance-PI enter email', 'enter', 'PI finance - email entered');
    });

    $('#form-fmpland1-brand').find('#dob_land').blur(function(){
        DataLayerMSILDL.Push('user_action', 'nexa_finance-PI enter DOB', 'enter', 'PI finance - DOB entered');
    });


    $('#form-fnc').find('.Name').blur(function(){
        DataLayerMSILDL.Push('user_action', 'nexa_finance-PI enter name', 'enter', 'PI finance - name entered');
    });

    $('#form-fnc').find('.Email').blur(function(){
        DataLayerMSILDL.Push('user_action', 'nexa_finance-PI enter email', 'enter', 'PI finance - email entered');
    });

    $('#form-fnc').find('.Mobile').blur(function(){
        DataLayerMSILDL.Push('user_action', 'nexa_finance-PI enter mobile number', 'enter', 'PI finance - mobile entered');
    });

    $('#form-fnc').find('#regDatepicker').blur(function(){
        DataLayerMSILDL.Push('user_action', 'nexa_finance-PI enter DOB', 'enter', 'PI finance - DOB entered');
    });
});
//city change on header
$(document).ready(function() {
    //on city selection 
    $(document).on('change', '#mycity', function() {
        var cityname = $(this).find('option:selected').text();
        DataLayerMSILDL.Push('', 'Location Change', 'Select', cityname);
        localStorage.setItem('city', JSON.stringify({ city_code: $('.city_search_list').find('option:selected').val(), city_name:$('.city_search_list').find('option:selected').text() }));
        //update price on banner
        getPriceThroughAPI();
        //Update price on brand page for mobile
        if (!$('.desktopcarvariant').length > 0 || !$('.personalize_carvariant').length > 0) {
            if (ra.cfg.isMobile) {
                getPriceDetailsOnMobile();
            }
        }

        if ($('.desktopcarvariant').length > 0 || $('.personalize_carvariant').length > 0) {
            getPriceDetailsNew();
        }

        //Update configurator
        ra.utils.configurationCity = cityname;
        if ($('.carconfigbox').length > 0) {
            ra.cFloatingNavigation.ajaxCallFloatingDetails();
        }

        //Update price on personalise page
        $('.cardetailbox').each(function() {
            var currentCarModelCode = $(this).find('.HdnCarModelCode').val();
            var thisObj = $(this).find('.ddlCarVariant');
            getPriceDetails(thisObj, currentCarModelCode);
        });
		
		//populate form
		autoPopulateFormStateCity($('.city_search_list').find('option:selected').val(),$('.city_search_list').find('option:selected').text());

    });
});
'use strict';
$(document).ready(function () {
    if ($('#HdnCarModelName').val() == 'XL6')
    {
        $('.automaniaMainSection').css('display', 'none');
    } 
    else if(window.location.pathname == '/brochure-register-your-interest/' || window.location.pathname ==  '/brochure-register-your-interest')
    {
        $('.automaniaMainSection').css('display', 'none');
    }

    if($('#hdn_page_name').val() == 'marquee_landing' || $('#hdn_page_name').val() == 'marquee_score'){

      $('.automaniaMainSection').css('display', 'none');

    }
});
// var getApiURL = {
//     'SendOTP': 'https://run.mocky.io/v3/61facc07-b961-47c1-a1dd-95aed497cf65',
//     'formVerifyOTP':'https://run.mocky.io/v3/dedd0e08-1d87-447e-8718-2acffe780894',
//     // 'formVerifyOTP':'https://run.mocky.io/v3/248aa353-413b-415d-be59-cb349544d8d0',
//      'sendMarqueeData':'https://run.mocky.io/v3/4c2908c3-d748-45db-b813-7a95b5f1b469', // code 1
//     // 'sendMarqueeData':'https://run.mocky.io/v3/79285e46-62fa-4df1-9639-1930a9f406ba'    // code 2
//     // 'sendMarqueeData':'https://run.mocky.io/v3/0e59d651-c2d0-4d02-9bc9-be9f3d74d9bd'        // error message
//     //'sendMarqueeData':'https://run.mocky.io/v3/0b0cc6da-82fe-4dad-9b0b-bd27b853eadf'
//     'getStateList':'https://run.mocky.io/v3/ebfdc763-8c75-4a34-951f-4f4eb9067e4d',
//     'getCityList':'https://run.mocky.io/v3/df7e3a3f-0983-4cc5-8e28-f0e6f55503b0',
//     'getMyScore':'https://run.mocky.io/v3/02b8fe57-b7dc-46fe-9c04-fa885377f975',
//   };

var getApiURL = {
    'SendOTP': '/api/sitecore/Forms/SendOtp',
    'formVerifyOTP': '/api/sitecore/Forms/VerifyOtp',
    'sendMarqueeData': '/api/sitecore/MarqeeEvent/SaveMarqeeEventDetails',
    'getStateList':'/api/sitecore/NexaUserLogin/LoadStates',
    'getCityList':'/api/sitecore/Forms/LoadCities',
    'getMyScore':'/api/sitecore/MarqeeEvent/ScorePageData',
};

// var getUrl = window.location.href;
var getUrl = window.location.hash.substr(1).split('?')[0];

if (getUrl == 'about' && getUrl != undefined) {
    // console.log('getUrl.split', getUrl.split('#')[1])
    $('.nav-link').removeClass('active')
    $('#profile-tab').addClass('active')
    $('.tab-pane').removeClass('active').removeClass('show')
    $('#profile').addClass('active').addClass('show')
}

if (getUrl == 'terms' && getUrl != undefined) {
    console.log('getUrl.split', getUrl.split('#')[1])
    $('.nav-link').removeClass('active')
    $('#contact-tab').addClass('active')
    $('.tab-pane').removeClass('active').removeClass('show')
    $('#contact').addClass('active').addClass('show')
}

$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    var target = $(e.target).attr('href') // activated tab
    if (target == '#home') {
        tdSubmit({
            'eventCategory': 'Sales Marquee Navigation Bar',
            'eventAction': 'click',
            'eventLabel': 'My Score',
        }, 'event_nexa');
    } else if (target == '#profile') {
        tdSubmit({
            'eventCategory': 'Sales Marquee Navigation Bar',
            'eventAction': 'click',
            'eventLabel': 'About The Event',
        }, 'event_nexa');
    } else if (target == '#contact') {
        tdSubmit({
            'eventCategory': 'Sales Marquee Navigation Bar',
            'eventAction': 'click',
            'eventLabel': 'T&C',
        }, 'event_nexa');
    }
});

var nametimeout = null;
$('#name').on('keyup keypress paste mouseup', function () {
    clearTimeout(nametimeout);
    nametimeout = setTimeout(function () {
        if ($('#name').hasClass('is-valid')) {
            tdSubmit({
                'eventCategory': 'Sales Marquee My Score Form Details',
                'eventAction': 'click',
                'eventLabel': 'Enter Name',
            }, 'event_nexa');
        }
    }, 2000);
});

var emailtimeout = null;
$('#email').on('keyup keypress paste mouseup', function () {
    clearTimeout(emailtimeout);
    emailtimeout = setTimeout(function () {
        if ($('#email').hasClass('is-valid')) {
            tdSubmit({
                'eventCategory': 'Sales Marquee My Score Form Details',
                'eventAction': 'click',
                'eventLabel': 'Enter Email',
            }, 'event_nexa');
        }
    }, 2000);
});

var mobiletimeout = null;
$('#mobile').on('keyup keypress paste mouseup', function () {
    clearTimeout(mobiletimeout);
    mobiletimeout = setTimeout(function () {
        if ($('#mobile').hasClass('is-valid')) {
            tdSubmit({
                'eventCategory': 'Sales Marquee My Score Form Details',
                'eventAction': 'click',
                'eventLabel': 'Enter Mobile',
            }, 'event_nexa');
        }
    }, 2000);
});

var otptimeout = null;
$('#btdotp').on('keyup keypress paste mouseup', function () {
    clearTimeout(otptimeout);
    otptimeout = setTimeout(function () {
        if ($('#btdotp').hasClass('is-valid')) {
            tdSubmit({
                'eventCategory': 'Sales Marquee My Score OTP Enter',
                'eventAction': 'click',
                'eventLabel': 'Enter OTP',
            }, 'event_nexa');
        }
    }, 2000);
});

$('#disclaimer').change(function () {
    if ($(this).is(':checked') == true) {
        tdSubmit({
            'eventCategory': 'Sales Marquee My Score Form Details',
            'eventAction': 'click',
            'eventLabel': 'Disclaimer Checked',
        }, 'event_nexa');
    }
});


// $(document).on('ready',function(){
$(document).on('click', '.proceed_now', function (e) {
    e.preventDefault();
    tdSubmit({
        'eventCategory': 'Sales Marquee My Score',
        'eventAction': 'click',
        'eventLabel': $('.proceed_now').text(),
    }, 'event_nexa');

    $(this).parent('.lp-step').removeClass('active');
    $('.footer-score-section').addClass('d-none');
    $(this).parent('.lp-step').next().addClass('active')
});

$(document).on('click', '.backTriger', function (e) {
    console.log('sssssssssss')
    $(this).parent().parent('.lp-step').removeClass('active');
    $('.footer-score-section').removeClass('d-none');
    $(this).parent().parent('.lp-step').prev().addClass('active')
});


$(document).on('click', '#automania_sales_clickhere', function (e) {
    e.preventDefault();
    $('.nav-link').removeClass('active')
    $('#profile-tab').addClass('active')
    $('.tab-pane').removeClass('active').removeClass('show')
    $('#profile').addClass('active').addClass('show')
    tdSubmit({
        'eventCategory': 'Sales Marquee My Score',
        'eventAction': 'click',
        'eventLabel': 'Click Here',
    }, 'event_nexa');
});

$(document).on('click', '#contact_konw_more', function (e) {
    e.preventDefault();
    $('.nav-link').removeClass('active')
    $('#profile-tab').addClass('active')
    $('.tab-pane').removeClass('active').removeClass('show')
    $('#profile').addClass('active').addClass('show')
    
});

$(document).on('click', '.next-tab', function (e) {
    e.preventDefault();
    //$('#myTab li:last-child a').tab('show');
    $('#myTab li:nth-child(2) a').tab('show');
});

$(document).on('click', '#automania_autoscroll', function (e) {
    // window.scrollTo({ top: 1000, behavior: 'smooth' });
    $('html, body').animate({ scrollTop: (800) }, 'slow');
})


$('ul#automania_collpase li').click(function (e) {
    if ($(this).children('h6').hasClass('active') == true) {
        tdSubmit({
            'eventCategory': 'Sales Marquee About The Event FAQ Collapse',
            'eventAction': 'click',
            'eventLabel': $(this).children('h6').text(),
        }, 'event_nexa');
    } else {
        tdSubmit({
            'eventCategory': 'Sales Marquee About The Event FAQ Expand',
            'eventAction': 'click',
            'eventLabel': $(this).children('h6').text(),
        }, 'event_nexa');
    }
   });

//new event cdp event added
    $(document).on('click','.offerLogoText',function(e){
        e.preventDefault();
        tdSubmit({
            'eventCategory': 'Sales Marquee Sticky',
            'eventAction': 'click',
            'eventLabel': 'Sales Marquee Sticky Button',
        }, 'event_nexa');
    });

    $(document).on('click','#automania_close_popup',function(e){
        e.preventDefault();
        tdSubmit({
            'eventCategory': 'Sales Marquee Sticky - PopUp - Close',
            'eventAction': 'click',
            'eventLabel': 'Close',
        }, 'event_nexa');
    });

    $(document).on('click','#automania_save_point',function(e){
        //e.preventDefault();
        tdSubmit({
            'eventCategory': 'Sales Marquee Sticky - PopUp - CTA',
            'eventAction': 'click',
            'eventLabel': $(this).text(),
        }, 'event_nexa');
    });

    $(document).on('click','#automania_know_more',function(e){
       // e.preventDefault();
        tdSubmit({
            'eventCategory': 'Sales Marquee Sticky - PopUp - CTA',
            'eventAction': 'click',
            'eventLabel': $(this).text(),
        }, 'event_nexa');
    });

    
    
//new event cdp event added

$('.check_my_score').click(function(){
    $('.lma-popup-blackhover').show();
    $('.lma-popup').css({'display':'flex'})
    tdSubmit({
        'eventCategory': 'Sales Marquee Check My Score',
        'eventAction': 'click',
        'eventLabel': 'Check My Score',
    }, 'event_nexa');
  })
    
  $('.lma-popup-inner-close').click(function(){
    $('.lma-popup-blackhover').hide();
    $('.lma-popup').css({'display':'none'})
    tdSubmit({
        'eventCategory': 'Sales Marquee Check My Score Close',
        'eventAction': 'click',
        'eventLabel': 'Close',
    }, 'event_nexa');
  })


  $('.set > .accor-header').on('click', function () {
    if ($(this).hasClass('active')) {
      $(this).removeClass('active');
      $(this)
        .siblings('.content')
        .slideUp(200);
      $('.set > .accor-header i')
        .removeClass('fa-minus')
        .addClass('fa-plus');

        tdSubmit({
            'eventCategory': 'Sales Marquee Your Score and Details  Collapse',
            'eventAction': 'click',
            'eventLabel': 'Collapse',
        }, 'event_nexa');
    } else {
      $('.set > .accor-header i')
        .removeClass('fa-minus')
        .addClass('fa-plus');
      $(this)
        .find('i')
        .removeClass('fa-plus')
        .addClass('fa-minus');
      $('.set > .accor-header').removeClass('active');
      $(this).addClass('active');
      $('.content').slideUp(200);
      $(this)
        .siblings('.content')
        .slideDown(200);
        tdSubmit({
            'eventCategory': 'Sales Marquee Your Score and Details Expand',
            'eventAction': 'click',
            'eventLabel': 'Expand',
        }, 'event_nexa');
    }
  }); 

var marqueeform = $('#marquee_form').validate({
    rules: {
        name: {
            required: true,
            maxlength: 30,
            name_regex: /^[A-z]*((-|\s)*[A-z])*$/g
        },
        email: {
            required: true,
            email: true,
            maxlength: 100,
            email_regex: /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/
        },
        select_state: {
            required: true,
        },
        select_city: {
            required: true,
        },
        IsDisclaimerAccepted: 'required',
        mobile: {
            required: true,
            minlength: 10,
            maxlength: 10,
            mobile_regex: /^[^0-5]\d{9}$/,
            number: true,
            alphanumeric: false
        },

    },
    messages: {
        name: {
            required: 'Name is required field',
            maxlength: 'Maximum length should be 30 characters',
            name_regex: 'No special characters allowed'
        },
        email: {
            required: 'Email is required field',
            email_regex: 'Invalid Email'
        },
        select_state: {
            required: 'State is required field',
        },
        select_city: {
            required: 'City is required field',
        },
        mobile: {
            required: 'Mobile is required field',
            minlength: 'Length should be 10 digits',
            maxlength: 'Length should be 10 digits',
            name_regex: 'No special characters allowed',
            mobile_regex: 'Invalid Mobile No.',
            alphanumeric: 'Invalid Mobile No.',
        },
    },

    errorElement: 'em',
    errorPlacement: function (error, element) {
        // Add the `invalid-feedback` class to the error element
        error.addClass('invalid-feedback');
        if (element.prop('type') === 'checkbox') {
            error.insertAfter(element.next('label'));
        } else {
            error.insertAfter(element);
        }
    },
    highlight: function (element, errorClass, validClass) {
        $(element).addClass('is-invalid').removeClass('is-valid');
    },
    unhighlight: function (element, errorClass, validClass) {
        $(element).addClass('is-valid').removeClass('is-invalid');
    },
    submitHandler: function (form) {
        form.submit();
    }
});


var $inputEmail = $('#marquee_form #email');
$inputEmail.keypress(function(e) {
  var max = 99;
  if ($inputEmail.val().length > max) {
      $inputEmail.val($inputEmail.val().substr(0, max));
  }
  var key = e.keyCode;
  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
  if (!returnn) {
    return false;
  }
});




var marquee_otp_form = $('#marquee_otp_form').validate({
    rules: {
        Otp: {
            required: true,
            number: true,
            minlength: 4,
            maxlength: 4
        }

    },
    messages: {
        Otp: {
            required: 'OTP is required field',
        },
    },
    errorElement: 'em',
    errorPlacement: function (error, element) {
        // Add the `invalid-feedback` class to the error element
        error.addClass('invalid-feedback');
        if (element.prop('type') === 'checkbox') {
            error.insertAfter(element.next('label'));
        } else {
            error.insertAfter(element);
        }
    },
    highlight: function (element, errorClass, validClass) {
        $(element).addClass('is-invalid').removeClass('is-valid');
    },
    unhighlight: function (element, errorClass, validClass) {
        $(element).addClass('is-valid').removeClass('is-invalid');
    },
    submitHandler: function (form) {
        form.submit();
    }
});

$(document).on('click', '#marqueeSubmitForm', function () {
    if (marqueeform.form()) {
        $('#name-error-server').empty()
        $('#email-error-server').empty()
        $('#mobile-error-server').empty()
        $('#select_state-error-server').empty()
        $('#select_city-error-server').empty()
        var mobile = $('#marquee_form').find('#mobile').val()
        if (mobile && (mobile.length == 10)) {
            //   $(this).hide();
            $.ajax({
                type: 'POST',
                url: getApiURL.SendOTP,
                data: {
                    Mobile: mobile
                },
                cache: false,
                async: 'true',
                success: function (response) {


                    if (response.IsSuccess == true) {
                        tdSubmit({
                            'eventCategory': 'Sales Marquee My Score OTP',
                            'eventAction': 'click',
                            'eventLabel': 'Close',
                        }, 'event_nexa');
                        $('#myModal_marquee_otp').modal('show')
                        $('.counter').show();
                        $('#marqueeCount').show();
                        $('.resend0').hide();
                        btdPopupOtpTimer();
                    }
                }
            });
        } else {
            console.log('err')
            // btdMobile.attr('data-error')
        }
    }
});

$('.resend0').on('click', function () {
    $(this).hide();
    var mobile = $('#marquee_form').find('#mobile').val()
    $.ajax({
        type: 'POST',
        url: getApiURL.SendOTP,
        data: {
            Mobile: mobile
        },
        cache: false,
        async: 'true',
        success: function (response) {
            console.log('response', response)

            if (response.IsSuccess == true) {
                tdSubmit({
                    'eventCategory': 'Sales Marquee My Score OTP Resend',
                    'eventAction': 'click',
                    'eventLabel': 'Resend OTP',
                }, 'event_nexa');
                $('.counter').show();
                $('#marqueeCount').show();
                btdPopupOtpTimer();
            }
        }
    });
});

$('#modalbtnmarquee').on('click', function () {
    $('.btdotperror').css('display', 'none')
    if (marquee_otp_form.form()) {
        var mobile = $('#marquee_form').find('#mobile').val()
        var otp = $('#btdotp').val();
        var data = {
            'Mobile': mobile,
            'Otp': otp
        }
        var req = JSON.stringify(data);
        $.ajax({
            type: 'POST',
            url: getApiURL.formVerifyOTP,
            data: data,
            cache: false,
            async: 'true',
            success: function (response) {
                console.log('response', response)
                if (response.IsSuccess == true) {
                    tdSubmit({
                        'eventCategory': 'Sales Marquee My Score OTP Verify',
                        'eventAction': 'click',
                        'eventLabel': 'Verify OTP',
                    }, 'event_nexa');

                    $('#myModal_marquee_otp').modal('hide')
                    sendMarqueeFormData()
                }
                else if (response.IsSuccess == false) {
                    $('.btdotperror').css('display', 'block')
                }
            }
        });
    }
})


function sendMarqueeFormData() {
    var name = $('#marquee_form').find('#name').val()
    var email = $('#marquee_form').find('#email').val()
    var mobile = $('#marquee_form').find('#mobile').val()
    var cityName = $('#marquee_form').find('#select_city :selected').text()
    var cityCode = $('#marquee_form').find('#select_city :selected').val()
    var stateName = $('#marquee_form').find('#select_state :selected').text()
    var stateCode = $('#marquee_form').find('#select_state :selected').val()
    if (ra.utils.readCookie('time_spent_1min') == null || ra.utils.readCookie('time_spent_1min') == '') {
        var time_spent_1min_cookie = 0;
    } else {
        var time_spent_1min_cookie = ra.utils.readCookie('time_spent_1min');
    }

    if (ra.utils.readCookie('total_time_spent') == null || ra.utils.readCookie('total_time_spent') == '') {
        var total_time_spent_cookie = 0;
    } else {
        var total_time_spent_cookie = ra.utils.readCookie('total_time_spent');
    }

    if (ra.utils.readCookie('configurator') == null || ra.utils.readCookie('configurator') == '') {
        var configurator_cookie = 0;
    } else {
        var configurator_cookie = ra.utils.readCookie('configurator');
    }

    if (ra.utils.readCookie('pll_forms') == null || ra.utils.readCookie('pll_forms') == '') {
        var pll_forms_cookie = 0;
    } else {
        var pll_forms_cookie = ra.utils.readCookie('pll_forms');
    }

    if (ra.utils.readCookie('pll_forms_name') == null || ra.utils.readCookie('pll_forms_name') == '') {
        var pll_forms_name_cookie = '';
    } else {
        var pll_forms_name_cookie = ra.utils.readCookie('pll_forms_name');
    }

    if (ra.utils.readCookie('btd_form') == null || ra.utils.readCookie('btd_form') == '') {
        var btd_form_cookie = 0;
    } else {
        var btd_form_cookie = ra.utils.readCookie('btd_form');
    }

    if (ra.utils.readCookie('brochure_download') == null || ra.utils.readCookie('brochure_download') == '') {
        var brochure_download_cookie = 0;
    } else {
        var brochure_download_cookie = ra.utils.readCookie('brochure_download');
    }

    if (ra.utils.readCookie('smart_finance') == null || ra.utils.readCookie('smart_finance') == '') {
        var smart_finance_cookie = 0;
    } else {
        var smart_finance_cookie = ra.utils.readCookie('smart_finance');
    }

    if (ra.utils.readCookie('e_book') == null || ra.utils.readCookie('e_book') == '') {
        var e_book_cookie = 0;
    } else {
        var e_book_cookie = ra.utils.readCookie('e_book');
    }

    if (ra.utils.readCookie('subscribe_view') == null || ra.utils.readCookie('subscribe_view') == '') {
        var subscribe_view_cookie = 0;
    } else {
        var subscribe_view_cookie = ra.utils.readCookie('subscribe_view');
    }

    if (ra.utils.readCookie('accessories_view') == null || ra.utils.readCookie('accessories_view') == '') {
        var accessories_view_cookie = 0;
    } else {
        var accessories_view_cookie = ra.utils.readCookie('accessories_view');
    }

    if (ra.utils.readCookie('total_point') == null || ra.utils.readCookie('total_point') == '') {
        var total_point_cookie = 0;
    } else {
        var total_point_cookie = ra.utils.readCookie('total_point');
    }

    var dataArray=[
        {
            'id':ra.utils.marquee_event_touch_id.TIME_SPENT,
            'name':'total_time_spent',
            'point':parseInt(total_time_spent_cookie),
            'other_info':''
        },
        {
            'id':ra.utils.marquee_event_touch_id.CONFIGURATOR,
            'name':'configurator',
            'point':parseInt(configurator_cookie),
            'other_info':''
        },
        {
            'id':ra.utils.marquee_event_touch_id.PLL_FORM,
            'name':'pll_forms',
            'point':parseInt(pll_forms_cookie),
            'other_info':pll_forms_name_cookie
        },
        {
            'id':ra.utils.marquee_event_touch_id.BROCHURE_DOWNLOAD,
            'name':'brochure_download',
            'point':parseInt(brochure_download_cookie),
            'other_info':''
        },
        {
            'id':ra.utils.marquee_event_touch_id.SMART_FINANCE,
            'name':'smart_finance',
            'point':parseInt(smart_finance_cookie),
            'other_info':''
        },
        {
            'id':ra.utils.marquee_event_touch_id.E_BOOK,
            'name':'e_book',
            'point':parseInt(e_book_cookie),
            'other_info':''
        },
        {
            'id':ra.utils.marquee_event_touch_id.SUBSCRIBE_VIEW,
            'name':'subscribe_view',
            'point':parseInt(subscribe_view_cookie),
            'other_info':''
        },
        {
            'id':ra.utils.marquee_event_touch_id.ACCESSORIES_VIEW,
            'name':'accessories_view',
            'point':parseInt(accessories_view_cookie),
            'other_info':''
        },
        {
            'id':ra.utils.marquee_event_touch_id.BTD_FORM,
            'name':'btd_form',
            'point':parseInt(btd_form_cookie),
            'other_info':''
        }
    ]
    // 'total_time_spent': parseInt(total_time_spent_cookie),
        // 'configurator': parseInt(configurator_cookie),
        // 'pll_forms': parseInt(pll_forms_cookie),
        // 'pll_forms_name': pll_forms_name_cookie,
        // 'btd_form': btd_form_cookie,

        // 'brochure_download': parseInt(brochure_download_cookie),
        // 'smart_finance': parseInt(smart_finance_cookie),
        // 'e_book': parseInt(e_book_cookie),
        // 'subscribe_view': parseInt(subscribe_view_cookie),
        // 'accessories_view': parseInt(accessories_view_cookie),
    var data = {
        'name': name,
        'email': email,
        'mobile': mobile,
        'cityName': cityName,
        'cityCode': cityCode,
        'stateName': stateName,
        'stateCode': stateCode,
        'marquee_data':dataArray,
        'total_point': parseInt(total_point_cookie),
    }

    var req = JSON.stringify(data);
    $.ajax({
        'async': true,
        'url': getApiURL.sendMarqueeData,
        'method': 'POST',
        'mimeType': 'multipart/form-data',
        'contentType': 'application/json; charset=utf-8',
        'data': req,
        success: function (response) {
            var res = JSON.parse(response);
            // var res = response;
            if (res.code === 1 || res.code ===3) {
                // thankyou page redirect
                //location.reload()

                tdSubmit({
                    'Name': convertAES(name),
                    'Email': convertSHA(email),
                    'Mobile': convertSHA(mobile),
                    'State': stateName,
                    'City': cityName,
                    'name_plain': name,
                    'email_plain': email,
                    'mobile_plain': mobile,
                    'Earned_Points': parseInt(total_point_cookie),
                    'form_channel_id': 'sales_marquee_nexa',
                }, 'sales_marquee_nexa');

                tdSubmit({
                    'eventCategory': 'Sales Marquee My Score Form Submit',
                    'event': 'Sales Marquee My Score Form Submit',
                    'eventAction': 'Submit',
                    'eventLabel': 'Submit',
                }, 'event_nexa');

                var user_idEncode = window.btoa(res.user_id);
                window.location.href = '/explore-to-earn/thankyou?id=' + user_idEncode;
            } else if (res.code === 2) {
                // already redeem
                // alert(res.message);
                $('.automania-redeem-message').css('display', 'block')
                $('.automania-redeem-message').empty().html(res.message);
            } else if (res.code === 0 && jQuery.isEmptyObject(res.errormsg)) {
                alert(res.message);
            } else {
                if (res.errormsg.name != undefined) {
                    $('#name-error-server').empty()
                    $('#name-error-server').append(res.errormsg.name)
                    $('#name-error-server').css('display', 'block')
                }

                if (res.errormsg.mobile != undefined) {
                    $('#mobile-error-server').empty()
                    $('#mobile-error-server').append(res.errormsg.mobile)
                    $('#mobile-error-server').css('display', 'block')
                }

                if (res.errormsg.email != undefined) {
                    $('#email-error-server').empty()
                    $('#email-error-server').append(res.errormsg.email)
                    $('#email-error-server').css('display', 'block')
                }

            }

        },
        fail: function (response) {
            reject(response);
        }
    });
}

//   btdPopupOtpTimer()
function btdPopupOtpTimer() {
    var timer2 = '1:30';
    var interval = setInterval(function () {

        var timer = timer2.split(':');
        //by parsing integer, I avoid all extra string processing
        var minutes = parseInt(timer[0], 10);
        var seconds = parseInt(timer[1], 10);
        --seconds;
        minutes = (seconds < 0) ? --minutes : minutes;
        if (minutes < 0) clearInterval(interval);
        seconds = (seconds < 0) ? 59 : seconds;
        seconds = (seconds < 10) ? '0' + seconds : seconds;
        //minutes = (minutes < 10) ?  minutes : minutes;
        $('#marqueeCount').html(minutes + ':' + seconds);
        timer2 = minutes + ':' + seconds;
        if (minutes == '0' && seconds == '00') {
            clearInterval(interval);
            $('#marqueeCount').html('');
            $('#marqueeCount').hide();
            $('.counter').hide();
            // $('.btd-send-otp').hide();
            $('.resend0').show();
        }
    }, 1000);

}


if($('#marquee_form').length>0){
    getStateData();
}
function getStateData(){
    $.ajax({
        type: 'POST',
        url: getApiURL.getStateList,
        cache: false,
        async: 'true',
        success: function (response) {
            $.each(response, function (index, res) {
                var stateOption = '<option value="'+res.Value+'">'+res.Text+'</option>';
                $('#select_state').append(stateOption);
            })
        },
        fail: function (response) {
            reject(response);
        }
    });
}

$(document).on('change', '#select_city', function () {
    tdSubmit(
      {
        eventCategory: 'Sales Marquee My Score Form Details',
        eventAction: 'click',
        eventLabel: 'Select City',
      },
      'event_nexa'
    );
  })

$(document).on('change', '#select_state', function () {
    var State = $('#select_state').val();
    $.ajax({
        type: 'POST',
        url: getApiURL.getCityList,
        data: {
            'State': State
          },
        cache: false,
        async: 'true',
        success: function (response) {
            var stateOptionTitle = '<option value="">City</option>';
            $('#select_city').empty().append(stateOptionTitle);
            $.each(response, function (index, res) {
                var stateOption = '<option value="'+res.Value+'">'+res.Text+'</option>';
                $('#select_city').append(stateOption);
            })
        },
        fail: function (response) {
            reject(response);
        }
    });

    tdSubmit(
        {
          eventCategory: 'Sales Marquee My Score Form Details',
          eventAction: 'click',
          eventLabel: 'Select State',
        },
        'event_nexa'
      );

  });

  var my_score_mobile_form = $('#my_score_mobile_form').validate({
    rules: {
        my_score_mobile: {
            required: true,
            minlength: 10,
            maxlength: 10,
            digits: true,
            mobile_regex: /^[^0-5]\d{9}$/,
            number: true,
            alphanumeric: false
        },
        my_score_otp: {
            required: true,
            number: true,
            minlength: 4,
            maxlength: 4
        }

    },
    messages: {
        my_score_mobile: {
            required: 'Mobile is required field',
            minlength: 'Length should be 10 digits',
            maxlength: 'Length should be 10 digits',
            name_regex: 'No special characters allowed',
            mobile_regex: 'Invalid Mobile No.',
            alphanumeric: 'Invalid Mobile No.',
        },
        my_score_otp: {
            required: 'OTP is required field',
            alphanumeric: 'Invalid Mobile No.',
        },
    },

    errorElement: 'em',
    errorPlacement: function (error, element) {
        // Add the `invalid-feedback` class to the error element
        error.addClass('invalid-feedback');
        if (element.prop('type') === 'checkbox') {
            error.insertAfter(element.next('label'));
        } else {
            error.insertAfter(element);
        }
    },
    highlight: function (element, errorClass, validClass) {
        $(element).addClass('is-invalid').removeClass('is-valid');
    },
    unhighlight: function (element, errorClass, validClass) {
        $(element).addClass('is-valid').removeClass('is-invalid');
    },
    submitHandler: function (form) {
        form.submit();
    }
});
  

$('#my_score_mobile').on('change keyup', function () {
    if ($('#my_score_mobile').val() && ($('#my_score_mobile').val().length==10)) {
        $(document).find($('#myScoreOtpButton')).show();
        tdSubmit({
            'eventCategory': 'Sales Marquee Check My Score Form Details',
            'eventAction': 'click',
            // 'eventLabel': $('#my_score_mobile').val(),
            'eventLabel': 'Enter Mobile',
        }, 'event_nexa');
    }
});

$(document).on('click', '#myScoreOtpButton', function () {
        $('#my_score_mobile-error-server').empty()
        var mobile = $('#my_score_mobile_form').find('#my_score_mobile').val()
        if (mobile && (mobile.length == 10)) {
            //   $(this).hide();
            $.ajax({
                type: 'POST',
                url: getApiURL.SendOTP,
                data: {
                    Mobile: mobile
                },
                cache: false,
                async: 'true',
                success: function (response) {
                    if (response.IsSuccess == true) {
                        $('#myScoreOtpButton').hide();
                        $('.counter_my_score').show();
                        $('#myScoreCount').show();
                        $('.resendmyScore0').hide();
                        $('.resendotp').show();
                        btdPopupMyScoreOtpTimer();
                    }
                }
            });
            tdSubmit({
                'eventCategory': 'Sales Marquee Check My Score Send OTP',
                'eventAction': 'click',
                'eventLabel': 'Send OTP',
            }, 'event_nexa');
        } else {
            console.log('err')
            // btdMobile.attr('data-error')
        }
    
});

function btdPopupMyScoreOtpTimer() {
    var timer2 = '1:30';
    var interval = setInterval(function () {

        var timer = timer2.split(':');
        //by parsing integer, I avoid all extra string processing
        var minutes = parseInt(timer[0], 10);
        var seconds = parseInt(timer[1], 10);
        --seconds;
        minutes = (seconds < 0) ? --minutes : minutes;
        if (minutes < 0) clearInterval(interval);
        seconds = (seconds < 0) ? 59 : seconds;
        seconds = (seconds < 10) ? '0' + seconds : seconds;
        //minutes = (minutes < 10) ?  minutes : minutes;
        $('#myScoreCount').html(minutes + ':' + seconds);
        timer2 = minutes + ':' + seconds;
        if (minutes == '0' && seconds == '00') {
            clearInterval(interval);
            $('#myScoreCount').html('');
            $('#myScoreCount').hide();
            $('.counter_my_score').hide();
            // $('.btd-send-otp').hide();
            $('.resendmyScore0').show();
            $('#myScoreOtpButton').hide();
            $('.resendotp').hide();
        }
    }, 1000);

}
// var myModal_my_score_otp = $('#myModal_my_score_otp').validate({
//     rules: {
//         my_score_otp: {
//             required: true,
//             number: true,
//             minlength: 4,
//             maxlength: 4
//         }

//     },
//     messages: {
//         my_score_otp: {
//             required: 'OTP is required field',
//         },
//     },
//     errorElement: 'em',
//     errorPlacement: function (error, element) {
//         // Add the `invalid-feedback` class to the error element
//         error.addClass('invalid-feedback');
//         if (element.prop('type') === 'checkbox') {
//             error.insertAfter(element.next('label'));
//         } else {
//             error.insertAfter(element);
//         }
//     },
//     highlight: function (element, errorClass, validClass) {
//         $(element).addClass('is-invalid').removeClass('is-valid');
//     },
//     unhighlight: function (element, errorClass, validClass) {
//         $(element).addClass('is-valid').removeClass('is-invalid');
//     },
//     submitHandler: function (form) {
//         form.submit();
//     }
// });


$('#myScoreSubmitForm').on('click', function () {
    $('.my_score_otperror').css('display', 'none')
    if (my_score_mobile_form.form()) {
        tdSubmit({
            'eventCategory': 'Sales Marquee Check My Score Form Submit',
            'eventAction': 'Submit',
            'eventLabel': 'Submit',
        }, 'event_nexa');
        
        var mobile = $('#my_score_mobile').val();
        var otp = $('#my_score_otp').val();
        var data = {
            'Mobile': mobile,
            'Otp': otp
        }
        var req = JSON.stringify(data);
        $.ajax({
            type: 'POST',
            url: getApiURL.formVerifyOTP,
            data: data,
            cache: false,
            async: 'true',
            success: function (response) {
                //console.log('response', response)
                if (response.IsSuccess == true) {
                    tdSubmit({
                        'form_channel_id': 'sales_marquee_nexa',
                        'Mobile': convertSHA(mobile),
                        'mobile_plain': mobile,
                      }, 'sales_marquee_nexa');

                    CheckMyScore(mobile);
                // var mobileEncode = window.btoa(mobile);
                // window.location.href = '/explore-to-earn/score?mobile=' + mobileEncode;
                }
                else if (response.IsSuccess == false) {
                    $('.my_score_otperror').css('display', 'block')
                }
            }
        });
    }
})

function CheckMyScore(mobile)
{
    var data = {
            'mobile': mobile,
        }
        var req = JSON.stringify(data);

    $.ajax({
            type: 'POST',
            url: getApiURL.getMyScore,
            data: data,
            cache: false,
            async: 'true',
            success: function (response) {
                if (response.code === 1) {
                var mobileEncode = window.btoa(mobile);
                window.location.href = '/explore-to-earn/score?mobile=' + mobileEncode;
                }
                else if(response.code === 2) //  no data found 
                {
                    $('#my_score_mobile_form').find('.noscoredata').empty().append('<h4 style="margin: 0;">You have not saved your points yet. Save them to check your score.</h4>');
                    
                }else
                {
                    console.log(response.message);
                }
                
            }
        });
}

$('.resendmyScore0').on('click', function () {
    $(this).hide();
    // var mobile = $('#myModal_my_score_form').find('#my_score_mobile').val()
    var mobile = $('#my_score_mobile_form').find('#my_score_mobile').val();
    $.ajax({
        type: 'POST',
        url: getApiURL.SendOTP,
        data: {
            Mobile: mobile
        },
        cache: false,
        async: 'true',
        success: function (response) {
            console.log('response', response)

            if (response.IsSuccess == true) {
                
                $('.counter_my_score').show();
                $('#myScoreCount').show();
                btdPopupMyScoreOtpTimer();
                        
            }
        }
    });
    tdSubmit({
        'eventCategory': 'Sales Marquee Check My Score Resend OTP',
        'eventAction': 'click',
        'eventLabel': 'Resend OTP',
    }, 'event_nexa');
});



//Common file
var carModelList = ['SS', 'CI', 'RS', 'BY', 'IG'];

// Listen for orientation changes
window.addEventListener('orientationchange', function () {
    // Announce the new orientation number
    var currentUrl = window.location.pathname;
    if (currentUrl != '/nexa-finance/nexafinance-loan-application' && currentUrl != '/nexa-finance/nexafinance-price-summary' && currentUrl != '/nexa-finance/nexafinance-personal-details' && currentUrl != '/nexa-finance/nexafinance-loan-offers' && currentUrl != '/nexa-finance/nexafinance-approval-status' && currentUrl != '/nexa-finance/nexafinance-loan-payment' && currentUrl != '/nexa-finance/nexafinance-loan-confirmation' && currentUrl != '/maruti-suzuki-car-finance') {
        location.reload();
    }
}, false);


$('#datepicker').datepicker({
    minDate: 0
});
var d = new Date();
var bdate = d.getUTCDate() - 6;
var bmonth = d.getUTCMonth() + 1;
var byear = d.getUTCFullYear();
var dateStr = byear + '-' + bmonth + '-' + bdate;
$('.onlineBookingdatepickerfrom').datepicker({
    dateFormat: 'yy-mm-dd',
    changeMonth: true,
    changeYear: true
}).datepicker('setDate', new Date(-5));
$('.onlineBookingdatepickerto').datepicker({
    dateFormat: 'yy-mm-dd',
    changeMonth: true,
    changeYear: true
}).datepicker('setDate', new Date());

$('#Otp').keydown(function (event) {
    $('.btdotperror').hide();
});

$('.widgetclose').click(function () {
    document.cookie = 'widgetmessage' + '=true';
    $('.topwidget').hide();
});

var interval;
var OtpTimer = function () {
    var count = 90;
    clearInterval(interval);
    interval = setInterval(function () {
        $('#count').html(count);
        count--;
        if (count === 0) {
            clearInterval(interval);
            $('#count').html('');
            $('#counter').css('display', 'none');
            $('.resend0').css('pointer-events', 'inherit');
            $('.resend0').css('color', 'red');
        }
    }, 1000);
};

window.recaptchaCallback = function (response) {
    $('#hiddenRecaptcha').val(response).trigger('change');
    $('#hiddenRecaptcha-error').text('');
}

function SetActiveDotOnLoad() {
    //var activeDot = getCookie('HighlightDot');
    var localStorageKey = 'HighlightDot_' + $('#HdnCarModelName').val();
    
    var activeDot = localStorage.getItem(localStorageKey)
    if (activeDot) {
        var currentDot = $('*[data-id="' + activeDot + '"]');
        if (currentDot.length > 0) {
            $(currentDot).trigger('click');
        }
    
 }
}
function CDPFunction(event,eventCategory,eventAction,eventLabel){
    tdSubmit({
        'event': event,
        'eventCategory': eventCategory,
        'eventAction': eventAction,
        'eventLabel': eventLabel,
     }, 'event_nexa');
  }
function navigate(query) {
    if (query) {
        window.location.href = '/SearchResult?query=' + query;
    }
}

function HideCityHeader() {
    $('.city_selection_header').hide();
}

function ShowCityHeader() {
    $('.city_selection_header').show();
}

function Cityonlocator() {
    if ($('#ifrm').length > 0) {
        var url = $('#ifrurl').val();
        if (url) {
            var selectedCityName = ($('#mycity').find('option:selected').text()) ? $('#mycity').find('option:selected').text() : 'GURUGRAM';
            var location = localStorage.getItem('latlong');
            if (location) {
                location = JSON.parse(location);
            } else {
                location = {
                    lat: '28.5677061',
                    long: '77.2409407'
                };
            }
            url = url + '&city=' + selectedCityName + '&lat=' + location.lat + '&long=' + location.long;
            document.getElementById('ifrm').src = url;
        }
    }
}

function getPriceThroughAPI() {
    //Code for dynamic car Model Codes:
    var carModelList = $('#HdnCarModelCodeList').val();
    if (!carModelList) {
        return;
    }

    carModelList = carModelList.split(',');

    //Code for dynamic car id Codes:
    var caridList = $('#HdnCarIdList').val();
    if (!caridList) {
        return;
    }

    caridList = caridList.split(',');

    var CityCode;
    if (!$('.city_search_list').find('option:selected').val()) {
        CityCode = '95';
        $('.city_search_list').selectpicker('destroy');
        $('.city_search_list').val('95');
        $('.city_search_list').selectpicker();

    } else {
        CityCode = $('.city_search_list').find('option:selected').val();
    }
    var url = '/api/sitecore/API/GetCarOnwardsPrice/';
    var carCityModelDetailsList = [];
    for (var i = 0; i < carModelList.length; i++) {
        carCityModelDetailsList.push({
            CarModelCode: carModelList[i],
            CarId: caridList[i],
            CityCode: CityCode
        });
    }

    carCityModelDetailsList = JSON.stringify({
        'carCityModelDetailsList': carCityModelDetailsList
    });

    $.ajax({
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        url: url,
        data: carCityModelDetailsList,
        cache: false,
        type: 'POST',
        success: function (data) {
            if (data.length) {
                //outputData = data;
                for (var i = 0; i < data.length; i++) {
                    $('.car-price-' + data[i].CarModelCode).html(toCommaSepratedPrice(data[i].Price));
                }

            } else {
                for (var i = 0; i < carModelList.length; i++) {
                    $('.car-price-' + carModelList[i]).html('N/A');
                }
            }
        },
        error: function (response) { }
    });
}

function getPriceDetails(thisObj, currentCarModelCode) {
    var cityCode = '08';
    var currentcity = JSON.parse(localStorage.getItem('city'));
    if (!currentcity) {
        var psn_city_code = $('#mobile_city_header').attr('data-city-code');
        if (psn_city_code) {
            cityCode = psn_city_code;
        }
    } else {
        cityCode = currentcity.city_code;
    }

    var selectedCityCode = cityCode;
    //var defaultCityCodeCookie = '95';
    // var defaultCityCodeCookie = (getCookie('defaultCityCodeCookie') != null && getCookie('defaultCityCodeCookie') != String.Empty) ?
    //     getCookie('defaultCityCodeCookie') : '95';
    //if ($('.city_search_list').find('option:selected').val() == null || $('.city_search_list').find('option:selected').val() == '') {
    //    selectedCityCode = defaultCityCodeCookie;
    //} else {
    //    selectedCityCode = $('.city_search_list').find('option:selected').val();
    //}
    var carCityModelDetails = {
        CarModelCode: currentCarModelCode,
        CityCode: selectedCityCode
    }
    carCityModelDetails = JSON.stringify({
        'carCityModelDetails': carCityModelDetails
    });
    if (currentCarModelCode && selectedCityCode) {
        $.ajax({
            type: 'POST',
            url: '/api/sitecore/API/GetCarPrice',
            data: carCityModelDetails,
            contentType: 'application/json; charset=utf-8',
            datatype: 'json',
            async: 'true',
            success: function (response) {
                response = jQuery.parseJSON(response);
                var Price = '';
                if (response != null && response.items != null) {
                    for (var i = 0; i < response.items.length; i++) {
                        if (thisObj.val().toUpperCase() === response.items[i].MODL_CODE.toUpperCase()) {
                            Price = (response.items[i]['METALLIC PRICE'] != null) ? response.items[i]['METALLIC PRICE'] : response.items[i]['NON-METALLIC PRICE'];
                            break;
                        }
                    }
                }
                if (Price != null || Price != '') {
                    //var commaSeperatedPrice = toCommaSepratedPrice(Price);
                    thisObj.closest('.cardetailbox').find('.carPrice').html('&#x20B9;' + toCommaSepratedPrice(Price) + '<span>ex-showroom</span>');
                } else {
                    thisObj.closest('.cardetailbox').find('.carPrice').html('&#x20B9; N/A <span>ex-showroom</span>');
                }
            },
            error: function (response) { }
        });
    }

}

var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
};

function setCookie(cname, cvalue) {
    var d = new Date();
    d.setTime(d.getTime() + (0.5 * 24 * 60 * 60 * 1000));
    var expires = 'expires=' + d.toUTCString();
    document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/;secure';
}

function deleteCookie(cname) {
    var d = new Date('01 Jan 1970 00:00:00');
    d.setTime(d.getTime() + (0.5 * 24 * 60 * 60 * 1000));
    var expires = 'expires=' + d.toUTCString();
    document.cookie = cname + '=;' + expires + ';path=/;secure';
}

function getCookie(cname) {
    var name = cname + '=';
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return '';
}

function addCookie(name, value, days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000); // ) removed
        var expires = '; expires=' + date.toGMTString(); // + added
    }
    else
        var expires = '';
    document.cookie = name + '=' + value + expires + ';path=/'; // + and ' added
}

//get data from local storage
function getDataFromLocal(key) {
    return JSON.parse(localStorage.getItem(key));
}

//set data in local storage
function setDataInLocal(key, value) {
    localStorage.setItem(key, value);
}

//set data in local storage
function removeDataInLocal(key) {
    localStorage.removeItem(key);
}

function toCommaSepratedPrice(price) {
    price = Math.round(price);
    var str = price.toString();
    var lastThree = str.substring(str.length - 3);
    var otherNumbers = str.substring(0, str.length - 3);
    if (otherNumbers != '')
        lastThree = ' ' + lastThree;
    str = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ' ') + lastThree;
    if (str == 0) {
        var CarModelType = $('#HdnCarModelId').val();
        if(CarModelType==2){
            str = 'STAY TUNED FOR THE PRICE';
        }else{
            str = 'N/A';
        }

    }
    return str;
}

function fileSize(file) {
    var filesize = (file) / 1024 / 1024;
    if (filesize < 5) {
        return true;
    } else {
        return false;
    }
}

function fileFormat(filename) {
    if (/\.(jpe?g|pdf|docx)$/i.test(filename) === false) {
        return false;
    } else {
        return true;
    }

}

function todayDate() {
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth() + 1; //January is 0!
    var yyyy = today.getFullYear();
    if (dd < 10) {
        dd = '0' + dd
    }
    if (mm < 10) {
        mm = '0' + mm
    }

    today = yyyy + '-' + mm + '-' + dd;
    return today;
}


var priceListForSelectedCity;


function getPriceDetailsOnMobile() {
    //var cityCode = ($('.city_search_list').find('option:selected').val()) ? $('.city_search_list').find('option:selected').val() : '08';

    var cityCode = '08';
    var currentcity = JSON.parse(localStorage.getItem('city'));
    if (!currentcity) {
        var psn_city_code = $('#mobile_city_header').attr('data-city-code');
        if (psn_city_code) {
            cityCode = psn_city_code;
        }
    } else {
        cityCode = currentcity.city_code;
    }

    if ($('#HdnCarModelCode').val() && cityCode) {
        var carCityModelDetails = {
            CarModelCode: $('#HdnCarModelCode').val(),
            CityCode: cityCode
        }
        carCityModelDetails = JSON.stringify({
            'carCityModelDetails': carCityModelDetails
        });
        $.ajax({
            type: 'POST',
            url: '/api/sitecore/API/GetCarPrice',
            data: carCityModelDetails,
            contentType: 'application/json; charset=utf-8',
            datatype: 'json',
            async: 'true',
            success: function (response) {
                response = jQuery.parseJSON(response);
                var Price = '';
                var i;
                priceListForSelectedCity = response.items;
                if (response != null && priceListForSelectedCity != null) {
                    priceListForSelectedCity.sort(function (a, b) {
                        return a['METALLIC PRICE'] - b['METALLIC PRICE']
                    });
                    if (priceListForSelectedCity.length) {
                        var ddlItem = '';
                        // if (ra.cfg.isMobile) {
                        //     ddlItem = $('#exampleFormControlSelect3 option');
                        //     $('#exampleFormControlSelect3').empty();
                        // } else {
                        //     ddlItem = $('#exampleFormControlSelect2 option');
                        //     $('#exampleFormControlSelect2').empty();
                        // }

                        if (window.matchMedia('only screen and (min-width: 992px)').matches) {
                            ddlItem = $('#exampleFormControlSelect2 option');
                            $('#exampleFormControlSelect2').empty();
                        }
                        if (window.matchMedia('only screen and (max-width: 991px)').matches) {
                            ddlItem = $('#exampleFormControlSelect3 option');
                            $('#exampleFormControlSelect3').empty();
                        }

                        for (var i = 0; i < priceListForSelectedCity.length; i++) {
                            var option = $('<option></option>');
                            option.attr('value', priceListForSelectedCity[i]['MODL_CODE']);
                            option.text(priceListForSelectedCity[i]['MODL_DESC']);

                            ddlItem.each(function () {
                                if (this.value == priceListForSelectedCity[i]['MODL_CODE']) {
                                    // if (ra.cfg.isMobile) {
                                    //     $('#exampleFormControlSelect3').append(option);
                                    // } else {
                                    //     $('#exampleFormControlSelect2').append(option);
                                    // }

                                    if (window.matchMedia('only screen and (min-width: 992px)').matches) {
                                        $('#exampleFormControlSelect2').append(option);
                                    }
                                    if (window.matchMedia('only screen and (max-width: 991px)').matches) {
                                        $('#exampleFormControlSelect3').append(option);
                                    }


                                }

                            });

                        }

                        var getCookiesval = getCookie('ActiveVariantCity');

                        if (getCookiesval) {
                            getCookiesval = getCookiesval.split('+');
                            // if (ra.cfg.isMobile) {
                            //     $('#exampleFormControlSelect3 option').each(function () {
                            //         if (this.value == getCookiesval[1]) {
                            //             // make 1 st option of variant drowp down as  Selected
                            //             $('#exampleFormControlSelect3').val(getCookiesval[1]);
                            //         }

                            //     });
                            // } else {
                            //     $('#exampleFormControlSelect2 option').each(function () {
                            //         if (this.value == getCookiesval[1]) {
                            //             // make 1 st option of variant drowp down as  Selected
                            //             $('#exampleFormControlSelect2').val(getCookiesval[1]);
                            //         }

                            //     });
                            // }
                            if (window.matchMedia('only screen and (min-width: 992px)').matches) {
                                $('#exampleFormControlSelect2 option').each(function () {
                                    if (this.value == getCookiesval[1]) {
                                        // make 1 st option of variant drowp down as  Selected
                                        $('#exampleFormControlSelect2').val(getCookiesval[1]);
                                    }

                                });
                            }
                            if (window.matchMedia('only screen and (max-width: 991px)').matches) {
                                $('#exampleFormControlSelect3 option').each(function () {
                                    if (this.value == getCookiesval[1]) {
                                        // make 1 st option of variant drowp down as  Selected
                                        $('#exampleFormControlSelect3').val(getCookiesval[1]);
                                    }

                                });
                            }


                        } else {
                            // if (ra.cfg.isMobile) {
                            //     // make 1 st option of variant drowp down as  Selected
                            //     $('#exampleFormControlSelect3').prop('selectedIndex', 0);
                            // } else {
                            //     // make 1 st option of variant drowp down as  Selected
                            //     $('#exampleFormControlSelect2').prop('selectedIndex', 0);
                            // }

                            if (window.matchMedia('only screen and (min-width: 992px)').matches) {
                                $('#exampleFormControlSelect2').prop('selectedIndex', 0);
                            }
                            if (window.matchMedia('only screen and (max-width: 991px)').matches) {
                                $('#exampleFormControlSelect3').prop('selectedIndex', 0);
                            }

                        }

                        for (i = 0; i < priceListForSelectedCity.length; i++) {
                            // if (!ra.cfg.isMobile && $('#exampleFormControlSelect2').val() === priceListForSelectedCity[i].MODL_CODE) {
                            //     Price = (priceListForSelectedCity[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity[i]['METALLIC PRICE'] : priceListForSelectedCity[i]['NON-METALLIC PRICE'];
                            //     break;
                            // }
                            // if (ra.cfg.isMobile && $('#exampleFormControlSelect3').val() === priceListForSelectedCity[i].MODL_CODE) {
                            //     Price = (priceListForSelectedCity[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity[i]['METALLIC PRICE'] : priceListForSelectedCity[i]['NON-METALLIC PRICE'];
                            //     break;
                            // }
                            if (window.matchMedia('only screen and (min-width: 992px)').matches) {

                                if ($('#exampleFormControlSelect2').val() && $('#exampleFormControlSelect2').val().toUpperCase() === priceListForSelectedCity[i].MODL_CODE.toUpperCase()) {
                                    Price = (priceListForSelectedCity[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity[i]['METALLIC PRICE'] : priceListForSelectedCity['NON-METALLIC PRICE'];
                                    break;
                                }
                            }
                            if (window.matchMedia('only screen and (max-width: 991px)').matches) {
                                if ($('#exampleFormControlSelect3').val() && $('#exampleFormControlSelect3').val().toUpperCase() === priceListForSelectedCity[i].MODL_CODE.toUpperCase()) {
                                    Price = (priceListForSelectedCity[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity[i]['METALLIC PRICE'] : priceListForSelectedCity[i]['NON-METALLIC PRICE'];
                                    break;
                                }
                            }



                        }
                        if (Price != null) {
                            var commaSeperatedPrice = toCommaSepratedPrice(Price);

                            var CarModelType = $('#HdnCarModelId').val();
                            if(CarModelType==2){
                                if(commaSeperatedPrice!='STAY TUNED FOR THE PRICE'){
                                    $('.price').html('<i class="fa fa-rupee-sign"></i> ' + commaSeperatedPrice);
                                }else{
                                    $('.price').html(commaSeperatedPrice);
                                }

                            }else{
                                $('.price').html('<i class="fa fa-rupee-sign"></i> ' + commaSeperatedPrice);
                            }
                        }
                    } else {
                        // // make 1 st option of variant drowp down as  Selected
                        // if (ra.cfg.isMobile) {
                        //     // make 1 st option of variant drowp down as  Selected
                        //     $('#exampleFormControlSelect3').prop('selectedIndex', 0);
                        // } else {
                        //     // make 1 st option of variant drowp down as  Selected
                        //     $('#exampleFormControlSelect2').prop('selectedIndex', 0);
                        // }
                        if (window.matchMedia('only screen and (min-width: 992px)').matches) {
                            $('#exampleFormControlSelect2').prop('selectedIndex', 0);
                        }
                        if (window.matchMedia('only screen and (max-width: 991px)').matches) {
                            $('#exampleFormControlSelect3').prop('selectedIndex', 0);
                        }

                        Price = '';
                        var CarModelType = $('#HdnCarModelId').val();
                        if(CarModelType==2){
                            if(toCommaSepratedPrice(Price)!='STAY TUNED FOR THE PRICE'){
                                $('.price').html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));
                            }else{
                                $('.price').html(toCommaSepratedPrice(Price));
                            }
                        }else{
                            $('.price').html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));
                        }

                    }
                }
            },
            error: function (response) { }
        });
    }

}


function SetVariantPriceonMobile() {
    var i;
    var Price = '';
    for (i = 0; i < priceListForSelectedCity.length; i++) {

        if (window.matchMedia('only screen and (min-width: 992px)').matches) {

            if ($('#exampleFormControlSelect2').val() && $('#exampleFormControlSelect2').val().toUpperCase() === priceListForSelectedCity[i].MODL_CODE.toUpperCase()) {
                Price = (priceListForSelectedCity[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity[i]['METALLIC PRICE'] : priceListForSelectedCity['NON-METALLIC PRICE'];
                break;
            }
        }
        if (window.matchMedia('only screen and (max-width: 991px)').matches) {
            if ($('#exampleFormControlSelect3').val() && $('#exampleFormControlSelect3').val().toUpperCase() === priceListForSelectedCity[i].MODL_CODE.toUpperCase()) {
                Price = (priceListForSelectedCity[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity[i]['METALLIC PRICE'] : priceListForSelectedCity[i]['NON-METALLIC PRICE'];
                break;
            }
        }



    }
    if (Price != null) {
        // $('.price').html('<i class='fa fa-rupee-sign'></i> ' + toCommaSepratedPrice(Price));
        var CarModelType = $('#HdnCarModelId').val();
        if(CarModelType==2){
            if(toCommaSepratedPrice(Price)!='STAY TUNED FOR THE PRICE'){
                $('.price').html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));
            }else{
                $('.price').html(toCommaSepratedPrice(Price));
            }
        }else{
            $('.price').html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));
        }


    } else {

        Price = '';

        // $('.price').html('<i class='fa fa-rupee-sign'></i> ' + toCommaSepratedPrice(Price));

        var CarModelType = $('#HdnCarModelId').val();
        if(CarModelType==2){
            if(toCommaSepratedPrice(Price)!='STAY TUNED FOR THE PRICE'){
                $('.price').html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));
            }else{
                $('.price').html(toCommaSepratedPrice(Price));
            }
        }else{
            $('.price').html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));
        }

    }
}

$('#drpCarspoint').on('change', function () {
    var htmlP = '';
    var htmlO = '';
    var rowdata2 = PrepareRequest('/api/sitecore/CarPoint/GetMyPoint',
        JSON.stringify({
            card: $('#drpCars').val()
        }));
    var rowdata = PrepareRequest('/api/sitecore/CarPoint/GetTransactionHistoryDetail',
        JSON.stringify({
            card: $('#drpCars').val()
        }));

    $.ajax(rowdata).done(function (res) {
        if (res && res.length > 0) {
            $('.clspointhistory').html('');
            res.forEach(function (item) {
                htmlO += '<tr><td>';
                htmlO += item.TransactionDate + '</td>';
                htmlO += '<td>' + item.Transactiontype + '</td>';
                htmlO += '<td>' + item.transactionAmount + '</td> </tr>';
            });
            $('.clspointhistory').append(htmlO);
        } else {
            alert();
        }
    });
    $.ajax(rowdata2).done(function (res) {
        if (res && res.length > 0) {
            $('.clspoint').html('');
            res.forEach(function (item) {
                htmlP += '<tr><td>';
                htmlP += item.TotalNEXAPointsAwarded + '</td>';
                htmlP += '<td>' + item.TotalNEXAPointsRedeemed + '</td>';
                htmlP += '<td>' + item.TotalNEXAbalancePoints + '</td> </tr>';
                htmlP += '<tr><td>';
                htmlP += 'HDFC BANK REWARD POINTS BALANCE' + '</td>';
                htmlP += '<td>' + '</td>';
                htmlP += '<td>' + item.HDFCBalancePoints + '</td> </tr>';
                htmlP += '<tr><td>';
                htmlP += 'TOTAL BALANCE' + '</td>';
                htmlP += '<td>' + '</td>';
                htmlP += '<td>' + item.TotalBalancePoints + '</td> </tr>';
            });
            $('.clspoint').append(htmlP);
        } else {
            alert();
        }
    });
})

$.validator.addMethod(
    'validateDomainName',
    function (value, element) {
        var response;
        var res, res2, len;
        if (value) {
            res = value.split('@');
            res2 = res[1].split('.');
            len = res2[0].length;
            if (len < 2) {
                response = false
            } else {
                response = true
            }
        }
        return response;
    }
);

$.validator.addMethod(
    /* The value you can use inside the email object in the validator. */
    'email_regex',

    /* The function that tests a given string against a given regEx. */
    function (value, element, regexp) {
        /* Check if the value is truthy (avoid null.constructor) & if it's not a RegEx. */
        if (regexp && regexp.constructor != RegExp) {
            /* Create a new regular expression using the regex argument. */
            regexp = new RegExp(regexp);
        }

        /* Check whether the argument is global and, if so set its last index to 0. */
        else if (regexp.global) regexp.lastIndex = 0;

        /* Return whether the element is optional or the result of the validation. */
        return this.optional(element) || regexp.test(value);
    }
);

$.validator.addMethod(
    /* The value you can use inside the email object in the validator. */
    'name_regex',

    /* The function that tests a given string against a given regEx. */
    function (value, element, regexp) {
        /* Check if the value is truthy (avoid null.constructor) & if it's not a RegEx. */
        if (regexp && regexp.constructor != RegExp) {
            /* Create a new regular expression using the regex argument. */
            regexp = new RegExp(regexp);
        }

        /* Check whether the argument is global and, if so set its last index to 0. */
        else if (regexp.global) regexp.lastIndex = 0;

        /* Return whether the element is optional or the result of the validation. */
        return this.optional(element) || regexp.test(value);
    }
);

//Mobile validation method
$.validator.addMethod(
    /* The value you can use inside the email object in the validator. */
    'mobile_regex',

    /* The function that tests a given string against a given regEx. */
    function (value, element, regexp) {
        /* Check if the value is truthy (avoid null.constructor) & if it's not a RegEx. */
        if (regexp && regexp.constructor != RegExp) {
            /* Create a new regular expression using the regex argument. */
            regexp = new RegExp(regexp);
        }

        /* Check whether the argument is global and, if so set its last index to 0. */
        else if (regexp.global) regexp.lastIndex = 0;

        /* Return whether the element is optional or the result of the validation. */
        return this.optional(element) || regexp.test(value);
    }
);

$.validator.addMethod(
    /* The value you can use inside the email object in the validator. */
    'otp_regex',

    /* The function that tests a given string against a given regEx. */
    function (value, element, regexp) {
        /* Check if the value is truthy (avoid null.constructor) & if it's not a RegEx. */
        if (regexp && regexp.constructor != RegExp) {
            /* Create a new regular expression using the regex argument. */
            regexp = new RegExp(regexp);
        }

        /* Check whether the argument is global and, if so set its last index to 0. */
        else if (regexp.global) regexp.lastIndex = 0;

        /* Return whether the element is optional or the result of the validation. */
        return this.optional(element) || regexp.test(value);
    }
);

$.validator.addMethod(
    /* The value you can use inside the email object in the validator. */
    'dob_regex',

    /* The function that tests a given string against a given regEx. */
    function (value, element, regexp) {
        /* Check if the value is truthy (avoid null.constructor) & if it's not a RegEx. */
        if (regexp && regexp.constructor != RegExp) {
            /* Create a new regular expression using the regex argument. */
            regexp = new RegExp(regexp);
        }

        /* Check whether the argument is global and, if so set its last index to 0. */
        else if (regexp.global) regexp.lastIndex = 0;

        /* Return whether the element is optional or the result of the validation. */
        var curentyear = new Date().getFullYear() - 18
        var getyear = value.split('-');
        if (getyear[2] > curentyear) {
            return this.optional(element) || false;
        }
        return this.optional(element) || regexp.test(value);
    }
);

function toTitleCase(str) {
    var lcStr = str.toLowerCase();
    return lcStr.replace(/(?:^|\s)\w/g, function (match) {
        return match.toUpperCase();
    });
}

function isPwa() {
    if (navigator.standalone) {
        console.log('Launched: Installed (iOS)');
        return true;
    } else if (matchMedia('(display-mode: standalone)').matches) {
        console.log('Launched: Installed');
        return true;
    } else {
        console.log('Launched: Browser Tab');
        return false;
    }
}

function tdSubmit(values, table_name) {
    var td = new Treasure({
        host: 'in.treasuredata.com',
        writeKey: '10453/be37ccabb6c444301256c07406c8586de8b0b415',
        database:  'msil_src_prd', //$('#CDP_Database').val(),
        startInSignedMode: true
    });
    td.set('$global', 'td_global_id', 'td_global_id');
    td.trackPageview('pageview', googleSyncCallback);
    if (table_name == 'event_nexa') {
        if (isPwa()) {
            td.trackEvent('event_nexa_pwa', values);
        } else {
            td.trackEvent(table_name, values);
        }
    } else {
        td.trackEvent(table_name, values);
    }

}

function convertAES(values) {
    //return values;
    if (values) {
        values = values.toLowerCase().trim();
        var key = CryptoJS.enc.Utf8.parse('40887952454045cb');
        var iv = CryptoJS.enc.Utf8.parse('@1B2c3D4e5F6g7H8');
        var encrypted = CryptoJS.AES.encrypt(values, key, {
            mode: CryptoJS.mode.CBC,
            iv: iv,
            padding: CryptoJS.pad.Pkcs7
        });
        return encrypted.toString();
    } else {
        return '';
    }

}

function convertSHA(values) {
    //return values;
    if (values) {
        values = values.trim().toLowerCase();
        var encrypted = CryptoJS.SHA256(values);
        return encrypted.toString();
    } else {
        return '';
    }
}

function EncryptSalt(hash_string) {
    if (hash_string) {
        hash_string = hash_string.trim().toLowerCase();
        var salt = 'BELPG#3288#QCSO#PK68#18A';
        var hash_str = hash_string + salt;
        var sha_signature = CryptoJS.SHA256(hash_str);
        return sha_signature.toString();
    }
    else {
        return '';
    }
}

$('.dicebutton').on('click touch', function(){
    $('.fixedpopupbox').toggleClass('active');
    $(this).parents('.fixedsidebar').toggleClass('active');
});

var cityList = [{
    city: 'Pune',
    city_code: '19',
    state: 'MH',
    dealer: '19NE'
},
{
    city: 'Gurgaon',
    city_code: '95',
    state: 'HN',
    dealer: '95NB'
},
{
    city: 'GURUGRAM',
    city_code: '95',
    state: 'HN',
    dealer: '95NB'
},
{
    city: 'Mumbai',
    city_code: '05',
    state: 'MH',
    dealer: '05ND'
},
{
    city: 'Bangalore',
    city_code: '02',
    state: 'KT',
    dealer: '02NF'
},
{
    city: 'Hyderabad',
    city_code: '10',
    state: 'TG',
    dealer: '10NB'
},
{
    city: 'Delhi',
    city_code: '08',
    state: 'DL',
    dealer: '08ND'
},
{
    city: 'Lucknow',
    city_code: '13',
    state: 'UP',
    dealer: '13NB'
},
{
    city: 'Jaipur',
    city_code: '11',
    state: 'RJ',
    dealer: '11NA'
},
{
    city: 'Chennai',
    city_code: '14',
    state: 'TN',
    dealer: '14NA'
}, {
    city: 'Ahmedabad',
    city_code: '01',
    state: 'GJ',
    dealer: '01NC'
}
];

// var cityList = [
//     {
//         city:'Pune',
//         city_code:'19',
//         state:'MH',
//         dealer:'19NE'
//     },
//     {
//         city:'Gurgaon',
//         city_code:'95',
//         state:'HN',
//         dealer:'95NB'
//     },{
//         city:'Ahmedabad',
//         city_code:'01',
//         state:'GJ',
//         dealer:'01NC'
//     }];

function errorDataLayer(error) {
    DataLayerMSILDL_Common.Push('user_action', 'nexa_finance-error', 'error', window.location.href + '-' + error);
}

function setBedcrum(pageid) {
    var badcrum = getDataFromLocal('badcrum');
    if (badcrum) {
        for (var index = 0; index < badcrum.length; index++) {
            var element = badcrum[index];
            if (element.pageCode == pageid) {
                element.status = true;
                setDataInLocal('badcrum', JSON.stringify(badcrum));
            }
        }
    } else {
        var badcrum = [{
            'pageCode': 1,
            'status': false
        },
        {
            'pageCode': 2,
            'status': false
        },
        {
            'pageCode': 3,
            'status': false
        },
        {
            'pageCode': 4,
            'status': false
        },
        {
            'pageCode': 5,
            'status': false
        },
        {
            'pageCode': 6,
            'status': false
        },
        {
            'pageCode': 7,
            'status': false
        }
        ]
        setDataInLocal('badcrum', JSON.stringify(badcrum));
        setBedcrum(pageid);
    }
}


function autoPopulateFormStateCity(cityCode, cityName) {

    if (!cityCode && !cityName)
        return;

    if ($('select[name="City"]').val() != cityCode) {
        var data = 'city=' + cityName;
        var rowdata = PrepareRequest('/api/sitecore/API/GetCityState', data);
        $.ajax(rowdata).done(function (response) {

            //populatge state and load cities for state
            if (response) {
                $('select[name="State"]').filter(function () {
                    return $('select[name="State"]').val().toLocaleUpperCase() == response.toLocaleUpperCase();
                }).attr('selected', true);
                //$('select[name='State']').val(response).trigger('change', cityCode);
            }

        }).error(function (err) { });
    }

}

var CryptoJSAesJson = {
    stringify: function stringify(cipherParams) {
        var j = {
            ct: cipherParams.ciphertext.toString(CryptoJS.enc.Base64)
        };
        if (cipherParams.iv) j.iv = cipherParams.iv.toString();
        if (cipherParams.salt) j.s = cipherParams.salt.toString();
        return JSON.stringify(j);
    },
    parse: function parse(jsonStr) {
        var j = JSON.parse(jsonStr);
        var cipherParams = CryptoJS.lib.CipherParams.create({
            ciphertext: CryptoJS.enc.Base64.parse(j.ct)
        });
        if (j.iv) cipherParams.iv = CryptoJS.enc.Hex.parse(j.iv);
        if (j.s) cipherParams.salt = CryptoJS.enc.Hex.parse(j.s);
        return cipherParams;
    }
};

var code = function () {
    return {
        encryptMessage: function encryptMessage() {
            var messageToencrypt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
            var encryptedMessage = CryptoJS.AES.encrypt(JSON.stringify(messageToencrypt), '3sc3RLrpd17', {
                format: CryptoJSAesJson
            }).toString();
            return encryptedMessage;
        },
        decryptMessage: function decryptMessage() {
            var encryptedMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
            var decryptedMessage = JSON.parse(CryptoJS.AES.decrypt(encryptedMessage, '3sc3RLrpd17', {
                format: CryptoJSAesJson
            }).toString(CryptoJS.enc.Utf8));
            return decryptedMessage;
        }
    };
}();

function replacerupeesToRs(val) {
    if (val) {
        if (val.includes('₹')) {
            var rowdata = val.split('₹');
            return 'Rs' + rowdata[1];
        }
        else {
            return val;
        }
    }
    else {
        return '';
    }
}




//Marquee SubTotal  Points function
if($('#hdn_page_name').val()){
if ($('#hdn_page_name').val() != 'marquee_thankyou_page') {
    Marquee_Total();
}
}
//$('.automaniaMainSection').hide();
//Marquee_Total();

function Marquee_Total() {
    // var pll_forms =ra.utils.readCookie('pll_forms');
    // var FormData =  JSON.parse(pll_forms);
    // if(FormData){
    //     var Pll_Form_Points = FormData.formValue;
    // }else{
    //     var Pll_Form_Points = 0;
    // }
    var pll_forms = ra.utils.readCookie('pll_forms');
    var pll_forms_name = ra.utils.readCookie('pll_forms_name');

    var brochure_download = ra.utils.readCookie('brochure_download');
    var smart_finance = ra.utils.readCookie('smart_finance');
    var total_time_spent = ra.utils.readCookie('total_time_spent');
    var configurator = ra.utils.readCookie('configurator');
    var ebook = ra.utils.readCookie('e_book');
    var btd_form = ra.utils.readCookie('btd_form');
    var total_points = Number(pll_forms)+Number(btd_form) + Number(brochure_download) + Number(smart_finance) + Number(total_time_spent) + Number(configurator) + Number(ebook);
    ra.utils.setCookieUniversal('total_point', total_points, '5000');

    //Bottom right
    $('.automaniaMainSection').find('.offerLogoText h2').text(ra.utils.readCookie('total_point'));
    $('.automaniaMainSection').find('.offerLogoText small').text('Out of ' + ra.utils.marquee_event.total_point + ' points');

    //Inside Modal
    $('#myModalOffer').find('.offerLogo_popupText h2').text(ra.utils.readCookie('total_point'));
    $('#myModalOffer').find('.offerLogo_popupText small').text('Out of ' + ra.utils.marquee_event.total_point + ' points');

    //Automaina Sales
    $('.automania_sales').find('.score-100').text(ra.utils.readCookie('total_point'));
    $('.automania_sales').find('#Automania_sales_Point').text(ra.utils.marquee_event.total_point);

    $('#total_scored').text(ra.utils.readCookie('total_point'));
    $('#Automania_sales_Point_footer').text(ra.utils.marquee_event.total_point);

    var marquee_discount_amount = 0;
    if (ra.utils.readCookie('total_point') != null) {
        marquee_discount_amount = Number(ra.utils.readCookie('total_point') / 10);
    }
    $('#marquee_discount_amount').text(marquee_discount_amount);
}

//Broucher Download Index Page
$(document).on('click', '.brochurePopupSection .brochurePopupIn .brochureNewDesign ul li a', function (e) {
    //e.preventDefault();
    ra.utils.setCookieUniversal('brochure_download',ra.utils.marquee_event.brochure_download,'5000');
    Marquee_Total();
});
$(document).on('click','.brochurePopupSection .brochurePopupIn .brochureNewDesign ul li a.brochureBtn',function(e){
   // e.preventDefault();
    ra.utils.setCookieUniversal('brochure_download',ra.utils.marquee_event.brochure_download,'5000');
    Marquee_Total();
});

$(document).on('click', '.blinkWid', function () {
    $('.offerLogoImg').show();
    $(this).hide();
})

$(document).on('click', '.closeWid', function () {
    $('.offerLogoImg').hide();
    $('.blinkWid').show();

})

//Smart Finance
// $(document).on('click','.loginBoxContainer .loginSignUpBox .loginLeftBox .nf-mobile-box .form-group button.mdl_fn-finalise-Yes',function(){
//     ra.utils.setCookieUniversal('smart_finance',ra.utils.marquee_event.smart_finance,'5000');
//     Marquee_Total();
// });

//Smart Finance
function MarqueeLoanEevent() {

    ra.utils.setCookieUniversal('smart_finance',ra.utils.marquee_event.smart_finance,'5000');
    Marquee_Total();
}



//configurator yes and no
// $('.loginYesNoButt').on('click','.pYes, .pNo',function(){
//     ra.utils.setCookieUniversal('configurator',ra.utils.marquee_event.configurator,'5000');
//     Marquee_Total();
// });

function getCookieTimer(cname) {
    var name = cname + '=';
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return '';
}

function setCookieTimer(cname, cvalue) {
    var d = new Date();
    d.setTime(d.getTime() + (0.5 * 24 * 60 * 60 * 1000));
    var expires = 'expires=' + d.toUTCString();
    document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/;secure';
}

function secondsTimeSpanToHMS(s) {
    var h = Math.floor(s / 3600); //Get whole hours
    s -= h * 3600;
    var m = Math.floor(s / 60); //Get remaining minutes
    s -= m * 60;
    return h + ':' + (m < 10 ? '0' + m : m) + ':' + (s < 10 ? '0' + s : s); //zero padding on minutes and seconds
}
//Timer
function startTimer(duration, cookieData, display) {
    var timer = duration,
        hours,
        minutes,
        seconds;
    if (cookieData > 0) {
        timer = duration + cookieData;
    }
    setInterval(function () {

        var dispalytext = secondsTimeSpanToHMS(timer);
        // hours = parseInt(timer / (60*60), 10);
        // minutes = parseInt(timer / 60, 10);
        // seconds = parseInt(timer % 60, 10);

        sessionStorage.setItem('timer', timer);

        // hours = hours < 10 ? '0' + hours : hours;
        // minutes = minutes < 10 ? '0' + minutes : minutes;
        // seconds = seconds < 10 ? '0' + seconds : seconds;

        // display.textContent = hours + ':' + minutes + ':' + seconds;
        display.textContent = dispalytext;

        if (timer >= 60 && timer < 180) {
            if (ra.utils.readCookie('total_time_spent') == null) {
                ra.utils.setCookieUniversal('total_time_spent', ra.utils.marquee_event.time_spent_1min, '5000');
                Marquee_Total();
            }

        } else if (timer >= 180) {
            // if(ra.utils.readCookie('total_time_spent') == null)
            // {
            ra.utils.setCookieUniversal('total_time_spent', ra.utils.marquee_event.time_spent_3min, '5000');
            Marquee_Total();
            //}

        }

        timer++;

    }, 1000);
}



$(document).ready(function () {


    // new event for mobile view
    $('.automaniaMainSection').on('click','.closeWid',function(e){
        e.preventDefault();
        tdSubmit({
            'eventCategory': 'Sales Marquee Sticky - Collapse',
            'eventAction': 'click',
            'eventLabel': 'Sales Marquee Sticky - Collapse',
        }, 'event_nexa');
    });
    $('.automaniaMainSection').on('click','.blinkWid',function(e){
        e.preventDefault();
        tdSubmit({
            'eventCategory': 'Sales Marquee Sticky - Expand',
            'eventAction': 'click',
            'eventLabel': 'Sales Marquee Sticky - Expand',
        }, 'event_nexa');
    });
    // new event for mobile view

    if ($('#hdn_ethankyou').val() == 'ebookingthankyou') {
        if (ra.utils.readCookie('e_book') == null) {
            ra.utils.setCookieUniversal('e_book', ra.utils.marquee_event.e_book, '5000');
            Marquee_Total();
        }

    }

    if ($('#hdn_page_name').val() == 'marquee_thankyou_page') { // if thankyou page

        //clear all cookies
        var nametimeout = null;
        clearTimeout(nametimeout);
        nametimeout = setTimeout(function () {

            // ra.utils.eraseCookie('pll_forms')
            // ra.utils.eraseCookie('pll_forms_name')
            // ra.utils.eraseCookie('total_point')
            // ra.utils.eraseCookie('brochure_download')
            // ra.utils.eraseCookie('smart_finance')
            // ra.utils.eraseCookie('configurator')
            // ra.utils.eraseCookie('total_time_spent')
            // ra.utils.eraseCookie('e_book')

            sessionStorage.removeItem('timer');
            sessionStorage.clear();

        }, 5000);

        // hide timer section
        $('.automaniaMainSection').css('display', 'none');

        // if(ra.utils.readCookie('total_time_spent')==null || ra.utils.readCookie('total_time_spent')==''){
        //     var total_time_spent_cookie=0;
        // }else{
        //     var total_time_spent_cookie=ra.utils.readCookie('total_time_spent');
        //     $('#thankyou_spent_time').parent().addClass('bg-secondary')
        // }

        // if(ra.utils.readCookie('configurator')==null || ra.utils.readCookie('configurator')==''){
        //     var configurator_cookie=0;
        // }else{
        //     var configurator_cookie=ra.utils.readCookie('configurator');
        //     $('#thankyou_configurator').parent().addClass('bg-secondary')
        // }

        // if(ra.utils.readCookie('pll_forms')==null || ra.utils.readCookie('pll_forms')==''){
        //     var pll_forms_cookie=0;
        // }else{
        //     var pll_forms_cookie=ra.utils.readCookie('pll_forms');
        //     $('#thankyou_book_test_drive').parent().addClass('bg-secondary')
        // }

        // if(ra.utils.readCookie('brochure_download')==null || ra.utils.readCookie('brochure_download')==''){
        //     var brochure_download_cookie=0;
        // }else{
        //     var brochure_download_cookie=ra.utils.readCookie('brochure_download');
        //     $('#thankyou_download_brochure').parent().addClass('bg-secondary')
        // }

        // if(ra.utils.readCookie('smart_finance')==null || ra.utils.readCookie('smart_finance')==''){
        //     var smart_finance_cookie=0;
        // }else{
        //     var smart_finance_cookie=ra.utils.readCookie('smart_finance');
        //     $('#thankyou_loan_offer').parent().addClass('bg-secondary')
        // }

        // if(ra.utils.readCookie('e_book')==null || ra.utils.readCookie('e_book')==''){
        //     var ebook_cookie=0;
        // }else{
        //     var ebook_cookie=ra.utils.readCookie('e_book');
        //     $('#thankyou_ebook').parent().addClass('bg-secondary')
        // }

        // if(ra.utils.readCookie('subscribe_view')==null || ra.utils.readCookie('subscribe_view')==''){
        //     var subscribe_view_cookie=0;
        // }else{
        //     var subscribe_view_cookie=ra.utils.readCookie('subscribe_view');
        //     $('#thankyou_subscribe_view').parent().addClass('bg-secondary')
        // }

        // if(ra.utils.readCookie('accessories_view')==null || ra.utils.readCookie('accessories_view')==''){
        //     var accessories_view_cookie=0;
        // }else{
        //     var accessories_view_cookie=ra.utils.readCookie('accessories_view');
        //     $('#thankyou_accessories_view').parent().addClass('bg-secondary')
        // }

        if (ra.utils.readCookie('total_point') == null || ra.utils.readCookie('total_point') == '') {
            var total_point_cookie = 0;
        } else {
            var total_point_cookie = ra.utils.readCookie('total_point');
        }


        $('#thankyou_total_scored').text(ra.utils.marquee_event.total_point);
        $('#thankyou_sales_point').text(total_point_cookie);


        // $('#thankyou_spent_time').text(total_time_spent_cookie);
        // $('#thankyou_configurator').text(configurator_cookie);

        // $('#thankyou_book_test_drive').text(pll_forms_cookie);

        // $('#thankyou_download_brochure').text(brochure_download_cookie);

        // $('#thankyou_loan_offer').text(smart_finance_cookie);
        // $('#thankyou_ebook').text(ebook_cookie);

        // $('#thankyou_subscribe_view').text(subscribe_view_cookie);
        // $('#thankyou_accessories_view').text(accessories_view_cookie);

    } else {

        // start timer code
        var toalTimerTime = 0;

          var getTimerData = toalTimerTime + parseInt(sessionStorage.getItem('timer'));
          var display = document.querySelector('#countdownPopup');
          var display1 = document.querySelector('#countdownAutomania');
          if(display && display1)
          {
            startTimer(toalTimerTime, getTimerData, display);
            startTimer(toalTimerTime, getTimerData, display1);
          }


          // show timer section
          //$('.automaniaMainSection').css('display','block');
    }





    // if(ra.utils.readCookie('usercitymarquee') == null)
    // {
    //     //Onload Get User Location
    //     getLocationAll();
    // }
    // else
    // {
    //     if(ra.utils.readCookie('usercitymarquee') == 'BENGALURU')
    //     {
    //         $('.automaniaMainSection').show();
    //     }
    //     else
    //     {
    //         $('.automaniaMainSection').hide();
    //     }
    // }

//Onload Get User Location
// getLocationAll();

// function getLocationAll() {
//   if (navigator.geolocation) {
//     navigator.geolocation.getCurrentPosition(showPositionAll);
//   } else {
//     console.log('Geolocation is not supported by this browser.');
//   }
// }

//         function showPositionAll(position) {
//             // localStorage.setItem('latlong', JSON.stringify({ lat: position.coords.latitude, long: position.coords.longitude }));
//             var apikey = 'AIzaSyCR8LK5KsAwx7_ux4C3w1oSL2rb7kCIBB4';
//             if (apikey) {
//                 var GEOCODING = 'https://maps.googleapis.com/maps/api/geocode/json?&key=' + apikey + '&latlng=' + position.coords.latitude + '%2C' + position.coords.longitude + '&language=en';
//                 $.getJSON(GEOCODING).done(function(location) {
//                     var add = location.results[0].formatted_address;
//                     var value = add.split(',');
//                     var count = value.length;
//                     var currentCity = value[count - 3];
//                     currentCity = currentCity.trim().toUpperCase();
//                     //console.log( User_City);
//                     UserCityMarquee=currentCity;
//                     if(currentCity == 'BANGALORE ' || currentCity == 'BANGALURU' || currentCity == 'GURUGRAM' || currentCity == 'FARIDABAD' || currentCity == 'DELHI' || currentCity == 'NEW DELHI' || currentCity == 'LUCKNOW' || currentCity == 'ALWAR'){
//                        $('.automaniaMainSection').show();

//                    }else{
//                     $('.automaniaMainSection').hide();
//                    }

//                 })
//             }
//         }




});
var GlobalArray =[];


if(window.matchMedia('only screen and (max-width: 991px)').matches) {

$(document).find(".RfiInputName").on('click', function () {
var scrollPos =  $(".RfiInputName").offset().top-130;
$(window).scrollTop(scrollPos);
});

$(document).find(".RfiInputEmail").on('click', function () {
    var scrollPos =  $(".RfiInputEmail").offset().top-130;
    $(window).scrollTop(scrollPos);
});


$(document).find(".RfiInputMobile").on('focusin', function () {
        var scrollPos =  $(".RfiInputMobile").offset().top-130;
        $(window).scrollTop(scrollPos);
});

$(document).on('click','.RfiState',function(){
            var scrollPos =  $(".RfiState").offset().top-130;
            $(window).scrollTop(scrollPos);
});        
            
$(document).on('click','.RfiCity',function(){
                var scrollPos =  $(".RfiCity").offset().top-130;
                $(window).scrollTop(scrollPos);
}); 

$(document).on('click','.RfiDealer',function(){
                    var scrollPos =  $(".RfiDealer").offset().top-130;
                    $(window).scrollTop(scrollPos);
}); 
$(document).on('click','.RfiInputCarModel',function(){
                        var scrollPos =  $(".RfiInputCarModel").offset().top-130;
                        $(window).scrollTop(scrollPos);
}); 
$(document).on('click','.RfiInputBuyer',function(){
                            var scrollPos =  $(".RfiInputBuyer").offset().top-130;
                            $(window).scrollTop(scrollPos);
}); 

                            }
        


//Common Cdp Fire event Function
function CommonCDPtracking(event,eventCategory,eventAction,eventLabel){
  tdSubmit({
      'event': event,
      'eventCategory': eventCategory,
      'eventAction': eventAction,
      'eventLabel': eventLabel,
   }, 'event_nexa');
}
//Exterior Callback Function
function exteriorCallBack(name, type) {
  $('.fullviewbtn').css('display', 'block');
  $('.exitfullviewbtn').css('display', 'none');
  $('.carconfigbox').removeClass('leftactives active');
  onWindowResize_ui();
  $('.js-switchPanel').removeClass('active');
  $('.js-switchPanel').each(function () {
    if ($(this).data('id').toLowerCase() === type.toLowerCase()) {
      $(this).addClass('active');
      $(this).find('.slidersubmenu').fadeOut();
    }
  });

  $(document).find('.extListItems li').each(function () {
    if ($(this).data('group_object_name').toLowerCase() === name.toLowerCase()) {
      $(this).trigger('click');
    }
  });

  $('.interiorView, .exploreFeature').removeClass('active');
  $('.exteriorView').addClass('active');
  // }
}
//Interior Callback Function
function interiorCallBack(name, type) {
  $('.fullviewbtn').css('display', 'block');
  $('.exitfullviewbtn').css('display', 'none');
  $('.carconfigbox').removeClass('leftactives active');
  onWindowResize_ui();

  $('.js-switchPanel').removeClass('active');
  $('.js-switchPanel').each(function () {
    if ($(this).data('id').toLowerCase() === type.toLowerCase()) {
      $(this).addClass('active');
      $(this).find('.slidersubmenu').fadeOut();
    }
  });

  $(document).find('.intListItems li').each(function () {
    if ($(this).data('group_object_name').toLowerCase() === name.toLowerCase()) {
      $(this).trigger('click');
    }
  });

  $('.exteriorView, .exploreFeature').removeClass('active');
  $('.interiorView').addClass('active');
  //}
}

//Add to Build Callback Function
function addToBuildCallback(object_name) {
  $(document).find('.js-addToBuild').each(function () {
    if ($(this).data('object_name').toLowerCase() === object_name.toLowerCase()) {
      $(this).text('Remove');
      $(this).removeAttr('disabled');
    }
  });

  $('.exteriorPanel, .interiorPanel').find('.slidersubmenu-overlay').remove();

  //new
  $('.exteriorPanel').removeClass('active');
  $('.interiorPanel').removeClass('active');
  $('.configHeadBox').removeClass('addRemove');
  $('.toggleShowHide').removeClass('active');

  $('.js-exteriorPanel').find('.slidersubmenu').fadeOut();
  $('.js-interiorPanel').find('.slidersubmenu').fadeOut();

  $('#colorEdit,#exteriorEdit, #interiorEdit, #comfortEdit, #audioEdit').addClass('js-editMenus'); //enable click event right side

  var intervalTimer = setTimeout(function () {
    //focus off
    focusOffPoints();
    $('.configLeftPanel').find('.leftoverlay').remove();
    clearTimeout(intervalTimer);
  }, 3000);



}

//Enable Sidebar Callback Function
function enableSideBar() {
  if (ra.utils.mode != 'view') {
    $('.configLeftPanel').find('.leftoverlay').remove();
    $('#selectcolor,#exteriorbox, #interiorbox, #comfortbox, #audiobox').on('click', function (e) {
      if ($(e.currentTarget).data('id') == 'leftbox') {
        ra.configuratorWrapper.clickEventsMenusForAddon(e);
      } else {
        ra.configuratorWrapper.clickEventsMenus(e);
      }
    }); //enable click event

    $('#colorEdit,#exteriorEdit, #interiorEdit, #comfortEdit, #audioEdit').addClass('js-editMenus'); //enable click event right side
  }

  $('.configRightPanel').find('.rightoverlay').remove();
  $('.conflinks').show(); // show canvas button
}

//Switch to Exterior Callback Function
function switchToExterior() {
  $('.interior-view-btn,.explore-features-btn').removeClass('active');
  $('.exterior-view-btn').addClass('active');
}

//Switch to Interior Callback Function
function switchToInterior() {
  $('.exterior-view-btn,.explore-features-btn').removeClass('active');
  $('.interior-view-btn').addClass('active');
}

//add package Callback Function
function addToPackageCallBack(keyid) {
  $(document).find('.js-package-addTobuild').each(function () {
    if ($(this).data('key') === keyid) {
      $(this).text('Remove');
    }
  });
  //$('.js-package-container').find('.package-overlay').remove();
  $('.allLeftPackagePanel').find('.slidersubmenu-overlay').remove();
}
//hideLoader Callback Function

function hideLoader() {
  changeColor(ra.utils.colorCode);
  for (var index = 0; index < cityList.length; index++) {
    const element = cityList[index];
    if (element.city.toLowerCase() == ra.utils.configurationCity.toLowerCase()) {
      var makecarcode = ra.utils.variantCode;
      makecarcode = makecarcode.toLocaleUpperCase();
      makecarcode = makecarcode.substring(0, 2).replace('BA', 'BY');
      loadDefaultAccessories(ra.utils.variantId, makecarcode, element.city.toUpperCase());
      break;
    }
  }
  var selectedAccess = getDataFromLocal('addedAccess');
  if (selectedAccess && selectedAccess.length) {
    // ra.utils.buildArray = selectedAccess;
    // var priceCalc = parseFloat(ra.utils.basePrice.replace(/[^0-9\.-]+/g, '')) + parseFloat(ra.utils.colorPrice ? ra.utils.colorPrice : 0);
    // ra.configuratorWrapper.buildFunction(priceCalc);
  }

  setTimeout(function () {
    $('#bodymovin').hide();
  }, 2000);
  landingConfigratorEvent();
}

//setLoaderPercent Callback Function
function setLoaderPercent(wPercent) {
  $('.loadingCompleted').css('width', wPercent + '%');
}


function exploreFeatureCallback(objName) {
  $(document).find('.exf-dot').each(function () {
    if ($(this).data('hotspot').toLowerCase() === objName.toLowerCase()) {
      $(this).trigger('click');
    }
  });
}

$('.closeSubscribe').click(function () {
  $('.subscribeform').fadeOut();
  $('body').removeClass('bodylock');
});


function setCanvasHeight() {
  var winH = $(window).height();
  $('#CarCanvas').height(winH);
  onWindowResize_ui();
}


function displayModeButton() {
  $('.configDayNightView').show();
}


function changeVariantCallBack() {
  $('.conflinks').show();
}


function blankFormData() {
  $('.sendotp-wrapper,.sendotp-wrapper-share').find('input[name="phone"]').val('');
  $('.sendotp-wrapper,.sendotp-wrapper-share').find('input[name="carName"]').val('');
  $('.sendotp-wrapper,.sendotp-wrapper-share').find('input[name="email"]').val('');
  $('#phoneError,#carNameError,#phoneErrorShare,#emailErrorShare, #carNameErrorShare').text('');

  $('.resendotp-wrapper').find('input[name="phone"]').val('');
  $('.resendotp-wrapper').find('input[name="carName"]').val('');
  $('.resendotp-wrapper').find('input[name="otp"]').val('');
  $('#veriPhoneError,#veriCarNameError,#otpError').text('');

  $('.resendotp-wrapper-share').find('input[name="phone"]').val('');
  $('.resendotp-wrapper-share').find('input[name="carName"]').val('');
  $('.resendotp-wrapper-share').find('input[name="otp"]').val('');
  $('.resendotp-wrapper-share').find('input[name="email"]').val('');
  $('#veriPhoneErrorshare,#veriEmailErrorshare,#veriCarNameErrorshare,#otpErrorshare').text('');

}

// begin view summary js part
$(document).on('click', '.viewsummary', function (e) {
  e.preventDefault();
  viewSummaryClickEvent();
  var ischeck;
  for (var index = 0; index < cityList.length; index++) {
    const element = cityList[index];
    if (element.city.toLowerCase() == ra.utils.configurationCity.toLowerCase()) {
      ischeck = element;
      break;
    }
  }
  ischeck = false;
  if (ischeck) {
    var makecarcode = ra.utils.variantCode;
    makecarcode = makecarcode.toLocaleUpperCase();
    makecarcode = makecarcode.substring(0, 2).replace('BA', 'BY');
    var car_variant = (ra.utils.variantCode) ? ra.utils.variantCode.substring(0, ra.utils.variantCode.length - 2) : 'SSRDAL1';
    //postDetails('http://www.mocky.io/v2/5e426fb32f0000620087f561', JSON.stringify([{
    postDetails('/api/sitecore/masterdata/fetchfmpid', JSON.stringify([{
          'bucket_name': 'MS_DEALER',
          'bucket_key': ischeck.dealer
        },
        {
          'bucket_name': 'MS_CAR_MODEL',
          'bucket_key': makecarcode
        },
        {
          'bucket_name': 'MS_CAR_VARIANT',
          'bucket_key': car_variant
        },
        {
          'bucket_name': 'MS_CITY',
          'bucket_key': ischeck.city_code
        },
        {
          'bucket_name': 'MS_STATE',
          'bucket_key': ischeck.state
        }
      ])).then(function (response) {
        if (response) {
          var rowdata = {
            'name': '',
            'email': '',
            'mobile': '',
            'dob': '',
            'enquiry_id': '',
            'car_model': response.MS_CAR_MODEL[makecarcode],
            'car_variant': response.MS_CAR_VARIANT[car_variant],
            'variant_code': ra.utils.variantCode,
            'model_code': makecarcode,
            'color_code': ra.utils.colorId,
            'car_name': ra.utils.carModel,
            'city_name': ischeck.city,
            'state': response.MS_STATE[ischeck.state],
            'city': response.MS_CITY[ischeck.city_code],
            'dealer': response.MS_DEALER[ischeck.dealer],
            'page': 1,
            'configurator': {
              'build_name': ra.utils.carModel,
              'model_id': ra.utils.modelId,
              'kit_id': ra.utils.kit_id,
              'variant_id': ra.utils.variantId,
              'configuration_city': ra.utils.configurationCity,
              'color': ra.utils.colorSelected,
              'source': ra.utils.source,
              'acc_item': ra.utils.accItemArray,
              'pin_no': ra.utils.pin_no
          }
          }

          setDataInLocal('enquiry_details', JSON.stringify(rowdata));
          setDataInLocal('buildArray', JSON.stringify(ra.utils.buildArray));
          setCookie('enquiry_details', JSON.stringify(rowdata));

          window.location.href = '/nexa-finance/nexafinance-price-summary';
        }
      })
      .catch(function (err) {
        //$('.configurator-modal-viewsummary').show();
        //$('#changePopup-viewsummary').show();
      })
  } else {
    $('.configurator-modal-viewsummary').show();
    $('#changePopup-viewsummary').show();
  }

});

$(document).on('click', '#configurator-close-viewsummary', function (e) {
  e.preventDefault();
  $('.configurator-modal-viewsummary').hide();
});

$(document).on('click', '.btn-firststep, .btn-firststep-share', function (e) {
  e.preventDefault();
  $('.section-wrap').hide();
  $('#changePopup-viewsummary').show();

  blankFormData();
});

$(document).on('click', '.btn-secondstep', function (e) {
  e.preventDefault();
  $('.section-wrap').hide();
  $('#changePopup-viewsummary').show();
  blankFormData();
});


$(document).on('click', '.btn-secondstep-share', function (e) {
  e.preventDefault();
  $('.section-wrap').hide();
  $('#changePopup-viewsummary').show();
  blankFormData();
});

$(document).on('click', '.btn-thirdstep, .btn-thirdstep-share', function (e) {
  e.preventDefault();
  $('.section-wrap').hide();
  $('.configurator-modal-viewsummary').hide();

  blankFormData();
});


$(document).on('click', '.btnsave', function (e) {
  e.preventDefault();
  $('#changePopup-viewsummary').hide();
  $('.section-wrap').hide();
  $('.sendotp-wrapper').css('display', 'block');

  //ga event
  saveClickEvent();
});

$(document).on('click', '.btnshare', function (e) {
  e.preventDefault();
  $('#changePopup-viewsummary').hide();
  $('.section-wrap').hide();
  $('.sendotp-wrapper-share').css('display', 'block');

  //ga event
  shareClickEvent();
});


$('.acrdn-style1').on('click', 'a.accordion-section-title', function () {
  if ($(this).hasClass('active') == true) {
    $('a.accordion-section-title').removeClass('active');
    $(this).next().slideUp();
    return false;
  }
  $('.accordion-section-content').slideUp();
  $('a.accordion-section-title').removeClass('active');
  $(this).addClass('active');
  $(this).next().slideDown();
})




//brandAccordioSec code for faq
$(document).on('click', '.brandAccordioSec ul li h6', function(e){
  if ($(this).hasClass('active') == true) {
    $('.brandAccordioSec ul li h6').removeClass('active');
    $(this).next().slideUp();
    return false;}

  $('.brandAccordioSec .content').slideUp();
  $('.brandAccordioSec ul li h6').removeClass('active');
  $(this).addClass('active');
  $(this).next().slideDown();
})



// $('.whatsLinkTab').click(function(){
  $(document).on('click', '.whatsLinkTab', function(e){
    $('.balenoWhatNewTab ul li a').removeClass('active')
    $(this).find('a').addClass('active')
  $('#highlighSecShowHide').hide();
  $('#whatsNewSecShowHide').show();
});

$(document).on('click', '.balenoWhatNewTab ul li+li', function(e){
    $('#highlighSecShowHide').show();
    $('#whatsNewSecShowHide').hide();
});


$(window).load(function () {
  $('#myModalAutoOpen').modal('show');

});

$(function () {
  $('.carImg2').addClass('active')
  $('.expBookBtn a').addClass('active')

  $('.bookmarkIcon').click(function () {
    $(this).toggleClass('active');
  });

  $('.heatTrigger').click(function () {
    $(this).find('i').removeClass('far');
    $(this).find('i').addClass('fas');
  });

  $('.intExtSection ul li').click(function () {
    $('.intExtSection ul li').removeClass('active');
    $(this).addClass('active');
  });

  $('.shareTriger').click(function () {
    $(this).parents('.mainShare').find('.shareIcons').toggle();
  })






  $('#myModalAutoOpen').modal('show');

//Subscribe Popup
  $('#myModalAutoOpen_subscribe').find('.close').click(function (){
    localStorage.setItem('subscribePopup','completed');

  });
  var subscribeformCompleted = localStorage.getItem('subscribePopup');
  if(!subscribeformCompleted){
     setTimeout(function(){
    $('#myModalAutoOpen_subscribe').modal('show');
  }, 30000);
  }


    //book a test drive form
  $('#myModalAutoOpen_booktestDrive').find('.close').click(function (){
    localStorage.setItem('btdPopup','completed')
  });
  var btdformCompleted = localStorage.getItem('btdPopup');
  if(!btdformCompleted){
    setTimeout(function(){
      $('#myModalAutoOpen_booktestDrive').modal('show');
    }, 10000);
  }

  if($(window).width()<=767){
  $('#rewardpopup_open').modal('show');
 }
})

$(function () {
  /*
         $('.bookmarkIcon').click(function(){
          $(this).toggleClass('active');
      });
      $('.heatTrigger').click(function(){
        $(this).find('i').removeClass('far');
        $(this).find('i').addClass('fas');
    });
  */

  $('.shareTriger').click(function () {
    $(this).parents('.mainShare').find('.shareIcons').toggle();
  })

  $('.ratingBox li').click(function () {
    $(this).closest('.quesChildBox').find('.ratingBox li').removeClass('active')
    $(this).addClass('active')
  })

})



$('.readmoreClick').click(function () {
  var kkk = $(this).text();
  if (kkk == 'Read More') {
    $('.readmoreClick').text('Read Less');
  } else {
    $('.readmoreClick').text('Read More');
  }
  $('.expandMore').toggle();
});




/*********Covid survay form***************/
$(function () {
  $('.surveyQuest').on('shown.bs.modal', function () {
    $('.ulActive').css('height', ($('#step1').offset().top - $('#step1').parent().offset().top))
  });

  $('#stepList3 ul li').click(function(){
    var index = $(this).data('id');
    localStorage.setItem('pid',index)
  });

  // $('.surveyQuest .right .rightTab li').click(function(){
  //   $('.surveyQuest .right .rightTab li').removeClass('active');
  //   $(this).addClass('active')
  //   $('.ulActive').css('height',($(this).offset().top - $(this).parent().offset().top))
  // })


  $('.nextPrev .next').click(function () {

    // loop through all checkboxes
    var checks1 = $('#stepList1 ul li.active');
    var checks2 = $('#stepList2 ul li.active');
    var checks3 = $('#stepList3 ul li.active');
    var checks4 = $('#stepList4 ul.sortable li');
    var checks5 = $('#stepList5 ul.sortable li');
    var checks6 = $('#stepList6 ul.sortable li');

    $('.surveyQuest .right .rightTab li').removeClass('active');
    var id = $(this).data('id');
    var pid = $(this).data('pid');
    if(pid == 'stepList4'){
      pid = localStorage.getItem('pid');
      $('.rightTabListSec .rightTabList3 ul.sortable li').addClass('shake')
      setTimeout(function(){
        $('.rightTabListSec .rightTabList3 ul.sortable li').removeClass('shake')
      },2200)
    }


    if (id == 'step2') {
      $(checks1).each(function (i) {
        var getAnswer = $(this).find('.answer_text').text();
        checkboxArray[i] = getAnswer;
        console.log(checkboxArray);
        answer1 = checkboxArray;
      });

      if (checks1) {
        var getAnswer2 = $('#stepList1_input').val();
        if (getAnswer2 !== '') {
          checkboxArray.push(getAnswer2);
        }
      }
      // stop function if no data for question 1
      if (checks1.length == 0) {
        // update the text content of results
        alert('you forgot to answer question 1');
        // stop function if no answer
        return
      }

      // confirm answer 1 value
      console.log('answer 1: ' + answer1)
      DataLayerMSILDL_SurveyForm.Push('user_actions', 'Survey-Q1', 'Click', 'Option Selected_' + answer1, ' ');
      BrandSurveyForm(1, answer1);
    }

    if (id == 'step3') {
      $(checks2).each(function (i) {
        var getAnswer = $(this).find('.answer_text').text();
        radioArray[i] = getAnswer;
        console.log(radioArray);
        answer2 = radioArray;
      });

      // stop function if no data for question 1
      if (checks2.length == 0) {
        // update the text content of results
        alert('you forgot to answer question 2');
        // stop function if no answer
        return
      }

      // confirm answer 2 value
      console.log('answer 2: ' + answer2);
      DataLayerMSILDL_SurveyForm.Push('user_actions', 'Survey-Q2', 'Click', 'Option Selected_' + answer2, ' ');
      BrandSurveyForm(2, answer2);
    }

    if (id == 'step4') {
      $(checks3).each(function (i) {
        var getAnswer = $(this).find('.answer_text').text();
        radioArray2[i] = getAnswer;
        console.log(radioArray2);
        answer3 = radioArray2;
      });

      // stop function if no data for question 1
      if (checks3.length == 0) {
        // update the text content of results
        alert('you forgot to answer question 3');
        // stop function if no answer
        return
      }

      // confirm answer 3 value
      console.log('answer 3: ' + answer3);
      DataLayerMSILDL_SurveyForm.Push('user_actions', 'Survey-Q2', 'Click', 'Option Selected_' + answer3, ' ');
      BrandSurveyForm(3, answer3);
    }

    if (id == 'step5') {
      for (var i = 0; i < $('.surveyQuest .right .rightTab li').length - 1; i++) {
        $('.surveyQuest .right .rightTab li').eq(i).hide()
      }
      $('.ulActive').css('height', ($('#' + id + '').offset().top - $('#' + id + '').parent().offset().top));

      if($('#stepList3 ul li:first-child').hasClass('active')){
        $(checks4).each(function (i) {
          var getAnswer = $(this).find('.answer_text').text();
          checkboxArray2[i] = getAnswer;
          console.log(checkboxArray2);
          answer4 = checkboxArray2;
        });
      }else if($('#stepList3 ul li:nth-child(2)').hasClass('active')){
        $(checks5).each(function (i) {
          var getAnswer = $(this).find('.answer_text').text();
          checkboxArray2[i] = getAnswer;
          console.log(checkboxArray2);
          answer4 = checkboxArray2;
        });

      }else if($('#stepList3 ul li:last-child').hasClass('active')){
        $(checks6).each(function (i) {
          var getAnswer = $(this).find('.answer_text').text();
          checkboxArray2[i] = getAnswer;
          console.log(checkboxArray2);
          answer4 = checkboxArray2;
        });
      }




      // stop function if no data for question 1
      if (checks4.length == 0 || checks5.length == 0 || checks6.length == 0) {
        // update the text content of results
        alert('you forgot to answer question 4');
        // stop function if no answer
        return
      }

      // confirm answer 3 value
      console.log('answer 4: ' + answer4)
      DataLayerMSILDL_SurveyForm.Push('user_actions', 'Survey-Q3', 'Click', 'Option Selected_' + answer4, ' ');
      BrandSurveyForm(4, answer4);
    }
    $('#' + id + '').addClass('active');
    $('.rightTabListSec .rightTabList').hide();
    $('#' + pid + '').show();
    $('.ulActive').css('height', ($('#' + id + '').offset().top - $('#' + id + '').parent().offset().top))

  })

  $('.nextPrev .submit').click(function () {
    var checks5 = $('#stepList7 ul li.active');
    $(checks5).each(function (i) {
      var getAnswer = $(this).find('.answer_text').text();
      radioArray3[i] = getAnswer;
      console.log(radioArray3);
      answer5 = radioArray3;
    });

    // stop function if no data for question 1
    if (checks5.length == 0) {
      // update the text content of results
      alert('you forgot to answer question 5');
      // stop function if no answer
      return
    }

    // confirm answer 4 value
    console.log('answer 5: ' + answer5)
    DataLayerMSILDL_SurveyForm.Push('user_actions', 'Survey-Q4', 'Click', 'Option Selected_' + answer5, ' ');
    BrandSurveyForm(5, answer5);

    var surveyAnswers = {
      question1: answer1,
      question2: answer2,
      question3: answer3,
      question4: answer4,
      question5: answer5
    }

    //alert('thanks for completing the survey!');
    //$('.surveyQuest').modal('hide');
    $('.surveyQuestSec').css('display', 'none');
    $('.thankyouMsg').css('display', 'block');
    // // add surveyAnswers to survey array
    surveyArray.push(surveyAnswers)

    // check survey array to confirm new object
    console.log(surveyArray)

  });

  $('.nextPrev .prev').click(function () {
    $('.surveyQuest .right .rightTab li').removeClass('active');
    var id = $(this).data('id');
    var pid = $(this).data('pid');
    if(pid == 'stepList4'){
      pid = localStorage.getItem('pid');
    }
    $('#' + id + '').addClass('active');
    $('.rightTabListSec .rightTabList').hide();
    $('#' + pid + '').show();
    $('.ulActive').css('height', ($('#' + id + '').offset().top - $('#' + id + '').parent().offset().top))

    if (id == 'step4') {
      for (var i = 0; i < $('.surveyQuest .right .rightTab li').length - 1; i++) {
        $('.surveyQuest .right .rightTab li').eq(i).show()
      }
      $('.ulActive').css('height', ($('#' + id + '').offset().top - $('#' + id + '').parent().offset().top))
    }
  })

  $('.rightTabListSec ul li').click(function () {
    $(this).toggleClass('active');
  })

  $('.rightTabList2 ul li').click(function () {
    $('.rightTabList2 ul li').removeClass('active');
    $(this).addClass('active');
  })


  $('.rightTabList4 ul li').click(function () {
    $('.rightTabList4 ul li').removeClass('active')
    $(this).addClass('active');
    var top = ($(this).offset().top + $(this).outerHeight() / 2) - $(this).parent().offset().top;
    $(this).closest('.rightTabListSec').find('.carMove').css('top', top + 15)
  })

  // $('.personalDetailSec .editTriger').click(function () {
  //   $('.detailPopupSection').hide()
  //   $(this).closest('.accSection').find('.detailPopupSection').show()
  // })

  $('.accSection .alleditTriger').click(function () {
    $('.detailPopupSection').hide()
    $(this).closest('.accSection').find('.detailPopupSection').show()
  })

  $('.closeBox').click(function () {
    $('.detailPopupSection').hide()
  })

  $('.detailPopupSection .saveTriger').click(function(){
    $('#overlayBox').show()
    $('.buynowPopup').show();
  })

  $('.remarkTriger').click(function(){
    $('#overlayBox').show()
    $('.remarksPopup').show();
  })

  $('.closePopup').click(function(){
    $('#overlayBox').hide()
    $('.buynowPopup, .remarksPopup').hide();
    $('body').removeClass('active')
  })

  $('.closePopupCancel').click(function(){
    $('#overlayBoxCancel').hide()
    $('.buynowPopupCancel').hide();
  })

  // $('.detailPopupSection .saveTriger').click(function () {
  //   $('.detailPopupSection').hide()
  // })


  $('#PersonalOpenSection').click(function(){
     if($('#PersonalOpenSection').hasClass('active')==true){
      $('#accordstatusModel').css('min-height','0px');
     }
    });
   $('#ModelOpenSection').click(function(){
    if($('#ModelOpenSection').hasClass('active')==true){
       $('#accordstatusPersonal').css('min-height','0px');
    }
   });

   $(document).find('#accordstatusPersonal').on('click', function () {
    if($('#PersonalOpenSection').hasClass('active')==true){
     $('#accordstatusModel').css('min-height','0px');
    }
   });

    $(document).find('#accordstatusModel').on('click', function () {
   if($('#ModelOpenSection').hasClass('active')==true){
      $('#accordstatusPersonal').css('min-height','0px');
   }
  })

  $('.accSection h2').click(function(){
    $('.detailPopupSection').hide();
    if ($(this).hasClass('active')==true){
    $('.accSection h2').removeClass('active');
    $(this).next().slideUp();
     $(this).closest('.accSection').find('.alleditTriger').show();
    return false;
      }
    $('.accContenSection').slideUp();
     $('.alleditTriger').hide();
    $('.accSection h2').removeClass('active');
    $(this).addClass('active');
    $(this).next().slideDown();
     $(this).closest('.accSection').find('.alleditTriger').show();
      })


  $('.sortable').sortable({
    placeholder: 'ui-state-highlight',
    start: function (event, ui) {
      ui.item.addClass('active')
      // var target = ui.item[0].attributes['1'].nodeValue;
      // $('.bullets li').eq(target-1).addClass('active')
    },
    stop: function (event, ui) {
      // var target = ui.item[0].attributes['1'].nodeValue;
      // $('.bullets li').eq(target - 1).removeClass('active')
    }
  });
  $('.sortable').disableSelection();

})


function postYourAdd () { var iframe = $('#iframeid'); iframe.attr('src', iframe.data('src'));
$('.slide-video').show();
$('.youtubeThmbTriger').hide();
}


//nexaworld popup setting for close open after 24 hrs for nexaworld url clicked never open
var subscribePopupCookie = getCookie('subscribePopupCookie');
 var subscribePopupCookieNever = getCookie('subscribePopupCookieNever');

if(subscribePopupCookieNever){
  $('#myModalAuto_360_Open').modal('hide');
}else{
  if(subscribePopupCookie){
    $('#myModalAuto_360_Open').modal('hide');
  }else{
    setTimeout(function() {
      $('#myModalAuto_360_Open').modal('show');
    }, 17000);
  }
}

//Setting cookie for one day and never
function setCookiepopup(name, value, hours) {
  if (hours)
  {
      var date = new Date();
      date.setTime(date.getTime()+(hours*60*60*1000));
      var expires = '; expires='+date.toGMTString();
  }
  else
  {
      var expires = '';
  }
  document.cookie = name+'='+value+expires+'; path=/';
}

$(document).on('click', '#myModalAuto_360_Open .modal-content .close', function() {
  setCookiepopup('subscribePopupCookie','true',24);
});

$(document).on('click', '#myModalAuto_360_Open .nexahubPopup p a', function() {
  setCookiepopup('subscribePopupCookieNever','true',50000);
});

$(document).on('click', '#myModalAuto_360_Open .nexaworPopupSlider .owl-stage .item .card-main-img a img', function() {
  setCookiepopup('subscribePopupCookieNever','true',50000);
});

$(document).on('click', '#myModalAuto_360_Open .card-body .card-title a', function() {
  setCookiepopup('subscribePopupCookieNever','true',50000);
});

$(document).on('click', '#myModalAuto_360_Open .card-body a.nexahub_button', function() {
  setCookiepopup('subscribePopupCookieNever','true',50000);
});





$(document).ready(function() {

  var sync1 = $('#sync1');
  var sync2 = $('#sync2');
  var slidesPerPage = 4; //globaly define number of elements per page
  var slidesPerPageMb = 2; //globaly define number of elements per page
  var syncedSecondary = true;

  sync1.owlCarousel({
    items : 1,
    slideSpeed : 2000,
    nav: true,
    autoplay: false,
    dots: true,
    loop: true,
    responsiveRefreshRate : 200,

  }).on('changed.owl.carousel', syncPosition);

  sync2
    .on('initialized.owl.carousel', function () {
      sync2.find('.owl-item').eq(0).addClass('current');
    })
    .owlCarousel({
    items : slidesPerPage,
    dots: true,
    nav: true,
    smartSpeed: 200,
    slideSpeed : 500,
    slideBy: slidesPerPage, //alternatively you can slide by 1, this way the active slide will stick to the first item in the second carousel
    responsiveRefreshRate : 100,
    responsive: {
      0: {
        items: slidesPerPageMb,
        slideBy: slidesPerPageMb,
      },
  
      600: {
        items: slidesPerPageMb,
        slideBy: slidesPerPageMb,
      },
  
      1024: {
        items: slidesPerPage,
        slideBy: slidesPerPage,
      },
  
      1366: {
        items: slidesPerPage,
        slideBy: slidesPerPage,
      }
    }
  }).on('changed.owl.carousel', syncPosition2);

  function syncPosition(el) {
    //if you set loop to false, you have to restore this next line
    //var current = el.item.index;
    
    //if you disable loop you have to comment this block
    var count = el.item.count-1;
    var current = Math.round(el.item.index - (el.item.count/2) - .5);
    
    if(current < 0) {
      current = count;
    }
    if(current > count) {
      current = 0;
    }
    
    //end block

    sync2
      .find('.owl-item')
      .removeClass('current')
      .eq(current)
      .addClass('current');
    var onscreen = sync2.find('.owl-item.active').length - 1;
    var start = sync2.find('.owl-item.active').first().index();
    var end = sync2.find('.owl-item.active').last().index();
    
    if (current > end) {
      sync2.data('owl.carousel').to(current, 100, true);
    }
    if (current < start) {
      sync2.data('owl.carousel').to(current - onscreen, 100, true);
    }
  }
  
  function syncPosition2(el) {
    if(syncedSecondary) {
      var number = el.item.index;
      sync1.data('owl.carousel').to(number, 100, true);
    }
  }
  
  sync2.on('click', '.owl-item', function(e){
    e.preventDefault();
    var number = $(this).index();
    sync1.data('owl.carousel').to(number, 300, true);
  });
});


$(document).ready(function() {
  $('.whatsNewSlideSection .owl-carousel').owlCarousel({
    items: 1,
    nav: true,
    loop: true,
    dots:true,
    margin: 0,
    autoplay:true,
    responsiveClass: true,
    })
});

$('.pcThumbSlider.owl-carousel').owlCarousel({
  loop: false,
  margin: 12,
  nav: false,
  autoplay: false,
  autoplayHoverPause: false,
  responsive: {
    0: {
      items: 2
    },
    600: {
      items: 2
    },
    1000: {
      items: 4
    }
  }
})




$(document).on('click', '.pcThumbSlider .thubmVideoTab', function() {

  $('.pcThumbSlider .item').removeClass('active');
  $(this).addClass('active');
  var id = $(this).data('id');
  $('.balenoVideoSec .item').hide();
  $('#' + id).show();
});



$(function () {
  $('.slot-block-close').click(function () {
      $('#collapseExample, #collapseExample1, #collapseExample2').removeClass('show');
  })

  $('.accordion-custom .card .card-header').click(function () {
      $('.accordion-custom .card .card-header').removeClass('current')
      $(this).addClass('current')
  })

})


  $(document).on('click', '.pcThumbSlider .item', function() {
    var videoSrc = $('#youtube-video1').attr('src'); 
    $('#youtube-video1').attr('src',''); 
    $('#youtube-video1').attr('src',videoSrc);
  
    videoSrc = $('#youtube-video2').attr('src'); 
    $('#youtube-video2').attr('src',''); 
    $('#youtube-video2').attr('src',videoSrc);
  
    videoSrc = $('#youtube-video3').attr('src'); 
    $('#youtube-video3').attr('src',''); 
    $('#youtube-video3').attr('src',videoSrc);
  
    videoSrc = $('#youtube-video4').attr('src'); 
    $('#youtube-video4').attr('src',''); 
    $('#youtube-video4').attr('src',videoSrc);
  })


    // $(document).on("click", ".pcThumbSlider .item", function() {
      
    //   var videoSrc = $("#youtube-video1").attr("src"); 
    //   $("#youtube-video1").attr("src",""); 
    //   $("#youtube-video1").attr("src",videoSrc);
    // })


//     $(document).on("click", ".card2show", function() {
//       $("#card2 .test-drive-remove").removeClass("active")
//       $("#card1 .heading_1").show()
//       $("#card1 .heading_1 button").addClass("collapsed")
//       $(".heading_2").addClass("current")
//       $(".heading_3").removeClass("current")
//       $("#test-drive1").removeClass("show")
//       $("#test-drive2").addClass("show")
//       $("#card2").show()
//  $(document).find(".Head2Sec").show();
//     });

      // $(document).on("click", ".card3show", function() {
      //   $("#card2 .test-drive-remove").addClass("active")
      //   //$("#card1 .heading_1").show()
      //   $("#test-drive2").removeClass("show")
      //   $(".heading_3").addClass("current")
      //   $(".heading_2").removeClass("current")
      //   //$("#test-drive1").removeClass("show")
      //   $("#test-drive3").addClass("show")
      //   $("#card3").show()
      //   $(document).find(".Head3Sec").show();
      // });

      //   document.querySelector('.card2show').addEventListener('click', () => {
      //   document.querySelector('#card1 .heading_1').style.display = 'block';
      //   document.querySelector('#card1 .heading_1 button').classList.add('collapsed')
      //   document.querySelector('.heading_2').classList.add('current')
      //   document.querySelector('.heading_3').classList.remove('current')
      //   document.querySelector('#test-drive1').classList.remove('show')
      //   document.querySelector('#test-drive2').classList.add('show')
      //   var element = document.querySelector('#card2');
      //   element.style.display = 'block';
      // });

      // document.querySelector('.card3show').addEventListener('click', () => {
      //   document.querySelector('#test-drive2').classList.remove('show')
      //   document.querySelector('.heading_3').classList.add('current')
      //   document.querySelector('.heading_2').classList.remove('current')
      //   document.querySelector('#test-drive3').classList.add('show')
      //   var element1 = document.querySelector('#card3');
      //   element1.style.display = 'block';
      // });


        $(document).on('click', '.myVideoPopupSec button.close', function() {
          var videoSrc = $('#mssfYoutube-video').attr('src'); 
          $('#mssfYoutube-video').attr('src',''); 
          $('#mssfYoutube-video').attr('src',videoSrc);
        })


        $(document).on('click','#carouselExampleIndicators a img', function() {
    var ImageName = $(this).attr('src').split('/').pop().split('.').slice(0, -1).join('.');
    var event = "Top Banner";
    var eventCategory = "Nexa Homepage Top Banner";
    var eventAction = "Click";
    var eventLabel = "Participate Now-"+ ImageName ;
    CommonCDPtracking(event,eventCategory,eventAction,eventLabel);
           }); 


           //Nexa Social CDP tAGS
$(document).on('click','.socialpost .socialheader a', function() {
  var HeadeType = $('.nexasocialtabs  a.active').text().trim();
      if(HeadeType=='ALL'){
        var LabelText  = $(this).text().trim();
      var event = "Nexa on Social";
      var eventCategory = "Home-Nexa on social-All";
      var eventAction = "Click";
      var eventLabel = LabelText;
      CommonCDPtracking(event,eventCategory,eventAction,eventLabel);
          
      }else if(HeadeType=='Twitter'){
        var LabelText  = $(this).text().trim();
      var event = "Nexa on Social";
      var eventCategory = "Home-Nexa on social-Twitter";
      var eventAction = "Click";
      var eventLabel = LabelText;
      CommonCDPtracking(event,eventCategory,eventAction,eventLabel);
          
      }else if(HeadeType=='Facebook'){
        var LabelText  = $(this).text().trim();
      var event = "Nexa on Social";
      var eventCategory = "Home-Nexa on social-Facebook";
      var eventAction = "Click";
      var eventLabel = LabelText;
      CommonCDPtracking(event,eventCategory,eventAction,eventLabel);
          
    }else if(HeadeType=='Youtube'){
    var LabelText  = $(this).text().trim();
      var event = "Nexa on Social";
      var eventCategory = "Home-Nexa on social-Youtube";
      var eventAction = "Click";
      var eventLabel = LabelText;
      CommonCDPtracking(event,eventCategory,eventAction,eventLabel);

    }
   });

   $('.youtubedetailbox .youtubethumb a img').click(function(e){
    var LabelText  = $(this).parents('.socialpost').find('h5').text().trim();
    var event = "Nexa on Social";
    var eventCategory = "Home-Nexa on social-Youtube";
    var eventAction = "Click";
    var eventLabel = LabelText;
    CommonCDPtracking(event,eventCategory,eventAction,eventLabel);
});
           

$(document).find('.nexasocialtabs nav div#nav-tab a').click(function(){
  var LabelText  = $(this).text().trim();
  var event = "Nexa on Social";
  var eventCategory = "Home-Nexa on social";
  var eventAction = "Click";
  var eventLabel = LabelText;
  CommonCDPtracking(event,eventCategory,eventAction,eventLabel); 
});


$(document).ready(function(){
  $('#Name').on('keypress', function (event) {
    var regex = new RegExp('^[a-zA-Z ]+$');
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    if (!regex.test(key)) {
      event.preventDefault();
      return false;
    }
  });
  $('.Name').on('keypress', function (event) {
    var regex = new RegExp('^[a-zA-Z ]+$');
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    if (!regex.test(key)) {
      event.preventDefault();
      return false;
    }
  });
  $('.name').on('keypress', function (event) {
    var regex = new RegExp('^[a-zA-Z ]+$');
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    if (!regex.test(key)) {
      event.preventDefault();
      return false;
    }
  });
  $('#name').on('keypress', function (event) {
    var regex = new RegExp('^[a-zA-Z ]+$');
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    if (!regex.test(key)) {
      event.preventDefault();
      return false;
    }
  });
    
  
  if($('input#Name').length>0){
    $('input#Name').bind('input', function() {
      var c = this.selectionStart,
          r = /[^a-zA-Z ]/gi,
          v = $(this).val();
      if(r.test(v)) {
        $(this).val(v.replace(r, ''));
        c--;
      }
      this.setSelectionRange(c, c);
    });
  }
  
  if($('input#name').length>0){
    $('input#name').bind('input', function() {
      var c = this.selectionStart,
          r = /[^a-zA-Z ]/gi,
          v = $(this).val();
      if(r.test(v)) {
        $(this).val(v.replace(r, ''));
        c--;
      }
      this.setSelectionRange(c, c);
    });
  }
  
  if($('input.Name').length>0){
    $('input.Name').bind('input', function() {
      var c = this.selectionStart,
          r = /[^a-zA-Z ]/gi,
          v = $(this).val();
      if(r.test(v)) {
        $(this).val(v.replace(r, ''));
        c--;
      }
      this.setSelectionRange(c, c);
    });
  }
  
  if($('input.name').length>0){
    $('input.name').bind('input', function() {
      var c = this.selectionStart,
          r = /[^a-zA-Z ]/gi,
          v = $(this).val();
      if(r.test(v)) {
        $(this).val(v.replace(r, ''));
        c--;
      }
      this.setSelectionRange(c, c);
    });
  }
  
  
  });
  
//Inline Ebrochure & Car manual
$('#SubMenuId12 a').one('mouseenter', function() {
  var LiTagFirsturls = $('#Librochure').val();
  var LiTagSecondurls = $('#LiCarManual').val();
  var LiTagFirstName = $('#Librochure').attr('data-name');
  var LiTagSecondName = $('#LiCarManual').attr('data-name');
  var DataMsilEvenr ="return DataLayerMSILDL.Push('','Top menu Navigation', 'click', 'Buyer Guide - Services &amp; Parts - E-Brochure');"
  var CarManualDataMsilEvenr ="return DataLayerMSILDL.Push('','Top menu Navigation', 'click', 'Buyer Guide - Services &amp; Parts - Car Manual');"
  $('#InlineBuyerGuidLI').append('<a href="'+LiTagFirsturls+'" onclick="'+DataMsilEvenr+'">'+LiTagFirstName+'</a>' +' | '+ '<a href="'+LiTagSecondurls+'" onclick="'+CarManualDataMsilEvenr+'">'+LiTagSecondName+'</a>')    
});

//Car Manual
$(document).find('.parentBrochure ul li a').click(function(){
  var Url = $(this).attr('href');
  var ModelType = '';
     if (Url.indexOf("baleno") > -1) {
      ModelType='Baleno';
      }else if (Url.indexOf("ciaz") > -1) {
        ModelType='Ciaz';
      }else if (Url.indexOf("ignis") > -1) {
        ModelType='Ignis';
      }else if (Url.indexOf("s-cross") > -1) {
        ModelType='S-Cross';
      }else if (Url.indexOf("xl6") > -1) {
        ModelType='Xl6';
      }else if (Url.indexOf("grand-vitara") > -1) {
        ModelType='Grand-Vitara';
      }
      var event = "Car Manual";
      var eventCategory = "Nexa Car Manual - "+ModelType;
      var eventAction = "Click";
      var eventLabel = $(this).text();
      CommonCDPtracking(event,eventCategory,eventAction,eventLabel); 
  });



$(document).find('.parentBrochure .carimagebox img').click(function(){

  var Url = $(this).attr('title');
      var event = "Car Manual";
      var eventCategory = "Nexa Car Manual";
      var eventAction = "Click";
      var eventLabel = Url;
      CommonCDPtracking(event,eventCategory,eventAction,eventLabel); 
  });

$(function () {
    if(window.location.pathname.toLocaleLowerCase().replace('/','').indexOf('suzuki-connect')==0)
    {$('.knowMoreSec').hide()}
    
    $('.faqleftTab ul li').click(function () {
        $('.faqleftTab ul li').removeClass('active');
        $(this).addClass('active');
        $('.sconnectAccordion').hide();
        $('.sconnectAccordion:eq(' + $(this).index() + ')').show();

    })

    $('.sConnectHighlights li').click(function () {
        $('.hightlightscar').hide();
        $('.hightlightscar:eq(' + $(this).index() + ')').show();

    })

    var scnnct = $('#form-scnnct').validate({
        rules: {
            Name: {
                required: true,
                maxlength: 30,
                name_regex: /^[A-z]*((-|\s)*[A-z])*$/g
            },
            Email: {
                required: true,
                email: true,
                maxlength: 100,
                email_regex: /^(([^<>()[\]\\.,;:\s@\']+(\.[^<>()[\]\\.,;:\s@\']+)*)|(\'.+\'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/igm
            },
            Mobile: {
                required: true,
                minlength: 10,
                maxlength: 10,
                mobile_regex: /^[^0-5]\d{9}$/,
                number: true
            },
            RegistrationNumber: {
                required: true,
                //regis_regex: /[A-Za-z][A-Za-z][0-9][0-9][A-Za-z ][A-Za-z][0-9][0-9][0-9][0-9]$/
                regis_regex:/([A-Z]{2,3})(\d{3,4})|([A-Z]{2,3})\d{2}[A-Z]{1,2}\d{1,4}/g
            },
            IsDisclaimerAccepted: 'required',
            Otp: {
                required: true,
                minlength: 4,
                maxlength: 4
            },
            State: {
                required: true
            },
            City: {
                required: true
            },
            Dealer: {
                required: true
            }
        },
        messages: {
            Name: $('#form-scnnct').find('#Name').attr('data-error'),
            Email: $('#form-scnnct').find('#Email').attr('data-error'),
            Mobile: $('#form-scnnct').find('#Mobile').attr('data-error'),
            IsDisclaimerAccepted: $('#form-scnnct').find('#IsDisclaimerAccepted').attr('data-error'),
            Otp: $('#form-scnnct').find('#Otp').attr('data-error'),
            RegistrationNumber: $('#form-scnnct').find('#RegistrationNumber').attr('data-error'),
            State: $('#form-scnnct').find('#State').attr('data-error'),
            City: $('#form-scnnct').find('#City').attr('data-error'),
            Dealer: $('#form-scnnct').find('#Dealer').attr('data-error')
        },
        errorElement: 'em',
        errorPlacement: function (error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');
            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function (element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
        },
        unhighlight: function (element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function (form) {
            form.submit();
        }
    });

    var $inputEmailSconnect = $('#form-scnnct #Email');
$inputEmailSconnect.keypress(function(e) {
  var max = 99;
  if ($inputEmailSconnect.val().length > max) {
    $inputEmailSconnect.val($inputEmailSconnect.val().substr(0, max));
  }
  var key = e.keyCode;
  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
  if (!returnn) {
  return false;
  }
});    

    var interval_sconnect;
    function OtpTimer_sconnect() {
        var count = 90;
        clearInterval(interval_sconnect);
        interval_sconnect = setInterval(function () {
            $('#count').html(count);
            count--;
            if (count === 0) {
                clearInterval(interval_sconnect);
                $('#count').html('');
                $('#counter').css('display', 'none');
                $('.resend0_sconnect').css('pointer-events', 'inherit');
                $('.resend0_sconnect').css('color', 'red');
            }
        }, 1000);
    }

    $('.resend0_sconnect').click(function() {		
		var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', $('#form-scnnct').serialize());
		$.ajax(rowdata).done(function(response) {
			if (response.IsSuccess) {
                $('.rfiotperror').hide();
				$('.resend0_sconnect').css('pointer-events', 'none');
				$('#counter').css('display', 'block');
				OtpTimer_sconnect();
				$('.resend0_sconnect').css('color', 'grey');
			} else {}
		}).error(function(err) {});
    });

    $('.open1_sconnect').click(function() {
		if (scnnct.form()) {
			var otpdata = $('#myModal_sconnect').find('#Otp').val();
			var data = $('#form-scnnct').serialize() + '&Otp=' + otpdata;
            var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
            var form_text = $(this).data('value').toLowerCase();
            var rowdata2;
            if(form_text == 'sconnectknowprice')
            {
                rowdata2 = PrepareRequest('/api/sitecore/suzukiconnect/SaveRevealData', {
                    'Name': $('#form-scnnct').find('#Name').val(),
                    'Mobile': $('#form-scnnct').find('#Mobile').val(),
                    'Email': $('#form-scnnct').find('#Email').val(),
                    'OTP': otpdata
                });
            }
            else{
                rowdata2 = PrepareRequest('/api/sitecore/suzukiconnect/savedatasconnect', JSON.stringify({
                    'Name': $('#form-scnnct').find('#Name').val(),
                    'Mobile': $('#form-scnnct').find('#Mobile').val(),
                    'Email': $('#form-scnnct').find('#Email').val(),
                    'RegNo': $('#form-scnnct').find('#RegistrationNumber').val(),
                    'VIN': '',
                    'City': $('#form-scnnct').find('#City').val(),
                    'Dealer': $('#form-scnnct').find('#Dealer').val(),
                    'OTP': otpdata
                }));
            }
			
			$.ajax(rowdata).done(function(response) {
				if (response.IsSuccess) {
					$('.rfiotperror').hide();
					$.ajax(rowdata2).done(function(response2) {
                        if(response2.status)
                        {
                            if(form_text == 'sconnectknowprice')
                            {
                                $('#myModal_sconnect').modal('hide');
                                $('#myModalPricelevel').modal('show');
                            }
                            else{
                                DataLayerMSILDL_Common.Push('suzuki_connect_form', 'Suzuki Connect- Register your interest', 'submit', 'sign in -'+$('#form-scnnct').find('#City').val());
                                $('#myModal_sconnect').modal('hide');
                                $('#form-scnnct').hide();
                                $('#sf-thankyou-sconnect').show();
                            }
                        }
                        else{
                           alert(response2.message);
                        }
                        
						
					}).error(function(err) {
						
					});
				} else {
					$('.rfiotperror').show();
				}
			}).error(function(err) {
				
			});
		}
    });


    $('.submitsconnect').click(function () {
        if (scnnct.form()) {
            var data = $(this).closest('form').serialize();
            var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function(response) {
				if (response.IsSuccess) {
                    $('.verifyotp').val('');
                    $('.rfiotperror').hide();
					OtpTimer_sconnect();
					$('#myModal_sconnect').modal('show');
					$('.resend0_sconnect').css('pointer-events', 'none');
					$('#counter').css('display', 'block');
                    $('.resend0_sconnect').css('color', 'grey');
                
				} else {}
			}).error(function(err) {
                // $('.verifyotp').val('');
                // $('.rfiotperror').hide();
                // OtpTimer_sconnect();
                // $('#myModal_sconnect').modal('show');
                // $('.resend0_sconnect').css('pointer-events', 'none');
                // $('#counter').css('display', 'block');
                // $('.resend0_sconnect').css('color', 'grey');
            });
        }

    })
})

'use strict';
(function () {
    ra.reviewsseemore = {
        settings: {
            target: '.mod-reviewsseemore'
        },
        init: function () {
            this.bindMoreReviews();
        },
        bindMoreReviews: function () {
            var visible3, reviewsvisible = 3;
            $('.videoBoxes .videoBox:lt(' + reviewsvisible + ')').show();
            $('.loadmoreBtn').click(function () {
                visible3 = $('.videoBoxes .videoBox:visible').length + 3;
                $('.videoBoxes .videoBox:lt(' + visible3 + ')').show();
                if (visible3 >= $('.videoBoxes .videoBox').length) {
                    $(this).hide();
                }
            });
        }
    };
}(ra));
'use strict';
var DataLayerMSILDL = (function() {
    var Push = function(event, eventCategory, eventAction, eventLevel) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'user_action_mobile' : 'user_action',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });

        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
         }, 'event_nexa');

        if(eventLevel.toLowerCase() == 'book a test drive')
        {
            tdSubmit({
                'eventCategory': 'Book Test Drive',
                'eventAction': 'Click',
                'eventLabel': 'BTD',
             }, 'event_nexa');
        }

        var str = eventLevel.toLowerCase();
        var containsFoo = str.indexOf('register for interest') >= 0; // true
        if(containsFoo)
        {
            tdSubmit({
                'eventCategory':eventLevel,
                'eventAction': 'Click',
                'eventLabel': eventLevel,
             }, 'event_nexa');
        }

        var str = eventLevel.toLowerCase();
        var containsFoo = str.indexOf('book a showroom visit') >= 0; // true
        if(containsFoo)
        {
            tdSubmit({
                'eventCategory':'e-Brochure',
                'eventAction': 'Click',
                'eventLabel': 'e-Brochure',
             }, 'event_nexa');
        }

    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_Form = (function() {
    var Push = function(event, eventCategory, eventAction, eventLevel) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'form_fill_action_mobile' : 'form_fill_action',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }

    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission = (function() {
    var Push = function(eventCategory, eventAction, eventLabel, carmodel, userid) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'form_fill_action_mobile' : 'form_fill_action',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_car_model': carmodel,
            'userID': calcMD5(userid),
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var SaveHeroBannerInCookies = (function() {
    var Push = function() {
        var homePageActiveSlide;
        homePageActiveSlide = $('.carousel-indicators').find('.active').attr('data-slide-to');
        setCookie('HomePageActiveSlide', homePageActiveSlide);
    }

    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Type = (function() {
    var Push = function(eventCategory, eventAction, eventLabel, carmodel, userid, formtype) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'form_fill_action_mobile' : 'form_fill_action',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_car_model': carmodel,
            'userID': calcMD5(userid),
            'Formtype': formtype,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Calculator = (function() {
    var Push = function(eventCategory, eventAction, eventLabel, carmodel, variant) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'form_fill_action_mobile' : 'form_fill_action',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_car_model': carmodel,
            'userID': '',
            'cd_model_variant_selected': variant,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Ebook_step1 = (function() {
    var Push = function(eventCategory, eventAction, eventLabel, cd_pagelevel) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_pagelevel': cd_pagelevel,
            'userID': '',
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Ebook_step2 = (function() {
    var Push = function(eventCategory, eventAction, eventLabel, cd_pagelevel,cd_dealer_selected,cd_location) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_pagelevel': cd_pagelevel,
            'cd_dealer_selected': cd_dealer_selected,
            'cd_location':cd_location,
            'userID': '',
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Ebook_step3 = (function() {
    var Push = function(eventCategory, eventAction, eventLabel, cd_pagelevel,cd_carmodel,cd_model_variant_selected,cd_dealer_selected,cd_location) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_pagelevel': cd_pagelevel,
            'cd_carmodel':cd_carmodel,
            'cd_model_variant_selected':cd_model_variant_selected,
            'cd_dealer_selected': cd_dealer_selected,
            'cd_location':cd_location,
            'userID': '',
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Ebook_step4 = (function() {
    var Push = function(eventCategory, eventAction, eventLabel, cd_pagelevel,cd_carmodel,cd_model_variant_selected,cd_dealer_selected,cd_variant_color_selected,cd_location) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event': (isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_pagelevel': cd_pagelevel,
            'cd_carmodel':cd_carmodel,
            'cd_model_variant_selected':cd_model_variant_selected,
            'cd_dealer_selected': cd_dealer_selected,
            'cd_variant_color_selected':cd_variant_color_selected,
            'cd_location':cd_location,
            'userID': '',
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_Common = (function() {
    var Push = function(event, eventCategory, eventAction, eventLevel) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });

        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_Common_WithUsrID = (function() {
    var Push = function(event, eventCategory, eventAction, eventLevel,userid) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
            'userID': (userid)?calcMD5(userid):'',
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });

        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_Loyalty = (function() {
    var Push = function(event, eventCategory, eventAction, eventLabel, userid, loyalty_number) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,            
            'userID': calcMD5(userid),
            'loyalty_number': loyalty_number,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_Loyalty2 = (function() {
    var Push = function(event, eventCategory, eventAction, eventLabel) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();

var CDP_Loyalty = (function() {
    var Push = function(eventCategory, eventAction, eventLabel) {
        msildl.push({
            'event': 'user_actions_loyalty',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_SurveyForm = (function() {
    var Push = function(event, eventCategory, eventAction, eventLevel) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
            'userID': '',
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });

        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_BTDForm = (function() {
    var Push = function(eventCategory, eventAction, eventLabel, carmodel, formtype, userid) {        
        msildl.push({
            'event': 'form_fill_actions',
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'cd_car_model': carmodel,
            'Formtype': formtype,
            'userID': calcMD5(userid),            
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_Banner = (function() {
    var Push = function(event, eventCategory, eventAction, eventLabel, carmodel) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'userID': '',
            'cd_car_model': carmodel,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });

        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLabel,
            'user_id': '',
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();


var DataLayerMSILDL_FormSubmission_Ebook_New_step1 = (function() {
    var Push = function(event,eventCategory, eventAction, eventLabel,userid, cd_pagelevel) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event':(isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory':eventCategory,
            'eventAction':eventAction,
            'eventLabel':eventLabel,
            'userID': (userid)?calcMD5(userid):'',
            'cd_pagelevel':cd_pagelevel,
            'cd_timestamp':Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Ebook_New_step2 = (function() {
    var Push = function(event,eventCategory, eventAction, eventLabel,userid,model,variant,colour) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event':(isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory':eventCategory,
            'eventAction':eventAction,
            'eventLabel':eventLabel,
            'userID': (userid)?calcMD5(userid):'',
            'cd_car_model':model,
            'cd_model_variant_selected':variant,
            'cd_variant_color_selected':colour,
            'cd_timestamp':Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Ebook_New_step3 = (function() {
    var Push = function(event,eventCategory, eventAction, eventLabel,userid,cd_pagelevel,cd_dealer_selected,cd_location) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event':(isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory':eventCategory,
            'eventAction':eventAction,
            'eventLabel':eventLabel,
            'userID': (userid)?calcMD5(userid):'',
            'cd_pagelevel':cd_pagelevel,
            'cd_dealer_selected': cd_dealer_selected,
            'cd_location':cd_location,
            'cd_timestamp':Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

var DataLayerMSILDL_FormSubmission_Ebook_New_step4 = (function() {
    var Push = function(event,eventCategory, eventAction, eventLabel,userid,cd_pagelevel,cd_location,model,variant,cd_dealer_selected) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event':(isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory':eventCategory,
            'eventAction':eventAction,
            'eventLabel':eventLabel,
            'userID': (userid)?calcMD5(userid):'',
            'cd_pagelevel':cd_pagelevel,
            'cd_location':cd_location,
            'cd_car_model':model,
            'cd_model_variant_selected':variant,
            'cd_dealer_selected': cd_dealer_selected,
            'cd_timestamp':Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();


var DataLayerMSILDL_FormSubmission_Ebook_New_step5 = (function() {
    var Push = function(event,eventCategory, eventAction, eventLabel,userid,cd_pagelevel,cd_location,model,variant,cd_dealer_selected,colour) {
        var isMobile = /iPhone|Android|iPad|iPod|webOS|BlackBerry/i.test(navigator.userAgent);
        msildl.push({
            'event':(isMobile) ? 'form submit ebook' : 'form submit ebook',
            'eventCategory':eventCategory,
            'eventAction':eventAction,
            'eventLabel':eventLabel,
            'userID': (userid)?calcMD5(userid):'',
            'cd_pagelevel':cd_pagelevel,
            'cd_location':cd_location,
            'cd_car_model':model,
            'cd_model_variant_selected':variant,
            'cd_dealer_selected': cd_dealer_selected,
            'cd_variant_color_selected':colour,
            'cd_timestamp':Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

//Video Section 
var DataLayerVideo_SectionBox = (function() {
    var Push = function(event, eventCategory, eventAction, eventLevel) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
            'userID': '',
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });

        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();

//Banner FMP CDP    
var DataLayerMSILDL_NEXA_FMP = (function() {
    var Push = function(event, eventCategory, eventAction, eventLevel) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventLabel': eventLevel,
            'eventAction': eventAction,
            'database': 'msil_src_prd'
        });

        tdSubmit({
            'eventCategory': eventCategory,
            'eventAction': eventAction,
            'eventLabel': eventLevel,
         }, 'event_nexa');
    }
    return {
        Push: Push
    }
})();


//MSR_Current_Traffic_And_Car    
var DataLayerMSILDL_MSR = (function() {
    var Push = function(event,eventCategory, eventAction, eventLevel) {
        msildl.push({
            'event': event,
            'eventCategory': eventCategory,
            'eventLabel': eventLevel,
            'eventAction': eventAction,
            'database': 'msil_src_prd'
        });
    }
    return {
        Push: Push
    }
})();


var DataLayerMSILDL_NexaWorld = (function() {
    var Push = function(event,eventAction, eventCategory, eventLabel) {
        msildl.push({
            'event': event,
            'eventAction': eventAction,
            'eventCategory': eventCategory,
            'eventLabel': eventLabel,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();

//GTM Code For BTD and RFI
var DataLayerMSILDL_BTDRFI = (function() {
    var Push = function(event,eventAction, eventCategory, eventLabel) {
        msildl.push({
            'event': event,
            'eventAction': eventAction,
            'eventCategory': eventCategory,
            'eventLabel': eventLabel,
            'cd_timestamp': Math.round(new Date().getTime() / 1000.0)
        });
    }
    return {
        Push: Push
    }
})();


// tdgtmsubmit code implemented
function tdSubmitGTM(values, table_name, database) {
    var td = new Treasure({
        host: 'in.treasuredata.com',
        writeKey: '10453/be37ccabb6c444301256c07406c8586de8b0b415',
        database: database,
        startInSignedMode: true
    });
    td.set('$global', 'td_global_id', 'td_global_id');
    td.trackPageview('pageview', googleSyncCallback);
    td.trackEvent(table_name, values);
}
'use strict';

/*scroll events handler*/
function scrollHandler() {
    var scroll = $(window).scrollTop();
    var sectionPadding = $(window).height() / 2;
    var $animation_elements = $('.Aos');
    var window_height = $(window).height();
    var window_top_position = scroll;
    var window_bottom_position = window_top_position + window_height;

    $.each($animation_elements, function () {
        var $element = $(this);
        var element_height = $element.outerHeight();
        var element_top_position = $element.offset().top;
        var element_bottom_position = element_top_position + element_height;

        //check to see if this current container is within viewport

        if (element_bottom_position >= window_top_position && element_top_position <= window_bottom_position) {
            $element.addClass('inview');
        } else {
            $element.removeClass('inview');
        }
    });
}

$(window).on('scroll', function () {
    window.requestAnimationFrame(scrollHandler);    
});

'use strict';
/*globals ra */
(function(){
    ra.fixedcomponent = {
        settings:{
          target:'.mod-fixedcomponent'
        },
        init:function(){
          this.bindFixedEvent();
        },
        bindFixedEvent : function(){
            setTimeout(function(){
                $('.fixedpopupbox').removeClass('active');
                $('.fixedsidebar').removeClass('active');
            },5000);
            $(document).on('click touch', function(event) {
                if (!$(event.target).parents().addBack().is('.dicebutton')) {
                $('.fixedpopupbox').removeClass('active');
                $('.fixedsidebar').removeClass('active');
                }
            });
            $('.dicebutton').on('click touch', function(event) {
                event.stopPropagation();
            });
        }
    };
}(ra));


'use strict';
/*globals ra */

(function() {
    /*Footer Menu*/
    $('#foot-menu').click(function() {
        $(this).parents('li').toggleClass('menuactive');
        $('.footermenubox').toggleClass('active');
    });

}(ra));
$(document).ready(function() {
    var v = $('#form-footerSubscribe').validate({
        rules: {
            email: {
                required: true,
                email: true,
                maxlength: 100,
                email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
            }
        },
        messages: {
            email: 'Please enter valid email.'
        },
        errorElement: 'em',
        errorPlacement: function(error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');
            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function(element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function(form) {
            form.submit();
        }
    });

    var $inputEmailSubscribe = $('#form-footerSubscribe #email');
	$inputEmailSubscribe.keypress(function(e) {
	  var max = 99;
	  if ($inputEmailSubscribe.val().length > max) {
		  $inputEmailSubscribe.val($inputEmailSubscribe.val().substr(0, max));
	  }
	  var key = e.keyCode;
	  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
	  if (!returnn) {
		return false;
	  }
	});

    var vMobile = $('#form-footerSubscribeMobile').validate({
        rules: {
            emailMobile: {
                required: true,
                email: true,
                maxlength: 100,
                email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
            }
        },
        messages: {
            emailMobile: 'Please enter valid email.'
        },
        errorElement: 'em',
        errorPlacement: function(error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');
            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function(element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function(form) {
            form.submit();
        }
    });

    var $inputEmailMob = $('#form-footerSubscribeMobile #emailMobile');
	$inputEmailMob.keypress(function(e) {
	  var max = 99;
	  if ($inputEmailMob.val().length > max) {
		  $inputEmailMob.val($inputEmailMob.val().substr(0, max));
	  }
	  var key = e.keyCode;
	  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
	  if (!returnn) {
		return false;
	  }
	});

    $('.subscribeformfooter').find('.thankyou_popupBtn').click(function() {
        if (v.form()) {
            //prepare data for sending 
            var rowdata = PrepareRequestMedia('/api/sitecore/API/Subscribe', JSON.stringify({ emailid: $('.subscribeformfooter').find('.email').val(), currentUrl: $(location).attr('href'), category: 'All' }), '');
            // send data to server
            $.ajax(rowdata)
                .done(function(response) {
                    var reso = JSON.parse(response);
                    if (reso.status) {
                        $('.thankyouSubscribeform').fadeIn();
                        $('body').addClass('bodylock');
                        $('#email').val('');
                    } else {
                        alert('something went wrong')
                    }
                })
                .error(function(err) {});
        }
    });

    $('.subscribeformfooterMobile').find('.thankyou_popupBtn').click(function() {
        if (vMobile.form()) {
            //prepare data for sending 
            var rowdata = PrepareRequestMedia('/api/sitecore/API/Subscribe', JSON.stringify({ emailid: $('.subscribeformfooterMobile').find('.email').val(), currentUrl: $(location).attr('href'), category: 'All' }), '');
            // send data to server
            $.ajax(rowdata)
                .done(function(response) {
                    var reso = JSON.parse(response);
                    if (reso.status) {
                        $('.thankyouSubscribeform').fadeIn();
                        $('body').addClass('bodylock');
                        $('#emailMobile').val('');

                    } else {
                        alert('something went wrong')
                    }
                })
                .error(function(err) {});
        }
    });

    // $('#form-footerSubscribe').find('.subscribebtn').on('click', function(event) {
    //     if (v.form()) {
    //         WEBFORM.init(['nexahub', 1237]);
    //         WEBFORM.loadForm();
    //         $('.subscribeformIn form').submit();
    //         DataLayerMSILDL_Form.Push('', 'Footer menu navigation', 'submit', 'subscribe');
    //     }
    // });

    // $('#form-footerSubscribeMobile').find('.subscribebtn').on('click', function(event) {
    //     if (vMobile.form()) {
    //         WEBFORM.init(['nexahubMobile', 1237]);
    //         WEBFORM.loadForm();
    //         $('.subscribeformInMobile form').submit();
    //         DataLayerMSILDL_Form.Push('', 'Footer menu navigation', 'submit', 'subscribe');
    //     }
    // });
});
'use strict';
/*globals ra */

//back-to-top component: scroll & click behaviour
(function(){
  ra.accessories = {
    settings:{
      target:'.mod-accessories'
    },
    init:function(){
      this.bindaccessoriesEvent();
    },
    bindaccessoriesEvent : function(){
      $('.various').fancybox({
        maxWidth	: 1040,
        //maxHeight	: 600,
        fitToView	: true,
        width		: '70%',
        //height		: '70%',
        autoSize	: false,
        closeClick	: false,
        //openEffect	: 'elastic',
        closeEffect	: 'none'
      });
    }
  };

  $('.genuineCategory_slider').owlCarousel({
    margin: 5,
    responsiveClass: true,
    navigation: true,
    pagination: true,
    loop: true,
    //autoplay: true,
    autoplayTimeout: 4000,
    autoplayHoverPause: false,
    dots: true,
    responsive: {
        0: {
            items: 2
        },
        480: {
            items: 2
        },
        768: {
            items: 3
        },
        1000: {
            items: 6
        }
    }
});

$('.genuineMobileslider').owlCarousel({
  margin: 0,
  responsiveClass: true,
  navigation: true,
  pagination: false,
  loop: true,
  //autoplay: true,
  autoplayTimeout: 4000,
  autoplayHoverPause: false,
  dots: false,
  responsive: {
      0: {
          items: 1
      },
      480: {
          items: 1
      },
      768: {
          items: 1
      },
      1000: {
          items: 1
      }
  }
});
var winWidth =$(window).width();
  if(winWidth<=992){
    $('.thanksAccsereesSlider').owlCarousel({
      margin: 10,
      responsiveClass: true,
      navigation: false,
      pagination: true,
      loop: true,
      //autoplay: true,
      autoplayTimeout: 4000,
      autoplayHoverPause: false,
      dots:true,
      responsive: {
          0: {
            items: 1
          },
          480: {
            items: 1
          },
          768: {
              items: 1
          },
          1000: {
            items: 1
          }
      }
  });  
  }

}(ra));




//Code for Geo-Location
$(document).ready(function () {
    $('#btnSuzukiConnectRegisterGoal').click(function () {
        var url = '/api/sitecore/CarTiles/SuzukiConnectRegisterGoal/';
        $.ajax({
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            url: url,
            cache: false,
            type: 'POST',
            success: function (response) {},
            error: function (response) {}
        });
    });

    //active previous banner
    SetActiveDotOnLoad();

    // load map based on city selection
    if ($('#ifrm').length > 0) {
        HideCityHeader();
        tdSubmit({
            'eventCategory': 'Showroom Locator',
            'eventAction': 'Click',
            'eventLabel': 'Showroom Locator',
        }, 'event_nexa');
    } else {
        ShowCityHeader();
    }

    //show city dropdown based on device (mobile or desktop)
    if (ra.cfg.isMobile) {
        //getlocation();
        if (ra.cfg.isIpaid && window.orientation == 90) {
            $('.topheader2').find('#mobile_city_header').empty();
            $('.topheader').find('#mobile_city_header').append('<select class="city_search_list" id="mycity" data-live-search="true"></select>');
        } else {
            $('.topheader').find('#mobile_city_header').empty();
            $('.topheader2').find('#mobile_city_header').append('<select class="city_search_list" id="mycity" data-live-search="true"></select>');
        }
    } else {
        $('.topheader2').find('#mobile_city_header').empty();
        $('.topheader').find('#mobile_city_header').append('<select class="city_search_list" id="mycity" data-live-search="true"></select>');
    }

    var currentCity;
    // Get model message form server
    var url = '/api/sitecore/API/GetAllCities';
    //Get All Cities
    $.ajax({
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        url: url,
        cache: false,
        type: 'GET',
        success: function (res) {
            res = JSON.parse(res);
            if (res.items.length) {
                var data = res.items;
                for (var i = 0; i < data.length; i++) {
                    if (data[i]['City Code'] && data[i]['City Name']) {
                        var option = $('<option></option>');
                        option.attr('value', data[i]['City Code']);
                        option.text(data[i]['City Name']);
                        $('.city_search_list').append(option);
                    } else {
                        var option = $('<option></option>');
                        option.attr('value', data[i].CityCode);
                        option.text(data[i].CityName);
                        $('.city_search_list').append(option);
                    }
                }
                $('.city_search_list').selectpicker();
                //initMap(data);
                withoutlocation();
            }

        },
        error: function (xhr, status, error) {
            var option = $('<option></option>');
            option.attr('value', '95');
            option.text('GURUGRAM');
            $('.city_search_list').append(option);

            var option = $('<option></option>');
            option.attr('value', '01');
            option.text('Ahmedabad');
            $('.city_search_list').append(option);

            var option = $('<option></option>');
            option.attr('value', '09');
            option.text('Delhi');
            $('.city_search_list').append(option);

            var option = $('<option></option>');
            option.attr('value', '19');
            option.text('Pune');
            $('.city_search_list').append(option);
            $('.city_search_list').selectpicker();
            withoutlocation();
        }
    });


    function withoutlocation() {
        localStorage.setItem('latlong', JSON.stringify({
            lat: '28.5677061',
            long: '77.2409407'
        }));
        var currentcity = JSON.parse(localStorage.getItem('city'));
        if (currentcity) {
            $('.city_search_list').selectpicker('destroy');
            $('.city_search_list').val(currentcity.city_code);
            $('.city_search_list').selectpicker();
            localStorage.setItem('city', JSON.stringify({
                city_code: currentcity.city_code,
                city_name: currentcity.city_name
            }));
            autoPopulateFormStateCity(currentcity.city_code,currentcity.city_name);
        } else {

            var psn_city_code = $('#mobile_city_header').attr('data-city-code');
            var psn_city_name = $('#mobile_city_header').attr('data-city-name');

            if (!psn_city_code && !psn_city_name) {
                psn_city_code = '08';
                psn_city_name = 'Delhi';
            }


            $('.city_search_list').selectpicker('destroy');
            $('.city_search_list').val(psn_city_code);
            $('.city_search_list').selectpicker();
            localStorage.setItem('city', JSON.stringify({
                city_code: psn_city_code,
                city_name: psn_city_name
            }));
            autoPopulateFormStateCity(psn_city_code,psn_city_name);
        }

        getPriceThroughAPI();
        // hide city header on locator
        if ($('#ifrm').length > 0) {
            HideCityHeader();
        } else {
            ShowCityHeader();
        }
    }

    function getlocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition, failposition);
        } else {
            console.log('not supported');
            localStorage.removeItem('latlongMobile');
        }

        function failposition(err) {
            console.log('failposition', err);
            localStorage.removeItem('latlongMobile');
        }

        function showPosition(position) {
            localStorage.setItem('latlongMobile', JSON.stringify({
                lat: position.coords.latitude,
                long: position.coords.longitude
            }));
        }
    }

    function initMap(citylist) {

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition, failposition);
        } else {
            localStorage.setItem('latlong', JSON.stringify({
                lat: '28.5677061',
                long: '77.2409407'
            }));
            $('.city_search_list').selectpicker('destroy');
            $('.city_search_list').val('95');
            $('.city_search_list').selectpicker();
            getPriceThroughAPI();
            // hide city header on locator
            if ($('#ifrm').length > 0) {
                HideCityHeader();
                Cityonlocator();
            } else {
                ShowCityHeader();
            }
        }

        function failposition(err) {
            localStorage.setItem('latlong', JSON.stringify({
                lat: '28.5677061',
                long: '77.2409407'
            }));
            $('.city_search_list').selectpicker('destroy');
            $('.city_search_list').val('95');
            $('.city_search_list').selectpicker();
            getPriceThroughAPI();
            // hide city header on locator
            if ($('#ifrm').length > 0) {
                HideCityHeader();
                Cityonlocator();
            } else {
                ShowCityHeader();
            }
        }

        function showPosition(position) {
            localStorage.setItem('latlong', JSON.stringify({
                lat: position.coords.latitude,
                long: position.coords.longitude
            }));
            var apikey = $('#g-key').val();
            if (apikey) {
                var GEOCODING = 'https://maps.googleapis.com/maps/api/geocode/json?&key=' + apikey + '&latlng=' + position.coords.latitude + '%2C' + position.coords.longitude + '&language=en';
                $.getJSON(GEOCODING).done(function (location) {
                    var add = location.results[0].formatted_address;
                    var value = add.split(',');
                    var count = value.length;
                    // country = value[count - 1];
                    // state = value[count - 2];
                    var currentCity = value[count - 3];
                    currentCity = currentCity.trim().toUpperCase();
                    //currentCity = location.results[0].address_components[3].long_name.toUpperCase();
                    var result = citylist.filter(function (obj) {
                        switch (currentCity) {
                            case 'GURUGRAM':
                                return obj.CityName === 'GURUGRAM';
                            case 'NEW DELHI':
                                return obj.CityName === 'DELHI';
                            default:
                                return obj.CityName === currentCity;
                        }
                    })[0];
                    $('.city_search_list').selectpicker('destroy');
                    if (result) {
                        $('.city_search_list').val(result.CityCode);
                    } else {
                        localStorage.setItem('latlong', JSON.stringify({
                            lat: '28.5677061',
                            long: '77.2409407'
                        }));
                        $('.city_search_list').val('95');
                    }

                    $('.city_search_list').selectpicker();
                    getPriceThroughAPI()
                    // hide city header on locator
                    if ($('#ifrm').length > 0) {
                        HideCityHeader();
                        Cityonlocator();
                    } else {
                        ShowCityHeader();
                    }
                })
            }
        }
    }
});
function setCookie(cname, cvalue) {

  var d = new Date();

  d.setTime(d.getTime() + (0.5 * 24 * 60 * 60 * 1000));

  var expires = 'expires=' + d.toUTCString();

  document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/;secure';

}

function getCookie(cname) {

  var name = cname + '=';

  var ca = document.cookie.split(';');

  for (var i = 0; i < ca.length; i++) {

    var c = ca[i];

    while (c.charAt(0) == ' ') {

      c = c.substring(1);

    }

    if (c.indexOf(name) == 0) {

      return c.substring(name.length, c.length);

    }

  }

  return '';

}
$(document).ready(function () {
  var dealerList = []; 
  var inp = document.getElementById('myInput');
  if(inp)
  {
    inp.value = '';
  }
  
  $('#myModal').on('shown.bs.modal', function (e) {
    if(inp)
    {
      inp.value = '';
    }
    $('.dealerBox').hide();
    $('.moreBtn a').hide();
    $('.notfound').hide();
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition, failposition);
    } else {
        getSearchdata();
    }

    function failposition(err) {
        getSearchdata();
    }

    function showPosition(position) {
      var posit = position.coords.latitude + ','+ position.coords.longitude;
      getDealerListNew(posit);
      getSearchdata();
      setPlaceName(position.coords.latitude,position.coords.longitude);
    }
  })
 
  $('.spedSectionDiv').on('click','a', function() {
      calldearler($(this).text());
  })

  $('.autocomplete').on('click','span', function() {
    inp.value = '';
    $('.dealerBox').hide();
    $('.moreBtn a').hide();
})

  
  function getDealerListNew(position) {
    var point = position.split(',');
    getData('/api/sitecore/API/GetDealerList?'+ 'lat='+point[0]+'&lng='+point[1]).then(function(response) {
    //getData('http://www.mocky.io/v2/5d78bd5f320000cfe2924405').then(function(response) {
      var res = JSON.parse(response).Table;
      //var res = response.Table;
       if(res.length)
       {
         $('.dealerBox').show();
         $('.notfound').hide();
         $('.spedSectionDiv').removeClass('active');
         $('.spedSectionDiv').empty();
         if(res.length > 3)
         {
          $('.moreBtn a').show();
          dealerList = res;
          for (var index = 0; index < 3; index++) {
            var element = res[index];
            if(element.VirtualNumber)
            {
              $(".spedSectionDiv").append('<a href="tel:'+element.VirtualNumber+'">'+element.ChannelLocation.trim()+', '+element.Distance+'<span><img src="/assets/images/mobile-locate-img.png" alt=""></span></a>');
            }
          }
         }
         else{
          $('.moreBtn a').hide();
          dealerList = [];
          for (var index = 0; index < res.length; index++) {
            var element = res[index];
            if(element.VirtualNumber)
            {
              $('.spedSectionDiv').append('<a href="tel:'+element.VirtualNumber+'">'+element.ChannelLocation.trim()+', '+element.Distance+'<span><img src="/assets/images/mobile-locate-img.png" alt=""></span></a>');
            }
          }
         }
      
       }
       else{
        $('.dealerBox').hide();
        $('.moreBtn a').hide();
        $('.notfound').show();
       }
    })
    .catch(function(err) {
    })
  }

  function getSearchdata() {
    var settings = {
      'async': true,
      'crossDomain': true,
      'url': 'https://outpost.mapmyindia.com/api/security/oauth/token',
      'method': 'POST',
      'data': {
        'grant_type': 'client_credentials',
        'client_id': '1lxkui3nHiSMtLUTHTrR9re4lP8Z2ZlwLZ7R3KV1GrPzEu4bBPmFQw==',
        'client_secret': 'uZ2iT2d4dGN45bJ3q2YVcSLEmbPJVo1v3FI_oyb_oKLORUO6CrvhMMGYBq_dN0To'
      }
    }
  
    $.ajax(settings).done(function (response) {
      inp.addEventListener('input', function (e) {
        var a, b, i, val = this.value, that = this;
        /*close any already open lists of autocompleted values*/
        closeAllLists();
        if (val.length) {
          if (val.length > 2) {
          $.ajax({
            data: 'text/json,application/json',
            contentType: 'application/json,text/json',
            dataType: 'jsonp',
            type: 'GET',
            crossDomain: true, 
            url: 'https://atlas.mapmyindia.com/api/places/search/json?query='+val+'&access_token='+response.access_token,
            error: function(d,msg) {
            alert('No Data For Search Query');
            },
            success: function (data) 
            { 
              /*create a DIV element that will contain the items (values):*/
              a = document.createElement('DIV');
              a.setAttribute('id', this.id + 'autocomplete-list');
              a.setAttribute('class', 'autocomplete-items');
              /*append the DIV element as a child of the autocomplete container:*/
              that.parentNode.appendChild(a);
              for(i=0;i<=data.suggestedLocations.length;i++)
              {
              if(data.suggestedLocations[i] != undefined){
                var textData = data.suggestedLocations[i];
                if(textData.placeAddress)
                {
                    /*check if the item starts with the same letters as the text field value:*/
                    /*create a DIV element for each matching element:*/
                    b = document.createElement('DIV');
                    /*make the matching letters bold:*/
                    b.innerHTML += textData.placeAddress;
                    /*insert a input field that will hold the current array item's value:*/
                    b.innerHTML += '<input type="hidden" value="' + textData.latitude +','+textData.longitude+ '">';
                    /*execute a function when someone clicks on the item value (DIV element):*/
                    b.addEventListener('click', function (e) {
                      /*insert the value for the autocomplete text field:*/
                      inp.value = $(this).text();
                      enterlocation(val, 'manual');
                      getDealerListNew(this.getElementsByTagName('input')[0].value);
                      /*close the list of autocompleted values,
                      (or any other open lists of autocompleted values:*/
                      closeAllLists();
                    });
                    a.appendChild(b);
                }
                
              }
              }
            } 
            });
          }
          else{
            return false;
          }
        }
        else{
          closeAllLists();
          return false;
        }

        function closeAllLists(elmnt) {
          /*close all autocomplete lists in the document,
          except the one passed as an argument:*/
          var x = document.getElementsByClassName('autocomplete-items');
          for (var i = 0; i < x.length; i++) {
            if (elmnt != x[i] && elmnt != inp) {
              x[i].parentNode.removeChild(x[i]);
            }
          }
        }
        /*execute a function when someone clicks in the document:*/
        document.addEventListener('click', function (e) {
          closeAllLists(e.target);
        });

      });
    });
  }

  function setPlaceName(lat,long) {
      $.ajax({
        data: 'text/json,application/json',
        contentType: 'application/json,text/json',
        dataType: 'jsonp',
        type: 'GET',
        crossDomain: true, 
        url: 'https://apis.mapmyindia.com/advancedmaps/v1/lz2e6x3ajvnaspjn2t6t9n64ccncx8fu/rev_geocode?'+ 'lat='+lat+'&lng='+long,
        error: function(d,msg) {
        alert('No Data For Search Query');
        },
        success: function (data) 
        { 
          if(data.results)
          {
             inp.value = data.results[0].formatted_address;
             enterlocation(data.results[0].formatted_address, 'auto');
          }
          
        }
      });
  }

  $(document).on('click', '.moreBtn a', function(e) { 
    $('.spedSectionDiv').addClass('active');
    $(this).hide();
    $('.spedSectionDiv').empty();
    for (var index = 0; index < dealerList.length; index++) {
      var element = dealerList[index];      
      if(element.VirtualNumber)
      {
        $('.spedSectionDiv').append('<a href="tel:'+element.VirtualNumber+'">'+element.ChannelLocation.trim()+', '+element.Distance+'<span><img src="/assets/images/mobile-locate-img.png" alt=""></span></a>');
      }
    }
  })
});

var hex_chr = '0123456789abcdef';

function rhex(num) {
    var str = '';
    for (var j = 0; j <= 3; j++) str += hex_chr.charAt((num >> (j * 8 + 4)) & 0x0F) + hex_chr.charAt((num >> (j * 8)) & 0x0F);
    return str;
}

function str2blks_MD5(str) {
    var nblk = ((str.length + 8) >> 6) + 1;
    var blks = new Array(nblk * 16);
    for (var i = 0; i < nblk * 16; i++) blks[i] = 0;
    for (var i = 0; i < str.length; i++) blks[i >> 2] |= str.charCodeAt(i) << ((i % 4) * 8);
    blks[i >> 2] |= 0x80 << ((i % 4) * 8);
    blks[nblk * 16 - 2] = str.length * 8;
    return blks;
}

function add(x, y) { var lsw = (x & 0xFFFF) + (y & 0xFFFF); var msw = (x >> 16) + (y >> 16) + (lsw >> 16); return (msw << 16) | (lsw & 0xFFFF); }

function rol(num, cnt) { return (num << cnt) | (num >>> (32 - cnt)); }

function cmn(q, a, b, x, s, t) { return add(rol(add(add(a, q), add(x, t)), s), b); }

function ff(a, b, c, d, x, s, t) { return cmn((b & c) | ((~b) & d), a, b, x, s, t); }

function gg(a, b, c, d, x, s, t) { return cmn((b & d) | (c & (~d)), a, b, x, s, t); }

function hh(a, b, c, d, x, s, t) { return cmn(b ^ c ^ d, a, b, x, s, t); }

function ii(a, b, c, d, x, s, t) { return cmn(c ^ (b | (~d)), a, b, x, s, t); }

function calcMD5(str) {
    var x = str2blks_MD5(str);
    var a = 1732584193;
    var b = -271733879;
    var c = -1732584194;
    var d = 271733878;
    for (var i = 0; i < x.length; i += 16) {
        var olda = a;
        var oldb = b;
        var oldc = c;
        var oldd = d;
        a = ff(a, b, c, d, x[i + 0], 7, -680876936);
        d = ff(d, a, b, c, x[i + 1], 12, -389564586);
        c = ff(c, d, a, b, x[i + 2], 17, 606105819);
        b = ff(b, c, d, a, x[i + 3], 22, -1044525330);
        a = ff(a, b, c, d, x[i + 4], 7, -176418897);
        d = ff(d, a, b, c, x[i + 5], 12, 1200080426);
        c = ff(c, d, a, b, x[i + 6], 17, -1473231341);
        b = ff(b, c, d, a, x[i + 7], 22, -45705983);
        a = ff(a, b, c, d, x[i + 8], 7, 1770035416);
        d = ff(d, a, b, c, x[i + 9], 12, -1958414417);
        c = ff(c, d, a, b, x[i + 10], 17, -42063);
        b = ff(b, c, d, a, x[i + 11], 22, -1990404162);
        a = ff(a, b, c, d, x[i + 12], 7, 1804603682);
        d = ff(d, a, b, c, x[i + 13], 12, -40341101);
        c = ff(c, d, a, b, x[i + 14], 17, -1502002290);
        b = ff(b, c, d, a, x[i + 15], 22, 1236535329);
        a = gg(a, b, c, d, x[i + 1], 5, -165796510);
        d = gg(d, a, b, c, x[i + 6], 9, -1069501632);
        c = gg(c, d, a, b, x[i + 11], 14, 643717713);
        b = gg(b, c, d, a, x[i + 0], 20, -373897302);
        a = gg(a, b, c, d, x[i + 5], 5, -701558691);
        d = gg(d, a, b, c, x[i + 10], 9, 38016083);
        c = gg(c, d, a, b, x[i + 15], 14, -660478335);
        b = gg(b, c, d, a, x[i + 4], 20, -405537848);
        a = gg(a, b, c, d, x[i + 9], 5, 568446438);
        d = gg(d, a, b, c, x[i + 14], 9, -1019803690);
        c = gg(c, d, a, b, x[i + 3], 14, -187363961);
        b = gg(b, c, d, a, x[i + 8], 20, 1163531501);
        a = gg(a, b, c, d, x[i + 13], 5, -1444681467);
        d = gg(d, a, b, c, x[i + 2], 9, -51403784);
        c = gg(c, d, a, b, x[i + 7], 14, 1735328473);
        b = gg(b, c, d, a, x[i + 12], 20, -1926607734);
        a = hh(a, b, c, d, x[i + 5], 4, -378558);
        d = hh(d, a, b, c, x[i + 8], 11, -2022574463);
        c = hh(c, d, a, b, x[i + 11], 16, 1839030562);
        b = hh(b, c, d, a, x[i + 14], 23, -35309556);
        a = hh(a, b, c, d, x[i + 1], 4, -1530992060);
        d = hh(d, a, b, c, x[i + 4], 11, 1272893353);
        c = hh(c, d, a, b, x[i + 7], 16, -155497632);
        b = hh(b, c, d, a, x[i + 10], 23, -1094730640);
        a = hh(a, b, c, d, x[i + 13], 4, 681279174);
        d = hh(d, a, b, c, x[i + 0], 11, -358537222);
        c = hh(c, d, a, b, x[i + 3], 16, -722521979);
        b = hh(b, c, d, a, x[i + 6], 23, 76029189);
        a = hh(a, b, c, d, x[i + 9], 4, -640364487);
        d = hh(d, a, b, c, x[i + 12], 11, -421815835);
        c = hh(c, d, a, b, x[i + 15], 16, 530742520);
        b = hh(b, c, d, a, x[i + 2], 23, -995338651);
        a = ii(a, b, c, d, x[i + 0], 6, -198630844);
        d = ii(d, a, b, c, x[i + 7], 10, 1126891415);
        c = ii(c, d, a, b, x[i + 14], 15, -1416354905);
        b = ii(b, c, d, a, x[i + 5], 21, -57434055);
        a = ii(a, b, c, d, x[i + 12], 6, 1700485571);
        d = ii(d, a, b, c, x[i + 3], 10, -1894986606);
        c = ii(c, d, a, b, x[i + 10], 15, -1051523);
        b = ii(b, c, d, a, x[i + 1], 21, -2054922799);
        a = ii(a, b, c, d, x[i + 8], 6, 1873313359);
        d = ii(d, a, b, c, x[i + 15], 10, -30611744);
        c = ii(c, d, a, b, x[i + 6], 15, -1560198380);
        b = ii(b, c, d, a, x[i + 13], 21, 1309151649);
        a = ii(a, b, c, d, x[i + 4], 6, -145523070);
        d = ii(d, a, b, c, x[i + 11], 10, -1120210379);
        c = ii(c, d, a, b, x[i + 2], 15, 718787259);
        b = ii(b, c, d, a, x[i + 9], 21, -343485551);
        a = add(a, olda);
        b = add(b, oldb);
        c = add(c, oldc);
        d = add(d, oldd);
    }
    return rhex(a) + rhex(b) + rhex(c) + rhex(d);
}
$(document).ready(function () {
    if ($('#form-fmpland1-brand').length) {
        // bootstrap datepicker
        $('.dateselector.date').datepicker({
            autoclose: true,
            format: 'dd-mm-yyyy',
            endDate: new Date(new Date().getFullYear() - 18, new Date().getMonth(), new Date().getDate()),
            defaultViewDate: new Date(new Date().getFullYear() - 18, new Date().getMonth(), new Date().getDate()),
        });
    }

    var fmpland1barnd = $('#form-fmpland1-brand').validate({
        rules: {
            Name: {
                required: true,
                maxlength: 30,
                name_regex: /^[A-Za-z]+$/
            },
            Mobile: {
                required: true,
                number: true,
                minlength: 10,
                maxlength: 10,
                mobile_regex: /^[^0-5]\d{9}$/
            },
            Email: {
                required: true,
                email: true,
                maxlength: 100,
                validateDomainName: true,
                email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
            },
            Otp: {
                required: true,
                number: true,
                minlength: 4,
                maxlength: 4
            },
            dob_land: {
                required: true,
                dob_regex:/^[0-9]{2}-[0-9]{2}-[0-9]{4}$/,
            },
            IsDisclaimerAccepted_brand: 'required'
        },
        messages: {
            Mobile: $('#form-fmpland1-brand').find('.Mobile').attr('data-error'),
            Otp: $('#form-fmpland1-brand').find('#Otp').attr('data-error'),
            Email: $('#form-fmpland1-brand').find('#Email').attr('data-error'),
            dob_land: $('#form-fmpland1-brand').find('#dob_land').attr('data-error'),
            Name: $('#form-fmpland1-brand').find('#Name').attr('data-error')
        },
        errorElement: 'em',
        errorPlacement: function (error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');
            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function (element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
            $('.landing_otperror').hide();
        },
        unhighlight: function (element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function (form) {
            form.submit();
        }
    });

    var $inputEmailFMP = $('#form-fmpland1-brand #Email');
	$inputEmailFMP.keypress(function(e) {
	  var max = 99;
	  if ($inputEmailFMP.val().length > max) {
		  $inputEmailFMP.val($inputEmailFMP.val().substr(0, max));
	  }
	  var key = e.keyCode;
	  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
	  if (!returnn) {
		return false;
	  }
	});

    $('#form-fmpland1-brand .Mobile').keydown(function(e) {
        if (e.keyCode == 13) {
          $( '.popupBtn1_brand' ).click();
        }
    });

    $('.popupBtn1_brand').click(function () {
        if (fmpland1barnd.form()) {
            $(this).attr('disabled', 'disabled');
            var that = this;
            deleteCookie('enquiry_details');
            deleteCookie('final_loanoffer');
            var rowdata = PrepareRequest('/api/sitecore/FMPAPI/SendOTP', 'Name=testuser&Email=testuser@gmail.com&' + $('#form-fmpland1-brand').serialize());
            $('.nfloaderMain').show();
            $.ajax(rowdata).done(function (response) {
                $('.nfloaderMain').hide();
                $('.landing_otperror').hide();
                response = JSON.parse(response);
                DataLayerMSILDL_Common.Push('user_action', 'nexa_finance offer form', 'click', 'continue button');
                $(that).removeAttr('disabled');
                if (response.status.toLowerCase() == 'success') {
                    $('#verifyPopup1').hide();
                    $('#verifyPopup2').show();
                    $('#verifyPopup3').hide();
                    OtpTimer_fnc_land();
                }
                else if (response.message.toLowerCase() == 'businessexception') {
                    if (response.errors) {
                        var newmsg = response.errors.map(function (elem) {
                            return elem.error_message;
                        }).join(', ');
                        alert(newmsg);
                        errorDataLayer(newmsg);
                    }
                    else {
                        alert(response.error_message);
                        errorDataLayer(response.error_message);
                    }
                }
                else {
                    alert(response.error_message);
                    errorDataLayer(response.error_message);
                }
            }).error(function (err) {
                $(that).removeAttr('disabled');
                $('.nfloaderMain').hide();
            });
        }
    });

    $('.popupBtn3_brand').click(function () {
        if (fmpland1barnd.form()) {
            var rowdata = {
                'name': $('#form-fmpland1-brand').find('#Name').val(),
                'mobile': $('#form-fmpland1-brand').find('.Mobile').val(),
                'email': $('#form-fmpland1-brand').find('#Email').val(),
                'dob': $('#form-fmpland1-brand').find('#dob_land').val(),
                'car_model':$('#HdnFinCarModelId').val(),
                'model_code':$('#HdnCarModelCode').val(),
                'city_code':$('#ddcity_fnc').find('option:selected').val(),
                'city_name':$('#ddcity_fnc').find('option:selected').text()
            }
            tdSubmit({
                name: convertAES($('#form-fmpland1-brand').find('#Name').val()),
                name_plain:$('#form-fmpland1-brand').find('#Name').val(),
                email: convertSHA($('#form-fmpland1-brand').find('#Email').val()),
                email_plain: $('#form-fmpland1-brand').find('#Email').val(),
                dob: convertAES($('#form-fmpland1-brand').find('#dob_land').val()),
                dob_plain:$('#form-fmpland1-brand').find('#dob_land').val()
            }, 'nexa_fmp_loan');
            DataLayerMSILDL_Common.Push('user_action', 'nexa_finance-PI submit', 'submit', 'submit PI');
            setDataInLocal('enquiry_details', JSON.stringify(rowdata));
            setCookie('enquiry_details', JSON.stringify(rowdata));
            window.location = '/nexa-finance/nexafinance-own-car';
        }
    });

    var enquery_data_land;
    $('.popupBtn2_brand').click(function () {
        if (fmpland1barnd.form()) {
            $(this).attr('disabled', 'disabled');
            var that = this;
            $('.nfloaderMain').show();
            var rowdata = PrepareRequest('/api/sitecore/FMPAPI/VerifyOTP', $('#form-fmpland1-brand').serialize());
            $.ajax(rowdata).done(function (response) {
                $('.nfloaderMain').hide();
                response = JSON.parse(response);
                $(that).removeAttr('disabled');
                if (response.status) {
                    removeDataInLocal('dealer_details');
                    tdSubmit({
                        'mobile': convertSHA($('#form-fmpland1-brand').find('.Mobile').val()),
                        'mobile_plain': $('#form-fmpland1-brand').find('.Mobile').val()
                    }, 'nexa_fmp_mobile_verify');
                    DataLayerMSILDL_Common.Push('user_action', 'nexa_finance offer form', 'submit', 'otp submit');
                    enquery_data_land = null;
                    if (response.enquiry_id) {
                        enquery_data_land = response;
                        if (response.loan_status == 10056 || response.loan_status == 10057) {
                            $('.no-brand').hide();
                            $('.yes-barnd').text('PROCEED');
                        }
                        else {
                            $('.no-brand').show();
                            $('.yes-barnd').text('YES');
                        }
                        $('#verifyPopup4').find('h6').html('You have an active finance journey for the car <strong>' + response.ModalName + '</strong>. Do you want to continue where you left off?')
                        $('#verifyPopup1').hide();
                        $('#verifyPopup2').hide();
                        $('#verifyPopup4').show();
                    }
                    else {
                        $('#verifyPopup1').hide();
                        $('#verifyPopup2').hide();
                        $('#verifyPopup3').show();
                    }
                }
                else if (response.message.toLowerCase() == 'businessexception') {
                    if (response.errors) {
                        var newmsg = response.errors.map(function (elem) {
                            return elem.error_message;
                        }).join(', ');
                        alert(newmsg);
                        errorDataLayer(newmsg);
                    }
                    else {
                        alert(response.error_message);
                        errorDataLayer(response.error_message);
                    }
                }
                else {
                    $('.landing_otperror').text(response.message);
                    $('.landing_otperror').show();
                    errorDataLayer(response.message);
                }
            }).error(function (err) {
                $(that).removeAttr('disabled');
                $('.nfloaderMain').hide();
            });
        }
    });

    $('.yes-barnd').click(function () {
        DataLayerMSILDL_Common.Push('user_action', 'nexa_active finance journey overlay', 'click', 'yes');
        if (enquery_data_land) {
            var rowdata = {
                'name': enquery_data_land.name,
                'email': enquery_data_land.email,
                'mobile': enquery_data_land.mobile,
                'dob': enquery_data_land.dob,
                'enquiry_id': enquery_data_land.enquiry_id,
                'city': enquery_data_land.city,
                'state': enquery_data_land.state,
                'dealer': enquery_data_land.dealer,
                'car_model': enquery_data_land.car_model,
                'car_variant': enquery_data_land.car_variant,
                'variant_code': enquery_data_land.variant_code,
                'model_code': enquery_data_land.model_code,
                'on_road_price': enquery_data_land.on_road_price,
                'isloanoffer': enquery_data_land.isloanoffer,
                'ex_showroom_price': enquery_data_land.ex_showroom_price,
                'color_code': enquery_data_land.color_code,
                'color_description': enquery_data_land.color_description,
                'color_indicator': enquery_data_land.color_indicator,
                'sub_employment_id':enquery_data_land.sub_employment_id,
                'residence_type' :enquery_data_land.residence_type,
                'employment_type':enquery_data_land.employment_type,
                'mspin': enquery_data_land.mspin,
                'downpayment':enquery_data_land.downpayment,
                'is_car_exchange':enquery_data_land.is_car_exchange,
                'dealer_discount': enquery_data_land.dealer_discount,
                'isCSD': enquery_data_land.customer_type_id,
                'customer_type_code': enquery_data_land.customer_type_code,
                'dealer_assisted': enquery_data_land.dealer_assisted,
                'dealer_assisted': enquery_data_land.dealer_assisted,
                'city_code':(enquery_data_land.city_code)?enquery_data_land.city_code:'08',
                'evaluated_price':enquery_data_land.evaluated_price,
                'pancard_available':enquery_data_land.pancard_available,
                'loan_expired':enquery_data_land.loan_expired,
                'page': 0
            }
            setDataInLocal('enquiry_details', JSON.stringify(rowdata));
            setDataInLocal('isEnquery', JSON.stringify({
                'isenquery': true,
                'enquiry_id': enquery_data_land.enquiry_id
            }));
            setCookie('enquiry_details', JSON.stringify(rowdata));
            if (enquery_data_land.financier_id) {
                setCookie('final_loanoffer', JSON.stringify({
                    'bank_name': enquery_data_land.bank_name,
                    'financier_logo': enquery_data_land.financier_logo,
                    'financier_name': enquery_data_land.financier_name,
                    'loan_amount': enquery_data_land.loan_amount,
                    'tenure': enquery_data_land.tenure,
                    'interest_rate': enquery_data_land.interest_rate,
                    'down_payment': enquery_data_land.down_payment,
                    'estimated_emi': enquery_data_land.estimated_emi,
                    'processing_fee': enquery_data_land.processing_fee,
                    'processing_fee_display': replacerupeesToRs(enquery_data_land.processing_fee_display),
                    'financier_id': enquery_data_land.financier_id,
                    'loan_type': enquery_data_land.loan_type,
                    'loan_application_id': enquery_data_land.loan_application_id
                }));
            }
            window.location = enquery_data_land.url;
        }
    });

    $('.no-brand').click(function () {
        DataLayerMSILDL_Common.Push('user_action', 'nexa_active finance journey overlay', 'click', 'no');
        setDataInLocal('isEnquery', JSON.stringify({
            'isenquery': false,
            'enquiry_id': enquery_data_land.enquiry_id
        }));
        $('#verifyPopup1').hide();
        $('#verifyPopup2').hide();
        $('#verifyPopup4').hide();
        $('#verifyPopup3').show();
    });


    var interval_fnc_land;
    function OtpTimer_fnc_land() {
        var count = 120;
        clearInterval(interval_fnc_land);
        interval_fnc_land = setInterval(function () {
            $('#countland').html(count);
            count--;
            if (count === 0) {
                clearInterval(interval_fnc_land);
                $('#countland').html('');
                $('#counter_new').css('display', 'none');
                $('.resendOtp_brand').show();
            }
        }, 1000);
    }

    $('.resendOtp_brand').click(function () {
        $('.nfloaderMain').show();
        var rowdata = PrepareRequest('/api/sitecore/FMPAPI/SendOTP', 'Name=testuser&Email=testuser@gmail.com&' + $('#form-fmpland1-brand').serialize());
        $.ajax(rowdata).done(function (response) {
            $('.nfloaderMain').hide();
            response = JSON.parse(response);
            if (response.status.toLowerCase() == 'success') {
                $('.landing_otperror').hide();
                $('.resendOtp_brand').hide();
                $('#counter_new').show();
                OtpTimer_fnc_land();
            }
            else if (response.message.toLowerCase() == 'businessexception') {
                if (response.errors) {
                    var newmsg = response.errors.map(function (elem) {
                        return elem.error_message;
                    }).join(', ');
                    alert(newmsg);
                    errorDataLayer(newmsg);
                }
                else {
                    alert(response.error_message);
                    errorDataLayer(response.error_message);
                }
            }
            else {
                alert(response.error_message);
                errorDataLayer(response.error_message);
            }
        }).error(function (err) {
            $('.nfloaderMain').hide();
        });
    });

});
'use strict';
/*globals ra */

(function(){
    $('.scrollbtn a[href*=#]:not([href=#])').click(function() {
		if (location.pathname.replace(/^\//,'') === this.pathname.replace(/^\//,'') && location.hostname === this.hostname) {
		  var target = $(this.hash);
		  target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
		  if (target.length) {
			$('html,body').animate({
			  scrollTop: target.offset().top
			}, 1000);
			return false;
		  }
		}
	});
	$('.gonextsection a[href*=#]:not([href=#])').click(function() {
		if (location.pathname.replace(/^\//,'') === this.pathname.replace(/^\//,'') && location.hostname === this.hostname) {
		  var target = $(this.hash);
		  target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
		  if (target.length) {
			$('html,body').animate({
			  scrollTop: target.offset().top - 55
			}, 1000);
			return false;
		  }
		}
	});
}(ra));


'use strict';
/*globals ra */

(function(){
    ra.nostrudfeature = {
        settings:{
          target:'.mod-nostrudfeature'
        },
        init:function(){
          this.bindnoStrudEvent();
        },
        bindnoStrudEvent : function(){
            var showChar = 500;
            var ellipsestext = '...';
            var moretext = 'Read more';
            var lesstext = 'Read less';

            $('.more').each(function() {
                var content = $(this).html();

                if(content.length > showChar) {

                    var c = content.substr(0, showChar);
                    var h = content.substr(showChar, content.length - showChar);

                
                    var html = c + '<span class="eclippseDot">' + ellipsestext+ '&nbsp;</span><span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink">' + moretext + '</a></span>';

                    $(this).html(html);
                }

            });

            $('.morelink').click(function(){
                DataLayerMSILDL_Common.Push('user_action', 'fpm_other articles', 'click', 'read more-'+$('.inrnostrudbox').find('h2').text());
                if($(this).hasClass('less')) {
                    $(this).removeClass('less');
                    $(this).html(moretext);
                    $('.eclippseDot').text('...');
                } else {
                    $(this).addClass('less');
                    $(this).html(lesstext);
                    $('.eclippseDot').text('');

                }
                // $(this).parent().prev().toggle();
                $(this).prev().toggle();
                return false;
            });
        }
    };
}(ra));


'use strict';
/*globals ra */

(function() {

    $('.scross_container .mySlides').hide();
    $('.scross_container .mySlides:first').show();
    $('.scrosscolorpicker .dc_dots:first').addClass('active');
    $('.scrosscolorpicker .dc_dots').click(function() {
        $(this).addClass('active');
        $(this).siblings('.dc_dots').removeClass('active');
        $('.scross_container .mySlides').hide();
        var selectTab = $(this).attr('data-id');
        $('#' + selectTab).fadeIn();
    });

    $('.ciaz_container .mySlides').hide();
    $('.ciaz_container .mySlides:first').show();
    $('.ciazcolorpicker .dc_dots:first').addClass('active');
    $('.ciazcolorpicker .dc_dots').click(function() {
        $(this).addClass('active');
        $(this).siblings('.dc_dots').removeClass('active');
        $('.ciaz_container .mySlides').hide();
        var selectTab = $(this).attr('data-id');
        $('#' + selectTab).fadeIn();
    });

    $('.balenors_container .mySlides').hide();
    $('.balenors_container .mySlides:first').show();
    $('.balenorscolorpicker .dc_dots:first').addClass('active');
    $('.balenorscolorpicker .dc_dots').click(function() {
        $(this).addClass('active');
        $(this).siblings('.dc_dots').removeClass('active');
        $('.balenors_container .mySlides').hide();
        var selectTab = $(this).attr('data-id');
        $('#' + selectTab).fadeIn();
    });

    $('.baleno_container .mySlides').hide();
    $('.baleno_container .mySlides:first').show();
    $('.balenocolorpicker .dc_dots:first').addClass('active');
    $('.balenocolorpicker .dc_dots').click(function() {
        $(this).addClass('active');
        $(this).siblings('.dc_dots').removeClass('active');
        $('.baleno_container .mySlides').hide();
        var selectTab = $(this).attr('data-id');
        $('#' + selectTab).fadeIn();
    });

    $('.ignis_container .mySlides').hide();
    $('.ignis_container .mySlides:first').show();
    $('.igniscolorpicker .dc_dots:first').addClass('active');
    $('.igniscolorpicker .dc_dots').click(function() {
        $(this).addClass('active');
        $(this).siblings('.dc_dots').removeClass('active');
        $('.ignis_container .mySlides').hide();
        var selectTab = $(this).attr('data-id');
        $('#' + selectTab).fadeIn();
    });
    
}(ra));



    $('.selectvariant select option:first').prop('selected', 'selected');  

    $('.selectvariant select').change(function(){
        $(this).find('option:selected').each(function(){
            var optionValue = $(this).attr('id');
            if(optionValue){                
                $(this).parents('.carcontentbox').find('.box').not('.' + optionValue).hide();
                $(this).parents('.carcontentbox').find('.' + optionValue).show();
                $(this).parents('.carcontentbox').siblings('.carimagebox').find('.box').not('.' + optionValue).hide();
                $(this).parents('.carcontentbox').siblings('.carimagebox').find('.' + optionValue).show();
            } else {
                $(this).parents('.carcontentbox').find('.box').hide();
                $(this).parents('.carcontentbox').siblings('.carimagebox').find('.box').hide();
            }
        });
    }).change();

$(document).ready(function() {
    if ($('.personalise_car_List_price').length == 0) {
        return;
    }
    
    // make 1 st option of variant drowp down as  Selected
    $('.ddlCarVariant').prop('selectedIndex', 0);

    $('.cardetailbox').each(function() {
        var currentCarModelCode = $(this).find('.HdnCarModelCode').val();
        var thisObj = $(this).find('.ddlCarVariant');
        getPriceDetails(thisObj, currentCarModelCode);
    });

    // $('.ddlCarVariant').change(function() {
    //     var currentCarModelCode = $(this).closest('.cardetailbox').find('.HdnCarModelCode').val();
    //     var currentUrl = $(this).closest('.cardetailbox').find('.btnPersonaliseUrl').attr('href');
    //     var carVariantOldValue = currentUrl.split('?')[1].split('&')[0];
    //     currentUrl = currentUrl.replace(carVariantOldValue, 'CarVariant=' + $(this).val().toUpperCase());
    //     $(this).closest('.cardetailbox').find('.btnPersonaliseUrl').attr('href', currentUrl);
    //     getPriceDetails($(this), currentCarModelCode);
    // });

    $('.ddlCarVariant').change(function() {
        var carModelClass = $(this).find('option:selected').attr('id');
        var carModelCode = $('.' + carModelClass + ' ul li .active').attr('data-colorCode');
        var currentCarModelCode = $(this).closest('.cardetailbox').find('.HdnCarModelCode').val();
        var currentUrl = $(this).closest('.cardetailbox').find('.btnPersonaliseUrl').attr('href');
        var carVariantOldValue = currentUrl.split('?')[1].split('&')[0];
        var carModelOldValue = currentUrl.split('?')[1].split('&')[currentUrl.split('?')[1].split('&').length - 1];
        currentUrl = currentUrl.replace(carVariantOldValue, 'CarVariant=' + $(this).val().toUpperCase());
        currentUrl = currentUrl.replace(carModelOldValue, 'ColorCode=' + carModelCode.toUpperCase());
        $(this).closest('.cardetailbox').find('.btnPersonaliseUrl').attr('href', currentUrl);
        getPriceDetails($(this), currentCarModelCode);
    });

    $('.btnCarColor').click(function() {

        var dataKeyValue = $(this).data('carmodel-color');
        
        var currentUrl = $(this).closest('.cardetailbox').find('.btnPersonaliseUrl').attr('href');
        var carColorOldValue = '&' + currentUrl.split('?')[1].split('&')[4];
        currentUrl = currentUrl.replace(carColorOldValue, '&ColorCode=' + $(this).children('.hdn-colorCode').val());
        $(this).closest('.cardetailbox').find('.btnPersonaliseUrl').attr('href', currentUrl);

        
        if (dataKeyValue) {
            var carModel = dataKeyValue.split('|')[0];
            var carColor = dataKeyValue.split('|')[1];
            setCookie('color_click_' + carModel, carColor);
        }
    });
    
    $('.btnPersonaliseUrl').click(function() {
        removeDataInLocal('addedAccess');
    });

});
'use strict';
/*globals ra */
(function () {
	$('.submitCross').click(function () {
		$('.registerFormBox').removeClass('active');
		$('.registerexplore').addClass('active');
		if($('#sf4').is(':visible'))
        {
           alert('You can re-visit the finance journey anytime by clicking on Nexa Finance on the home page');
        }
	});
	$('.registerexplore').click(function () {
		$('.registerFormBox').addClass('active');
		$(this).removeClass('active');
	});
	window.setTimeout(function () {
		$('.registerInterest').addClass('active');
		$('.registerFormBox').addClass('active');
	}, 500);
}(ra));
$(document).ready(function () {
	$('.close').click(function () {
		$('.btdotperror').hide('');
		$('.rqootperror').hide('');
		$('.bsvotperror').hide('');
		$('.rfiotperror').hide('');
	});
	$('#datepicker').datepicker({
		dateFormat: 'dd-MM-yy',
		minDate: $('#datepicker').attr('min'),
		maxDate: $('#datepicker').attr('max')
	});
	//Prepare request to sending data to server require parameters endpoint, data, and token
	function PrepareRequest(url, data) {
		return {
			'async': true,
			'crossDomain': true,
			'url': url,
			'method': 'POST',
			'data': data
		}
	}
	$("#State").change(function (e,cityCode) {
		if($(this).val()!=""){
			$(document).find('body').css('pointer-events', 'none');
			// $(document).find('body').css({"height": "100%", "overflow": "hidden"});
			$('#RfiLoader').css('display','block');
		}

		var cities = $('select[name="City"]');
		cities.html('');
		cities.append($('<option></option>').val('').text('City'));
		$('select[name="Dealer"]').html('');
		$('select[name="Dealer"]').append($('<option></option>').val('').text('Dealer'));
		var data = $(this).closest('form').serialize();
		var rowdata = PrepareRequest('/api/sitecore/Forms/LoadCities', data);
		$.ajax(rowdata).done(function (response) {
			// cities.html('');
			// $('select[name="Dealer"]').html('');
			// $('select[name="Dealer"]').append($('<option></option>').val('').text('Dealer'));
			// cities.append($('<option></option>').val('').text('City'));
			$.each(response, function (index, item) {
				cities.append($('<option></option>').val(item.Value).html(item.Text));
			});
			$('#RfiLoader').css('display','none');
            $(document).find('body').css('pointer-events', 'inherit');
			// $(document).find('body').css({"height": "100%", "overflow": "auto"});
			//popultae city if value is passed from aut_Populate_StateCity
			if(cityCode){
				cities.val(cityCode).trigger("change");
			}
			
			
		}).error(function (err) { });
	});
	$('#City').change(function () {
	if($(this).val()!=""){
			$(document).find('body').css('pointer-events', 'none');
			// $(document).find('body').css({"height": "100%", "overflow": "hidden"});
			$('#RfiLoader').css('display','block');
		}
		var dealer = $('select[name="Dealer"]');
		dealer.html('');
		dealer.append($('<option></option>').val('').text('Dealer'));
		var data = $(this).closest('form').serialize();
		var rowdata = PrepareRequest('/api/sitecore/Forms/LoadDealers', data);
		$.ajax(rowdata).done(function (response) {
			// dealer.html('');
			// dealer.append($('<option></option>').val('').text('Dealer'));
			$.each(response, function (index, item) {
				dealer.append($('<option></option>').val(item.Value).html(item.Text));
			});
			$('#RfiLoader').css('display','none');
            $(document).find('body').css('pointer-events', 'inherit');
			// $(document).find('body').css({"height": "100%", "overflow": "auto"});
		}).error(function (err) { });
	});


	var v = $('#form-rfi').validate({
		rules: {
			Name: {
				required: true,
				maxlength: 30,
				name_regex: /^[A-z]*((-|\s)*[A-z])*$/g
			},
			Email: {
				required: true,
				email: true,
				maxlength: 100,
				email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
			},
			Mobile: {
				required: true,
				minlength: 10,
				maxlength: 10,
				mobile_regex: /^[^0-5]\d{9}$/,
				number: true
			},
			CarModel: {
				required: true
			},
			BuyerType: {
				required: true
			},
			IsDisclaimerAccepted: 'required',
			Otp: {
				required: true,
				minlength: 4,
				maxlength: 4
			},
			State: {
				required: true
			},
			City: {
				required: true
			},
			Dealer: {
				required: true
			},
			CustomerType: {
				required: true
			},
			TimeBooked: 'required',
			PreferedDate: 'required'
		},
		messages: {
			// Name: $('#Name').attr('data-error'),
			Name: {
                required: 'Name is required field',
                maxlength: 'Maximum length should be 30 characters',
                name_regex: 'Remove extra space from the name field'
             },
			Email: $('#Email').attr('data-error'),
			Mobile: $('#Mobile').attr('data-error'),
			CarModel: $('#CarModel').attr('data-error'),
			BuyerType: $('#form-rfi').find('#RFIBuyerType').attr('data-error'),
			IsDisclaimerAccepted: $('#IsDisclaimerAccepted').attr('data-error'),
			Otp: $('#Otp').attr('data-error'),
			State: $('#State').attr('data-error'),
			City: $('#City').attr('data-error'),
			Dealer: $('#Dealer').attr('data-error'),
			TimeBooked: $('#TimeBooked').attr('data-error'),
			PreferedDate: $('#PreferedDate').attr('data-error'),
			CustomerType: $('#CustomerType').attr('data-error')
		},
		errorElement: 'em',
		errorPlacement: function (error, element) {
			// Add the `invalid-feedback` class to the error element
			error.addClass('invalid-feedback');
			if (element.prop('type') === 'checkbox') {
				error.insertAfter(element.next('label'));
			} else {
				error.insertAfter(element);
			}
		},
		highlight: function (element, errorClass, validClass) {
			$(element).addClass('is-invalid').removeClass('is-valid');
		},
		unhighlight: function (element, errorClass, validClass) {
			$(element).addClass('is-valid').removeClass('is-invalid');
		},
		submitHandler: function (form) {
			form.submit();
		}
	});

	var $inputEmailFrfi = $('#form-rfi #Email');
	$inputEmailFrfi.keypress(function(e) {
	  var max = 99;
	  if ($inputEmailFrfi.val().length > max) {
		  $inputEmailFrfi.val($inputEmailFrfi.val().substr(0, max));
	  }
	  var key = e.keyCode;
	  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
	  if (!returnn) {
		return false;
	  }
	});



	// $('#CarModel,#RFIBuyerType,#Dealer,#datepicker,#TimeBooked,#CustomerType').change(function () {
	// 	if(v){
	// 		v.form();
	// 	}
	// });

	$('#CarModel,#Dealer,#datepicker,#TimeBooked,#CustomerType').change(function () {
		if(v){
			v.form();
		}
	});

	$('#form-rfi #RFIBuyerType').change(function () {
		if(v){
			v.form();
		}
	});

	
	// these buttons all run the validation, overridden by specific targets above
	$('.open2').click(function () {
		if (v.form()) {
			var that = this;
			var data = $(this).closest('form').serialize();
			data = data + '&CarModelName=' + $('#CarModel option:selected').text() + '&CityName=' + $('#City option:selected').text() + '&StateName=' + $('#State option:selected').text() + '&DealerName=' + $('#Dealer option:selected').text() + '&CarModel=' + $('#CarModel option:selected').val();
			var rowdata = PrepareRequest('/api/sitecore/Forms/RegisterForInterest', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky-RFI';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Brand Page RFI'
					}
					//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Dealer', $('#CarModel option:selected').text(), $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' RFI Dealer', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$(that).parents('.registerstepform').hide();
					$('#step3').hide();
					$(that).parents('.registerstepform').next().show();
					$('#step4').show();
				}
			}).error(function (err) { });
		}
	});
	// $('.rfi_brand_opt').click(function () {
	// 	if (v.form() && !dis) {
	// 		dis = 1;
	// 		$('#CarModel').removeAttr('disabled')
	// 		//var otpdata = $('.inputotpBox').find('#Otp').val();
	// 		var otpdata = $('#btdotp').val();
	// 		//Register_data = $(this).closest('form').serialize();
	// 		var f_thankyouaccessories = $('#f_thankyouaccessories').val();
	// 		var data = $('.rfi__form').serialize() + '&Otp=' + otpdata + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories + '&CarModelName=' + $('#CarModel option:selected').text();
	// 		$('#CarModel').attr('disabled', 'disabled');
	// 		var that = this;
	// 		var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
	// 		var rowdata2 = PrepareRequest('/api/sitecore/Forms/RegisterForInterest', data);
	// 		$.ajax(rowdata).done(function (response) {
	// 			if (response.IsSuccess) {
	// 				$('.rfi_brand_opt').addClass('disableCls');
	// 				$('.rfiotperror').hide();
	// 				// GT code start
	// 				var formtype = $('#ftype').val()
	// 				var eventcat = 'Sticky-RFI';
	// 				if (formtype.toLowerCase() != 'sticky form') {
	// 					eventcat = 'Brand Page RFI'
	// 				}
	// 				// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Post OTP', $('#CarModel option:selected').text(), $('#Mobile').val());
	// 				DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(),
	// 				'Submit',
	// 				$('#CarModel option:selected').text()  + ' RFI Post OTP',
	// 				$('#CarModel option:selected').text() ,
	// 				$('#Mobile').val(),
	// 				$('#f_type').val());

	// 				tdSubmit({
	// 					'eventCategory': 'Brand Page RFI Post OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
	// 					'eventAction': 'click',
	// 					'eventLabel': 'Brand RFI - Post OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
	// 				}, 'event_nexa');
	// 				//home = 'sticky'
	// 				// GT code ends
	// 				//$(that).parents('.registerstepform').hide();
	// 				//$('#step2').hide();
	// 				// $(that).parents('.registerstepform').next().hide();
	// 				// $('#step3').show();
	// 				$.ajax(rowdata2).done(function (response2) {
	// 					if ($.trim(response2) == null || $.trim(response2) == undefined){ dis = 0; console.log(response2); }else{
	// 						if(response2.IsEnable){
	// 					dis = 0;
	// 					$('#myModal_testdrive').modal('toggle');
	// 					$('.stepform1').hide();
	// 					$('#sf-thankyou').show();
	// 					$('.thankyoutitleres').html(response2.ThankyouTitle);
	// 					$('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 
	// 					$('.BrandImageRes').attr('src', response2.BrandImage);
	// 					$('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
	// 					$('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
	// 					$('.BrandImageResBig').attr('src', response2.BrandImage);
	// 					for(var i = 0; i < response2.AccessoryItems.length; i++){
	// 							const element = response2.AccessoryItems[i];  
	// 							$('.resulVal').append('<a href='+ element.AccessoryURL + '><div class='item'><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
	// 					} 
	// 				}
	// 			}
	// 				}).error(function (err) {
	// 					dis = 0;
	// 				});
	// 			} else {
	// 				$('.rfiotperror').show();
	// 				dis = 0;
	// 				$('.rfi_brand_opt').removeClass('disableCls');
	// 			}
	// 		}).error(function (err) {
	// 			dis = 0;
	// 		});
	// 	}
	// });



	$('.rfi_brand_opt').click(function () {
        if (v.form() && !dis) {
            dis = 1;
            $('#CarModel').removeAttr('disabled')
            //var otpdata = $('.inputotpBox').find('#Otp').val();
            var otpdata = $('#btdotp').val();
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}
//            var data = $('.rfi__form').serialize() + '&Otp=' + otpdata + '&CarModelName=' + $('#CarModel option:selected').text();
			
			var f_thankyouaccessories = $('#f_thankyouaccessories').val();
			if(typeof f_thankyouaccessories == 'undefined')
			{
				var data = $('.rfi__form').serialize() + '&Otp=' + otpdata + '&CarModelName=' + $('#CarModel option:selected').text()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			}else{
				var data = $('.rfi__form').serialize() + '&Otp=' + otpdata + '&CarModelName=' + $('#CarModel option:selected').text() + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			 }

			
			$('#CarModel').attr('disabled', 'disabled');
            var that = this;
            var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
            var rowdata2 = PrepareRequest('/api/sitecore/Forms/RegisterForInterest', data);
            $.ajax(rowdata).done(function (response) {
                if (response.IsSuccess) {
                    $('.rfi_brand_opt').addClass('disableCls');
                    $('.rfiotperror').hide();
                    // GT code start
                    var formtype = $('#ftype').val()
                    var eventcat = 'Sticky-RFI';
                    if (formtype.toLowerCase() != 'sticky form') {
                        eventcat = 'Brand Page RFI'
                    }
					
                    // DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Post OTP', $('#CarModel option:selected').text(), $('#Mobile').val());
                    DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(),
                    'Submit',
                    $('#CarModel option:selected').text()  + ' RFI Post OTP',
                    $('#CarModel option:selected').text(),
                    $('#Mobile').val(),
                    $('#f_type').val());

                    tdSubmit({
                        'eventCategory': 'Brand Page RFI Post OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
                        'eventAction': 'click',
                        'eventLabel': 'Brand RFI - Post OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
                    }, 'event_nexa');
                    $.ajax(rowdata2).done(function (response2) {
                        if ($.trim(response2) == null || $.trim(response2) == undefined){ dis = 0; console.log(response2); }else{
                            if(response2.IsEnable !== 'undefined'){
								if(ra.utils.readCookie('pll_forms')==null){
									ra.utils.setCookieUniversal('pll_forms',ra.utils.marquee_event.pll_forms,'5000'); 
									ra.utils.setCookieUniversal('pll_forms_name','Register For Interest','5000'); 
									Marquee_Total();
								}


								var BalenoChk = $('#CarModel').val();
                            if(BalenoChk=="17" || BalenoChk=="2"){
						    $('.thankyouMsgCarBoxSection').hide();
							$('.ThankyouSubTitleres').hide();
							$('.thankyouMsgCarBoxSection').hide();
                            }else{
                            $('.thankyouMsgCarBoxSection').show();
							$('.ThankyouSubTitleres').show();
							$('.thankyouMsgCarBoxSection').show();
                            }

								$('#myModal_testdrive').modal('toggle');
								$('.stepform1').hide();
								$('#sf-thankyou').show();

								// var BalenoChk = $('#CarModel').val();
								// if(BalenoChk=="2"){
								// $('.thankyouMsgCarBoxSection').hide();
								// }else{
								// $('.thankyouMsgCarBoxSection').show();
								// }

								if(response2.TrueCallerLink!='' && response2.TrueCallerLinkText!=''){
									if (window.location.href.indexOf('Truecaller') > -1) {
										var myScript = document.createElement('script');
										myScript.setAttribute('src', response2.TrueCallerLink);
										document.head.appendChild(myScript);
									  }
								}

								// $('.thankyoutitleres').html(response2.ThankyouTitle);
								$('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 

								$('.BrandImageRes').attr('src', response2.BrandImage);
								$('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
								$('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
								$('.BrandImageResBig').attr('src', response2.BrandImage);
								if(response2.AccessoryItems){
								for(var i = 0; i < response2.AccessoryItems.length; i++){
										const element = response2.AccessoryItems[i];  
										$('.resulVal').append('<a href='+ element.AccessoryURL + '><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
								} 
							}
							}else if(response2){
								$('#myModal_testdrive').modal('toggle');
								$('.stepform1').hide();
								$('#sf-thankyou').show();
							}

							tdSubmit({
								name: convertAES($('#form-rfi').find('#Name').val()),
								name_plain:$('#form-rfi').find('#Name').val(),
								email: convertSHA($('#form-rfi').find('#Email').val()),
								email_plain:$('#form-rfi').find('#Email').val(),
								mobile: convertSHA($('#form-rfi').find('#Mobile').val()),
								mobile_plain:$('#form-rfi').find('#Mobile').val(),
								state: $('#form-rfi').find('#State option:selected').text(),
								city: $('#form-rfi').find('#City option:selected').text(),
								dealer: $('#form-rfi').find('#Dealer option:selected').text(),
								model: $('#form-rfi').find('#CarModel option:selected').text(),
								buyer_type:$('#form-rfi').find('#RFIBuyerType option:selected').text()
							}, 'register_your_interest_nexa');
							
							var UrlPath = window.location.pathname;
                            if (UrlPath == "/grand-vitara") {
                              tdSubmit(
                                {
                                  event: "RYI Form",
                                  eventCategory: "Nexa Grand Vitara RYI Submit Form",
                                  eventAction: "Submit",
                                  eventLabel: "Submit ",
                                },
                                "event_nexa"
                              );
                            }
                }
                    }).error(function (err) {
                        dis = 0;
                    });
                } else {
                    $('.rfiotperror').show();
                    dis = 0;
                    $('.rfi_brand_opt').removeClass('disableCls');
                }
            }).error(function (err) {
                dis = 0;
            });
        }
    });

	

	$('.rfi_landing_opt').click(function () {
		if (v.form() && !dis) {
			dis = 1;
			$('#CarModel').removeAttr('disabled');
			//var otpdata = $('.inputotpBox').find('#Otp').val();
			var otpdata = $('#btdotp').val();
			//Register_data = $(this).closest('form').serialize();
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}

			var f_thankyouaccessories = $('#f_thankyouaccessories').val();
			if(typeof f_thankyouaccessories == 'undefined')
			{
				var data = $('.rfi__form').serialize() + '&Otp=' + otpdata + '&CarModelName=' + $('#CarModel option:selected').text()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			}else{
				var data = $('.rfi__form').serialize() + '&Otp=' + otpdata  + '&CarModelName=' + $('#CarModel option:selected').text() + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			 }
			
			$('#CarModel').attr('disabled', 'disabled');
			var that = this;
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			var rowdata2 = PrepareRequest('/api/sitecore/Forms/RegisterForInterest', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.rfi_landing_opt').addClass('disableCls');
					$('.rfiotperror').hide();
					// GT code start
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky-RFI';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Brand Page RFI'
					}
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Post OTP', $('#CarModel option:selected').text(), $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(),
					'Submit',
					$('#CarModel option:selected').text()  + ' RFI Post OTP',
					$('#CarModel option:selected').text() ,
					$('#Mobile').val(),
					$('#f_type').val());

					tdSubmit({
						'eventCategory': 'Brand Page RFI Post OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
						'eventAction': 'click',
						'eventLabel': 'Brand RFI - Post OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
					}, 'event_nexa');
					//home = 'sticky'
					// GT code ends
					//$(that).parents('.registerstepform').hide();
					//$('#step2').hide();
					// $(that).parents('.registerstepform').next().hide();
					// $('#step3').show();
					//$.ajax('https://reqres.in/api/unknown/23').done(function (response2) { if(response2 !=' '){alert('yes data');}else{alert('no data');} if ($.trim(response2) == null || $.trim(response2) == undefined){ alert('no'); }else{alert('yes');}  });
					$.ajax(rowdata2).done(function (response2) {
						if ($.trim(response2) == null || $.trim(response2) == undefined){ dis = 0; console.log(response2); }else{
							if(response2.IsEnable !== 'undefined'){
								if(ra.utils.readCookie('pll_forms')==null){
									ra.utils.setCookieUniversal('pll_forms',ra.utils.marquee_event.pll_forms,'5000'); 
									ra.utils.setCookieUniversal('pll_forms_name','Register For Interest','5000'); 
									Marquee_Total();
								}				
						$('#myModal_testdrive').modal('toggle');
						$('.stepform1').hide();
						$('#sf-thankyou').show();
						// $('.thankyoutitleres').html(response2.ThankyouTitle);
						$('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 

//In Case Of  Baleno Car 
if(response2.TrueCallerLink!='' && response2.TrueCallerLinkText!=''){
	if (window.location.href.indexOf('Truecaller') > -1) {
		var myScript = document.createElement('script');
		myScript.setAttribute('src', response2.TrueCallerLink);
		document.head.appendChild(myScript);
	  }
}

	var CarModelType = $("#CarModel option:selected").val();
	if(CarModelType=="17"){
		 $('.ExploreUrlresBaleno').show();
		$('.thankyouMsgCarBoxSection').hide();
		$('.ThankyouSubTitleres').hide();
	}else{
		 $('.ExploreUrlresBaleno').hide();
		$('.thankyouMsgCarBoxSection').show();
		$('.ThankyouSubTitleres').show();
		
$('.BrandImageRes').attr('src', response2.BrandImage);
$('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
$('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
$('.BrandImageResBig').attr('src', response2.BrandImage);
if(response2.AccessoryItems){
for(var i = 0; i < response2.AccessoryItems.length; i++){
		const element = response2.AccessoryItems[i];  
		$('.resulVal').append('<a href='+ element.AccessoryURL + '><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
}
}
	}


						 
					}else if(response2){
						$('#myModal_testdrive').modal('toggle');
						$('.stepform1').hide();
						$('#sf-thankyou').show();
					}
				}
					}).error(function (err) {
						dis = 0;
					});
				} else {
					$('.rfiotperror').show();
					dis = 0;
					$('.rfi_landing_opt').removeClass('disableCls');
				}
			}).error(function (err) {
				dis = 0;
			});
		}
	});
	$('.rfi_brand').click(function(){
		if (v.form()) {
			var UrlPath = window.location.pathname;
            if(UrlPath == "/grand-vitara") {
              tdSubmit(
                {
                  event: "RYI Form",
                  eventCategory: "Nexa Grand Vitara RYI Form - Grand Vitara",
                  eventAction: "Click",
                  eventLabel: "Grand Vitara",
                },
                "event_nexa"
              );
            }
			$('#CarModel').removeAttr('disabled');
			var data = $(this).closest('form').serialize();
			$('#CarModel').attr('disabled', 'disabled');
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}
			var data = data + '&CarModelName=' + $('#CarModel option:selected').text() + '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			var that = this;
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.verifyotp').val('');
					// GT code start
					// var formtype = $('#ftype').val()
					// var eventcat = 'Sticky-RFI';
					// if (formtype.toLowerCase() != 'sticky form') {
					// 	eventcat = 'Brand Page RFI'
					// }
					$('#myModal_testdrive').modal('show');
					//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Pre OTP', $('#CarModel option:selected').text(), $('#Mobile').val());
					//$('#f_carmodel').val() + ' RFI Pre OTP'
					//($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(),
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(),
					 'Submit',
					 $('#CarModel option:selected').text() + ' RFI Pre OTP',
					 $('#CarModel option:selected').text(),
					 $('#Mobile').val(),
					 $('#f_type').val());
					tdSubmit({
						name: convertAES($('#form-rfi').find('#Name').val()),
						email: convertSHA($('#form-rfi').find('#Email').val()),
						mobile: convertSHA($('#form-rfi').find('#Mobile').val()),
						state: $('#form-rfi').find('#State option:selected').text(),
						city: $('#form-rfi').find('#City option:selected').text(),
						dealer: $('#form-rfi').find('#Dealer option:selected').text(),
						model: $('#form-rfi').find('#CarModel option:selected').text()
					}, 'register_your_interest_nexa');
					tdSubmit({
						'eventCategory': 'Brand Page RFI Pre OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
						'eventAction': 'click',
						'eventLabel': 'Brand RFI - Pre OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
					}, 'event_nexa');
					// GT code ends
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					//$(that).parents('.registerstepform').hide();
					$('#step1').hide();
					//$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});
	$('.rfi_landing').click(function () {
		if (v.form()) {
			$('#CarModel').removeAttr('disabled')
			var data = $(this).closest('form').serialize();
			$('#CarModel').attr('disabled', 'disabled');
			var data = data + '&CarModelName=' + $('#CarModel option:selected').text();
			var that = this;
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.verifyotp').val('');
					// GT code start
					// var formtype = $('#ftype').val()
					// var eventcat = 'Sticky-RFI';
					// if (formtype.toLowerCase() != 'sticky form') {
					// 	eventcat = 'Brand Page RFI'
					// }
					$('#myModal_testdrive').modal('show');
					//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Pre OTP', $('#CarModel option:selected').text(), $('#Mobile').val());
					//$('#f_carmodel').val() + ' RFI Pre OTP'
					//($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(),
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(),
					 'Submit',
					 $('#CarModel option:selected').text() + ' RFI Pre OTP',
					 $('#CarModel option:selected').text(),
					 $('#Mobile').val(),
					 $('#f_type').val());
					tdSubmit({
						name: convertAES($('#form-rfi').find('#Name').val()),
						email: convertSHA($('#form-rfi').find('#Email').val()),
						mobile: convertSHA($('#form-rfi').find('#Mobile').val()),
						state: $('#form-rfi').find('#State option:selected').text(),
						city: $('#form-rfi').find('#City option:selected').text(),
						dealer: $('#form-rfi').find('#Dealer option:selected').text(),
						model: $('#form-rfi').find('#CarModel option:selected').text()
					}, 'register_your_interest_nexa');
					tdSubmit({
						'eventCategory': 'Landing Page RFI Pre OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
						'eventAction': 'click',
						'eventLabel': 'Landing RFI - Pre OTP '+$('#form-rfi').find('#CarModel option:selected').text(),
					}, 'event_nexa');
					// GT code ends
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					//$(that).parents('.registerstepform').hide();
					$('#step1').hide();
					//$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});

	$('.resend0').click(function () {
		var data;
		if ($('.form-rfi').length > 0) {
			data = $('.form-rfi').serialize();
		} else if ($('.rfi__form').length > 0) {
			data = $('.rfi__form').serialize();
		} else if ($('.form-rquote').length > 0) {
			data = $('.form-rquote').serialize();
		} else if ($('#cancel_book').length > 0) {
			data = 'Mobile=' + $('#Mobile').val() + '&Email=' + $('#Email').val();
		} else if ($('#form-fnc').length > 0) {
			data = 'Mobile=' + $('#form-fnc').find('.Mobile').val() + '&Email=' + $('#form-fnc').find('.Email').val();
		}
		var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
		$.ajax(rowdata).done(function (response) {
			if (response.IsSuccess) {
				$('.resend0').css('pointer-events', 'none');
				$('#counter').css('display', 'block');
				OtpTimer();
				$('.resend0').css('color', 'grey');
			} else { }
		}).error(function (err) { });
	});

	//set Min date
	// $('.form-btd').find('.PreferedDate').attr('min', todayDate());
	// call on first submit button
	$('.btdskip').click(function () {
		var that = this;
		var data = $(this).closest('form').serialize();
		var rowdata = PrepareRequest('/api/sitecore/Forms/BookTestDrive', data);
		$.ajax(rowdata).done(function (response) {
			if (response.IsSuccess) {
				// GT code start
				var carname = $('#CarModel option:selected').text();
				var formtype = $('#ftype').val()
				var eventcat = 'Sticky Menu BTD';
				if (formtype.toLowerCase() != 'sticky form') {
					eventcat = 'Car Page Test Drive'
				}
				// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Dealer Preferred Time', carname, $('#Mobile').val());
				DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BTD Dealer Preferred Time', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
				// GT code ends
				$(that).parents('.registerstepform').hide();
				$('#step4').hide();
				$(that).parents('.registerstepform').next().show();
			}
		}).error(function (err) { });
	});
	// these buttons all run the validation, overridden by specific targets above
	$('.btd3').click(function () {
		if (v.form()) {
			var that = this;
			var otpdata = $('#btdotp').val();
			data_Detail = data_Detail + '&' + 'Otp=' + otpdata;
			data_Detail = data_Detail + '&CarModelName=' + $('#CarModel option:selected').text() + '&CityName=' + $('#City option:selected').text() + '&StateName=' + $('#State option:selected').text() + '&DealerName=' + $('#Dealer option:selected').text() + '&CustomerTypeName=' + $('#CustomerType option:selected').text();
			var rowdata = PrepareRequest('/api/sitecore/Forms/BookTestDrive', data_Detail);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky Menu BTD';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Car Page Test Drive'
					}
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Dealer Preferred Time', carname, $('#Mobile').val());
					$('#myModal_testdrive').modal('toggle');
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BTD Dealer Preferred Time', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BTD Dealer Preferred Time', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$('.stepform1').hide();
					$('#sf-thankyou').show();
					// $('#step4').hide();
					// $(that).parents('.registerstepform').next().show();
				}
			}).error(function (err) { });
		}
	});;
	// call on third submit button
	$('.btd2').click(function () {
		if (v.form()) {
			// GT code start
			var carname = $('#CarModel option:selected').text();
			var formtype = $('#ftype').val()
			var eventcat = 'Sticky Menu BTD';
			if (formtype.toLowerCase() != 'sticky form') {
				eventcat = 'Car Page Test Drive'
			}
			// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Dealer', carname, $('#Mobile').val());
			var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
			DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BTD Dealer', gacarmodel, $('#Mobile').val(), $('#f_type').val());
			//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BTD Dealer', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
			// GT code ends
			$(this).parents('.registerstepform').hide();
			$('#step3').hide();
			$(this).parents('.registerstepform').next().show();
			$('#step4').show();
		}
	});
	// call on second submit button
	var dis = 0;
	// call on second submit button
	$('.btd_brand_otp').click(function () {
		if (v.form() && !dis) {
			dis = 1;
			var that = this;
			$('#CarModel').removeAttr('disabled')
			var otpdata = $('#btdotp').val();
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}

			var f_thankyouaccessories = $('#f_thankyouaccessories').val();
			if(typeof f_thankyouaccessories == 'undefined')
			{
				var data = $('.form-rfi').serialize() + '&Otp=' + otpdata + '&CarModelName=' + $('#CarModel option:selected').text()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			}else{
			 var data = $('.form-rfi').serialize() + '&Otp=' + otpdata  + '&CarModelName=' + $('#CarModel option:selected').text() + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			 }


			$('#CarModel').attr('disabled', 'disabled');
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			var rowdata2 = PrepareRequest('/api/sitecore/Forms/BookTestDrive', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					$('.btd_brand_otp').addClass('disableCls');
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky Menu BTD';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Car Page Test Drive'
					}
					$.ajax(rowdata2).done(function (response2) {
						if(response2.IsEnable !== 'undefined'){
							if(ra.utils.readCookie('pll_forms')==null){
									ra.utils.setCookieUniversal('pll_forms',ra.utils.marquee_event.pll_forms,'5000'); 
									ra.utils.setCookieUniversal('pll_forms_name','Register For Interest','5000'); 
									Marquee_Total();
								}
                            $('#myModal_testdrive').modal('toggle');
                            $('.stepform1').hide();
                            $('#sf-thankyou').show();
                            // $('.thankyoutitleres').html(response2.ThankyouTitle);
                            $('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 
                            $('.BrandImageRes').attr('src', response2.BrandImage);
                            $('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
                            $('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
                            $('.BrandImageResBig').attr('src', response2.BrandImage);
							if(response2.AccessoryItems){
                            for(var i = 0; i < response2.AccessoryItems.length; i++){
                                    const element = response2.AccessoryItems[i];  
									$('.resulVal').append('<a href='+ element.AccessoryURL + '><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
                            } 
						}
                        }else if(response2){
                            $('#myModal_testdrive').modal('toggle');
                            $('.stepform1').hide();
                            $('#sf-thankyou').show();
                        }
					}).error(function (err) {
						dis = 0;
					});
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BTD Post OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					tdSubmit({
						name: convertAES($('#form-rfi').find('#Name').val()),
						email: convertSHA($('#form-rfi').find('#Email').val()),
						mobile: convertSHA($('#form-rfi').find('#Mobile').val()),
						state: $('#form-rfi').find('#State option:selected').text(),
						city: $('#form-rfi').find('#City option:selected').text(),
						dealer: $('#form-rfi').find('#Dealer option:selected').text(),
						model: $('#form-rfi').find('#CarModel option:selected').text()
					}, 'book_test_drive_nexa');

					tdSubmit({
						'eventCategory': 'BTD Brand Page Post OTP '+carname,
						'eventAction': 'click',
						'eventLabel': 'Brand BTD - Post OTP '+carname,
					}, 'event_nexa');
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Post OTP', carname, $('#Mobile').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BTD Post OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					//$(that).parents('.registerstepform').hide();
					//$(that).parents('.registerstepform').next().show();
					// $('#step2').hide();
					// $(that).parents('.registerstepform').next().show();
					// $('#step3').show();
				} else {
					$('.btdotperror').show();
					$('.btd_brand_otp').removeClass('disableCls');
					dis = 0;
				}
			}).error(function (err) {
				dis = 0;
			});
		}
	});
	$('.btd_landing_otp').click(function () {
		if (v.form() && !dis) {
			dis = 1;
			var that = this;
			$('#CarModel').removeAttr('disabled');
			var otpdata = $('#btdotp').val();
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}
			var f_thankyouaccessories = $('#f_thankyouaccessories').val();
			if(typeof f_thankyouaccessories == 'undefined')
			{
				var data = $('.form-rfi').serialize() + '&Otp=' + otpdata  + '&CarModelName=' + $('#CarModel option:selected').text()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			}else{
				var data = $('.form-rfi').serialize() + '&Otp=' + otpdata  + '&CarModelName=' + $('#CarModel option:selected').text() + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			 }
			$('#CarModel').attr('disabled', 'disabled');
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			var rowdata2 = PrepareRequest('/api/sitecore/Forms/BookTestDrive', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					$('.btd_landing_otp').addClass('disableCls');
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky Menu BTD';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Car Page Test Drive'
					}
					$.ajax(rowdata2).done(function (response2) {
						if ($.trim(response2) == null || $.trim(response2) == undefined){ dis = 0; console.log(response2); }else{
							if(response2.IsEnable !== 'undefined'){
								if(ra.utils.readCookie('pll_forms')==null){
									ra.utils.setCookieUniversal('pll_forms',ra.utils.marquee_event.pll_forms,'5000'); 
									ra.utils.setCookieUniversal('pll_forms_name','Register For Interest','5000'); 
									Marquee_Total();
								}
						$('#myModal_testdrive').modal('toggle');
						$('.stepform1').hide();
						$('#sf-thankyou').show();
						// $('.thankyoutitleres').html(response2.ThankyouTitle);
						$('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 
						$('.BrandImageRes').attr('src', response2.BrandImage);
						$('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
						$('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
						$('.BrandImageResBig').attr('src', response2.BrandImage);
						if(response2.AccessoryItems){
						for(var i = 0; i < response2.AccessoryItems.length; i++){
								const element = response2.AccessoryItems[i];  
								$('.resulVal').append('<a href='+ element.AccessoryURL + '><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
						} 
					}
					}else if(response2){
						$('#myModal_testdrive').modal('toggle');
						$('.stepform1').hide();
						$('#sf-thankyou').show();
					}
				}
					}).error(function (err) {
						dis = 0;
					});
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BTD Post OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					tdSubmit({
						name: convertAES($('#form-rfi').find('#Name').val()),
						email: convertSHA($('#form-rfi').find('#Email').val()),
						mobile: convertSHA($('#form-rfi').find('#Mobile').val()),
						state: $('#form-rfi').find('#State option:selected').text(),
						city: $('#form-rfi').find('#City option:selected').text(),
						dealer: $('#form-rfi').find('#Dealer option:selected').text(),
						model: $('#form-rfi').find('#CarModel option:selected').text()
					}, 'book_test_drive_nexa');

					tdSubmit({
						'eventCategory': 'BTD Landing page Post OTP '+carname,
						'eventAction': 'click',
						'eventLabel': 'Landing BTD - Post OTP '+carname,
					}, 'event_nexa');
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Post OTP', carname, $('#Mobile').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BTD Post OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					//$(that).parents('.registerstepform').hide();
					//$(that).parents('.registerstepform').next().show();
					// $('#step2').hide();
					// $(that).parents('.registerstepform').next().show();
					// $('#step3').show();
				} else {
					$('.btdotperror').show();
					$('.btd_landing_otp').removeClass('disableCls');
					dis = 0;
				}
			}).error(function (err) {
				dis = 0;
			});
		}
	});
	$('.btd_landing').click(function () {
		if (v.form()) {
			var that = this;
			$('#CarModel').removeAttr('disabled');

			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
               var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			   if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				   var MobileNumberForSkipOTP = '';
			   }else{
				   var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			   }
			var data = $(this).closest('form').serialize()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			$('#CarModel').attr('disabled', 'disabled');
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.verifyotp').val('');
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky Menu BTD';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Car Page Test Drive'
					}
					$('#myModal_testdrive').modal('show');
					tdSubmit({
						'eventCategory': 'BTD Landing Page Pre OTP '+carname,
						'eventAction': 'click',
						'eventLabel': 'Landing BTD - Pre OTP '+carname,
					}, 'event_nexa');
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Pre OTP', carname, $('#Mobile').val());
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BTD Pre OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BTD Pre OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					$(that).parents('.registerstepform').show();
					$('#step1').hide();
					//$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});
	$('.btd_brand').click(function () {
		if (v.form()) {
			var that = this;
			$('#CarModel').removeAttr('disabled')
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}
			var data = $(this).closest('form').serialize() + '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			$('#CarModel').attr('disabled', 'disabled');
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.verifyotp').val('');
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky Menu BTD';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Car Page Test Drive'
					}
					$('#myModal_testdrive').modal('show');

					tdSubmit({
						'eventCategory': 'Brand Page BTD Pre OTP '+carname,
						'eventAction': 'click',
						'eventLabel': 'Brand BTD - Pre OTP '+carname,
					}, 'event_nexa');

					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Pre OTP', carname, $('#Mobile').val());
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BTD Pre OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BTD Pre OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					$(that).parents('.registerstepform').show();
					$('#step1').hide();
					//$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});

	//set Min date
	// $('.form-bshowroom').find('.PreferedDate').attr('min', todayDate());
	$('.bshowroomskip').click(function () {
		var that = this;
		// get access token
		var that = this;
		var data = $(this).closest('form').serialize();
		var rowdata = PrepareRequest('/api/sitecore/Forms/BookShowRoomVisit', data);
		$.ajax(rowdata).done(function (response) {
			if (response.IsSuccess) {
				// GT code start
				var carname = $('#CarModel option:selected').text();
				var formtype = $('#ftype').val()
				var eventcat = 'Sticky ShowRoom';
				if (formtype.toLowerCase() != 'sticky form') {
					eventcat = 'Show Room'
				}
				//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Visit Preferred time', carname, $('#Mobile').val());
				DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BS Preferred time', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
				// GT code ends
				$(that).parents('.registerstepform').hide();
				$('#step4').hide();
				$(that).parents('.registerstepform').next().show();
			}
		}).error(function (err) { });
	});
	// these buttons all run the validation, overridden by specific targets above
	$('.bshowroom3').click(function () {
		if (v.form()) {
			var that = this;
			// get access token
			var that = this;
			var otpdata = $('#btdotp').val();
			bsv_Data = bsv_Data + '&' + 'Otp=' + otpdata
			bsv_Data = bsv_Data + '&CarModelName=' + $('#CarModel option:selected').text() + '&CityName=' + $('#City option:selected').text() + '&StateName=' + $('#State option:selected').text() + '&DealerName=' + $('#Dealer option:selected').text() + '&CustomerTypeName=' + $('#CustomerType option:selected').text();
			var rowdata = PrepareRequest('/api/sitecore/Forms/BookShowRoomVisit', bsv_Data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky ShowRoom';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Show Room'
					}
					$('#myModal_testdrive').modal('toggle');
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Visit Preferred time', carname, $('#Mobile').val());
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BS Pre OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BS Preferred time', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$('.stepform1').hide();
					$('.formthankyou').show();
					// $(that).parents('.registerstepform').hide();
					// $('#step4').hide();
					// $(that).parents('.registerstepform').next().show();
				}
			}).error(function (err) { });
		}
	});
	// call on third submit button
	$('.bshowroom2').click(function () {
		if (v.form()) {
			// GT code start
			var carname = $('#CarModel option:selected').text();
			var formtype = $('#ftype').val()
			var eventcat = 'Sticky ShowRoom';
			if (formtype.toLowerCase() != 'sticky form') {
				eventcat = 'Show Room'
			}
			// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Visit', carname, $('#Mobile').val());
			var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
			DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BS Pre OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
			//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BS Dealer', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
			// GT code ends
			$(this).parents('.registerstepform').hide();
			$('#step3').hide();
			$(this).parents('.registerstepform').next().show();
			$('#step4').show();
		}
	});
	// call on second submit button
	$('.bshowroom_brand_otp').click(function () {
		if (v.form() && !dis) {
			dis = 1;
			var that = this;
			// get access token
			var otpdata = $('#btdotp').val();
			$('#CarModel').removeAttr('disabled')
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}
			var f_thankyouaccessories = $('#f_thankyouaccessories').val();
			if(typeof f_thankyouaccessories == 'undefined')
			{
			 var data = $('.form-rfi').serialize() + '&' + 'Otp=' + otpdata+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			}else{
			 var data = $('.form-rfi').serialize() + '&' + 'Otp=' + otpdata + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			 }

			data = data + '&CarModelName=' + $('#CarModel option:selected').text();
			$('#CarModel').attr('disabled', 'disabled');
			//var data = $(this).closest('form').serialize();
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			var rowdata2 = PrepareRequest('/api/sitecore/Forms/BookShowRoomVisit', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.bshowroom_brand_otp').addClass('disableCls');
					$('.bsvotperror').hide();
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky ShowRoom';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Show Room'
					}
					$.ajax(rowdata2).done(function (response2) {
						if(response2.IsEnable !== 'undefined'){
							if(ra.utils.readCookie('pll_forms')==null){
									ra.utils.setCookieUniversal('pll_forms',ra.utils.marquee_event.pll_forms,'5000'); 
									ra.utils.setCookieUniversal('pll_forms_name','Register For Interest','5000'); 
									Marquee_Total();
								}
                            $('#myModal_testdrive').modal('toggle');
                            $('.stepform1').hide();
                            $('#sf-thankyou').show();
							if(response2.TrueCallerLink!='' && response2.TrueCallerLinkText!=''){
								if (window.location.href.indexOf('Truecaller') > -1) {
									var myScript = document.createElement('script');
									myScript.setAttribute('src', response2.TrueCallerLink);
									document.head.appendChild(myScript);
								  }
							}
                            // $('.thankyoutitleres').html(response2.ThankyouTitle);
                            $('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 
                            $('.BrandImageRes').attr('src', response2.BrandImage);
                            $('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
                            $('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
                            $('.BrandImageResBig').attr('src', response2.BrandImage);
							if(response2.AccessoryItems){
                            for(var i = 0; i < response2.AccessoryItems.length; i++){
                                    const element = response2.AccessoryItems[i];  
									$('.resulVal').append('<a href='+ element.AccessoryURL + '><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
                            } 
						}
                        }else if(response2){
                            $('#myModal_testdrive').modal('toggle');
                            $('.stepform1').hide();
                            $('#sf-thankyou').show();
                        }
					}).error(function (err) {
						dis = 0;
					});
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Post OTP', carname, $('#Mobile').val());
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BS Post OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BS Post OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					tdSubmit({
						name: convertAES($('#form-rfi').find('#Name').val()),
						email: convertSHA($('#form-rfi').find('#Email').val()),
						mobile: convertSHA($('#form-rfi').find('#Mobile').val()),
						state: $('#form-rfi').find('#State option:selected').text(),
						city: $('#form-rfi').find('#City option:selected').text(),
						dealer: $('#form-rfi').find('#Dealer option:selected').text(),
						model: $('#form-rfi').find('#CarModel option:selected').text(),
					}, 'book_showroom_visit_nexa');
					tdSubmit({
						'eventCategory': 'Brand Page Book Showroom Post OTP '+carname,
						'eventAction': 'click',
						'eventLabel': 'Brand Book Showroom - Post OTP '+carname,
					}, 'event_nexa');
					// GT code ends
					// $(that).parents('.registerstepform').show();
					// $('#step2').hide();
					// $(that).parents('.registerstepform').next().show();
					$('#step3').show();
				} else {
					$('.bsvotperror').show();
					dis = 0;
					$('.bshowroom_brand_otp').removeClass('disableCls');
				}
			}).error(function (err) {
				dis = 0;
			});
		}
	});	
	
	
	$('.bshowroom_landing_otp').click(function () {
		if (v.form() && !dis) {
			dis = 1;
			var that = this;
			// get access token
			var otpdata = $('#btdotp').val();
			$('#CarModel').removeAttr('disabled');
			var f_thankyouaccessories = $('#f_thankyouaccessories').val();
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}

			if(typeof f_thankyouaccessories == 'undefined')
			{
				var data = $('.form-rfi').serialize() + '&' + 'Otp=' + otpdata + '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP ;
			}else{
				var data = $('.form-rfi').serialize() + '&' + 'Otp=' + otpdata + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			 }
			
			data = data + '&CarModelName=' + $('#CarModel option:selected').text();
			$('#CarModel').attr('disabled', 'disabled');
			//var data = $(this).closest('form').serialize();
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			var rowdata2 = PrepareRequest('/api/sitecore/Forms/BookShowRoomVisit', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.bshowroom_landing_otp').addClass('disableCls');
					$('.bsvotperror').hide();
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky ShowRoom';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Show Room'
					}
					$.ajax(rowdata2).done(function (response2) {
						if ($.trim(response2) == null || $.trim(response2) == undefined){ dis = 0; console.log(response2); }else{
							if(response2.IsEnable !== 'undefined'){
								if(ra.utils.readCookie('pll_forms')==null){
									ra.utils.setCookieUniversal('pll_forms',ra.utils.marquee_event.pll_forms,'5000'); 
									ra.utils.setCookieUniversal('pll_forms_name','Book Show Room Visit','5000'); 
									Marquee_Total();
								}
						$('#myModal_testdrive').modal('toggle');
						$('.stepform1').hide();
						$('#sf-thankyou').show();
						var BalenoChk = $('#CarModel').val();

						if(BalenoChk=='16'){
						$('.thankyouMsgCarBoxSection').hide();
						$('.ExploreUrlresBaleno').show();
						}else{
						$('.thankyouMsgCarBoxSection').show();
						$('.ExploreUrlresBaleno').hide();
					}


					if(response2.TrueCallerLink!='' && response2.TrueCallerLinkText!=''){
						if (window.location.href.indexOf('Truecaller') > -1) {
							var myScript = document.createElement('script');
							myScript.setAttribute('src', response2.TrueCallerLink);
							document.head.appendChild(myScript);
						  }
					}

						// $('.thankyoutitleres').html(response2.ThankyouTitle);
						$('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 
						$('.BrandImageRes').attr('src', response2.BrandImage);
						$('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
						$('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
						$('.BrandImageResBig').attr('src', response2.BrandImage);
						if(response2.AccessoryItems){
						for(var i = 0; i < response2.AccessoryItems.length; i++){
								const element = response2.AccessoryItems[i];  
								$('.resulVal').append('<a href='+ element.AccessoryURL + '><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
						} 
					}
					}else if(response2){
						$('#myModal_testdrive').modal('toggle');
						$('.stepform1').hide();
						$('#sf-thankyou').show();
					}
				}
					}).error(function (err) {
						dis = 0;
					});
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Post OTP', carname, $('#Mobile').val());
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BS Post OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BS Post OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					tdSubmit({
						name: convertAES($('#form-rfi').find('#Name').val()),
						email: convertSHA($('#form-rfi').find('#Email').val()),
						mobile: convertSHA($('#form-rfi').find('#Mobile').val()),
						state: $('#form-rfi').find('#State option:selected').text(),
						city: $('#form-rfi').find('#City option:selected').text(),
						dealer: $('#form-rfi').find('#Dealer option:selected').text(),
						model: $('#form-rfi').find('#CarModel option:selected').text(),
					}, 'book_showroom_visit_nexa');
					tdSubmit({
						'eventCategory': 'Landing Page Book Showroom Post OTP '+carname,
						'eventAction': 'click',
						'eventLabel': 'Landing Book Showroom - Post OTP '+carname,
					}, 'event_nexa');
					// GT code ends
					// $(that).parents('.registerstepform').show();
					// $('#step2').hide();
					// $(that).parents('.registerstepform').next().show();
					$('#step3').show();
				} else {
					$('.bsvotperror').show();
					dis = 0;
					$('.bshowroom_landing_otp').removeClass('disableCls');
				}
			}).error(function (err) {
				dis = 0;
			});
		}
	});
	$('.rfi0').click(function () {
		tdSubmit({
			'eventCategory': 'Form submit',
			'eventAction': 'Click',
			'eventLabel': 'request for interest pre OTP',
		}, 'event_nexa');
		if (v.form()) {
			var data = $(this).closest('form').serialize();
			data = data + '&CarModelName=' + $('#CarModel option:selected').text() + '&FormType=' + $('.registerFormBox h2').text();
			var that = this;
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky-RFI';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Brand Page RFI'
					}
					//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Pre OTP', $('#CarModel option:selected').text(), $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(),
					   'Submit',
					   $('#CarModel option:selected').text() + ' RFI Pre OTP',
					   $('#CarModel option:selected').text(),
					   $('#Mobile').val(),
					   $('#f_type').val());
					// GT code ends
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					$(that).parents('.registerstepform').hide();
					$('#step1').hide();
					$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});


	$('.rfi1').click(function () {
		tdSubmit({
			'eventCategory': 'Form submit',
			'eventAction': 'Click',
			'eventLabel': 'request for interest post OTP',
		}, 'event_nexa');
		if (v.form()) {
			var data = $(this).closest('form').serialize();
			var that = this;
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.rfiotperror').hide();
					// GT code start
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky-RFI';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Brand Page RFI'
					}
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Post OTP', $('#CarModel option:selected').text(), $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(),
					 'Submit',
					 $('#CarModel option:selected').text() + ' RFI Post OTP',
					 $('#CarModel option:selected').text() ,
					 $('#Mobile').val(),
					 $('#f_type').val());
					//home = 'sticky'
					// GT code ends
					$(that).parents('.registerstepform').hide();
					$('#step2').hide();
					$(that).parents('.registerstepform').next().show();
					$('#step3').show();
				} else {
					$('.rfiotperror').show();
				}
			}).error(function (err) { });
		}
	});

	$('.rfi2').click(function () {
		if (v.form()) {
			var that = this;
			var data = $(this).closest('form').serialize();
			data = data + '&CarModelName=' + $('#CarModel option:selected').text() + '&CityName=' + $('#City option:selected').text() + '&StateName=' + $('#State option:selected').text() + '&DealerName=' + $('#Dealer option:selected').text() + '&CarModel=' + $('#CarModel option:selected').val();
			var rowdata = PrepareRequest('/api/sitecore/Forms/RegisterForInterest', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky-RFI';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Brand Page RFI'
					}
					//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', 'RFI Dealer', $('#CarModel option:selected').text(), $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' RFI Dealer', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					tdSubmit({
						name: convertAES($('#form-rfi').find('#Name').val()),
						email: convertSHA($('#form-rfi').find('#Email').val()),
						mobile: convertSHA($('#form-rfi').find('#Mobile').val()),
						state: $('#form-rfi').find('#State option:selected').text(),
						city: $('#form-rfi').find('#City option:selected').text(),
						dealer: $('#form-rfi').find('#Dealer option:selected').text(),
						model: $('#form-rfi').find('#CarModel option:selected').text()
					}, 'register_your_interest_nexa');
					// GT code ends
					$(that).parents('.registerstepform').hide();
					$('#step3').hide();
					$(that).parents('.registerstepform').next().show();
					$('#step4').show();
				}
			}).error(function (err) { });
		}
	});

	// call on first submit button
	$('.bshowroom_brand').click(function () {
		
		if (v.form()) {
			var that = this;
			$('#CarModel').removeAttr('disabled');
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}
			var Data = $(this).closest('form').serialize() + '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			$('#CarModel').attr('disabled', 'disabled');
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', Data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.verifyotp').val('');
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky ShowRoom';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Show Room'
					}
					$('#myModal_testdrive').modal('show');
					//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Pre OTP', carname, $('#Mobile').val());
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BS Pre OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BS Pre OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					tdSubmit({
						'eventCategory': 'Brand Page Book Showroom Pre OTP '+carname,
						'eventAction': 'click',
						'eventLabel': 'Brand Book Showroom - Pre OTP '+carname,
					}, 'event_nexa');
					
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					$(that).parents('.registerstepform').show();
					$('#step1').hide();
					//$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});
	$('.bshowroom_landing').click(function () {
		
		if (v.form()) {
			var that = this;
			$('#CarModel').removeAttr('disabled');
			var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
			var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}
			var Data = $(this).closest('form').serialize()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
			$('#CarModel').attr('disabled', 'disabled');
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', Data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.verifyotp').val('');
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky ShowRoom';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Show Room'
					}
					$('#myModal_testdrive').modal('show');
					//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Pre OTP', carname, $('#Mobile').val());
					var gacarmodel = (($('#f_carmodel').val() == 'Home' || $('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel + ' BS Pre OTP', gacarmodel, $('#Mobile').val(), $('#f_type').val());
					//DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' BS Pre OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					tdSubmit({
						'eventCategory': 'Landing Page Book Showroom Pre OTP '+carname,
						'eventAction': 'click',
						'eventLabel': 'Landing Book Showroom - Pre OTP '+carname,
					}, 'event_nexa');
					
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					$(that).parents('.registerstepform').show();
					$('#step1').hide();
					//$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});
	$('.bsv0').click(function () {
		tdSubmit({
			'eventCategory': 'Form submit',
			'eventAction': 'Click',
			'eventLabel': 'Book Test Drive Pre OTP',
		}, 'event_nexa');
		if (v.form()) {
			var that = this;
			var data = $(this).closest('form').serialize();
			data = data + '&CarModelName=' + $('#CarModel option:selected').text() + '&FormType=' + $('.registerFormBox h2').text();
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky ShowRoom';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Show Room'
					}
					//DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Pre OTP', carname, $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' BS Pre OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					$(that).parents('.registerstepform').hide();
					$('#step1').hide();
					$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});
	$('.bsv1').click(function () {
		tdSubmit({
			'eventCategory': 'Form submit',
			'eventAction': 'Click',
			'eventLabel': 'Book Test Drive Post OTP',
		}, 'event_nexa');
		if (v.form()) {
			var that = this;
			// get access token
			var data = $(this).closest('form').serialize();
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.bsvotperror').hide();
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky ShowRoom';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Show Room'
					}
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Post OTP', carname, $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' BS Post OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$(that).parents('.registerstepform').hide();
					$('#step2').hide();
					$(that).parents('.registerstepform').next().show();
					$('#step3').show();
				} else {
					$('.bsvotperror').show();
				}
			}).error(function (err) { });
		}
	});
	$('.bsv2').click(function () {
		if (v.form()) {
			// GT code start
			var carname = $('#CarModel option:selected').text();
			var formtype = $('#ftype').val()
			var eventcat = 'Sticky ShowRoom';
			if (formtype.toLowerCase() != 'sticky form') {
				eventcat = 'Show Room'
			}
			// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Visit', carname, $('#Mobile').val());
			DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' BS Dealer', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
			// GT code ends
			$(this).parents('.registerstepform').hide();
			$('#step3').hide();
			$(this).parents('.registerstepform').next().show();
			$('#step4').show();
		}
	});
	$('.bsv3').click(function () {
		if (v.form()) {
			var that = this;
			// get access token
			var that = this;
			var data = $(this).closest('form').serialize();
			data = data + '&CarModelName=' + $('#CarModel option:selected').text() + '&CityName=' + $('#City option:selected').text() + '&StateName=' + $('#State option:selected').text() + '&DealerName=' + $('#Dealer option:selected').text() + '&CustomerTypeName=' + $('#CustomerType option:selected').text();
			var rowdata = PrepareRequest('/api/sitecore/Forms/BookShowRoomVisit', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky ShowRoom';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Show Room'
					}
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-Show room Visit Preferred time', carname, $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' BS Preferred time', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$(that).parents('.registerstepform').hide();
					$('#sf4').hide();
					$(that).parents('.registerstepform').next().show();
				}
			}).error(function (err) { });
		}
	});


	$('.booktd0').click(function () {
		if (v.form()) {
			var that = this;
			var data = $(this).closest('form').serialize();
			data = data + '&CarModelName=' + $('#CarModel option:selected').text() + '&FormType=' + $('.registerFormBox h2').text();
			var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky Menu BTD';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Car Page Test Drive'
					}
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Pre OTP', carname, $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' BTD Pre OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$('#Names').val($('#Name').val());
					$('#Emails').val($('#Email').val());
					$('#Mobiles').val($('#Mobile').val());
					$(that).parents('.registerstepform').hide();
					$('#step1').hide();
					$(that).parents('.registerstepform').next().show();
					$('#step2').show();
					$('.resend0').css('pointer-events', 'none');
					OtpTimer();
					$('#counter').css('display', 'block');
					$('.resend0').css('color', 'grey');
				} else { }
			}).error(function (err) { });
		}
	});


	$('.booktd1').click(function () {
		if (v.form()) {
			var that = this;
			var data = $(this).closest('form').serialize();
			var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					$('.btdotperror').hide();
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky Menu BTD';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Car Page Test Drive'
					}
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Post OTP', carname, $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' BTD Post OTP', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$(that).parents('.registerstepform').hide();
					$('#step2').hide();
					$(that).parents('.registerstepform').next().show();
					$('#step3').show();
				} else {
					$('.btdotperror').show();
				}
			}).error(function (err) { });
		}
	});

	$('.booktd2').click(function () {
		if (v.form()) {
			// GT code start
			var carname = $('#CarModel option:selected').text();
			var formtype = $('#ftype').val()
			var eventcat = 'Sticky Menu BTD';
			if (formtype.toLowerCase() != 'sticky form') {
				eventcat = 'Car Page Test Drive'
			}
			// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Dealer', carname, $('#Mobile').val());
			DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' BTD Dealer', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
			// GT code ends
			$(this).parents('.registerstepform').hide();
			$('#step3').hide();
			$(this).parents('.registerstepform').next().show();
			$('#step4').show();
		}
	});


	$('.booktd3').click(function () {
		if (v.form()) {
			var that = this;
			var data = $(this).closest('form').serialize();
			data = data + '&CarModelName=' + $('#CarModel option:selected').text() + '&CityName=' + $('#City option:selected').text() + '&StateName=' + $('#State option:selected').text() + '&DealerName=' + $('#Dealer option:selected').text() + '&CustomerTypeName=' + $('#CustomerType option:selected').text();
			var rowdata = PrepareRequest('/api/sitecore/Forms/BookTestDrive', data);
			$.ajax(rowdata).done(function (response) {
				if (response.IsSuccess) {
					// GT code start
					var carname = $('#CarModel option:selected').text();
					var formtype = $('#ftype').val()
					var eventcat = 'Sticky Menu BTD';
					if (formtype.toLowerCase() != 'sticky form') {
						eventcat = 'Car Page Test Drive'
					}
					// DataLayerMSILDL_FormSubmission.Push(eventcat, 'Submit', carname + '-BTD Dealer Preferred Time', carname, $('#Mobile').val());
					DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' ' + $('#CarModel option:selected').text() + ' BTD Dealer Preferred Time', ($('#f_carmodel').val() == 'Home' && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
					// GT code ends
					$(that).parents('.registerstepform').hide();
					$('#sf4').hide();
					$(that).parents('.registerstepform').next().show();
					$('#sf-thankyou').show();
				}
			}).error(function (err) { });
		}
	});
});
'use strict';

$('.sendtonext').on('click', function(){
    $(this).parents('div.first-step-new').hide();
    $('.stepformBox').show();
    DataLayerMSILDL_Common.Push('user_action', 'nexa_finance loan offer', 'click', 'check for loan offers-step 1');
    DataLayerMSILDL_Common.Push('user_action', 'nexa_finance loan offer', 'click', $('#HdnCarModelName').val()+'-'+$('#ddcity_fnc').find('option:selected').text() + ' selected'
);

});
//Brand Page Mast Head JS
'use strict';
/*globals ra */

$(document).ready(function () {

// Both View
 var priceListForSelectedCity_fnc;
 //Mobileview
 var priceListForSelectedCity_fnc_mobile;
 //Common View
 var getCookiesval = getCookie('ActiveVariantCity');
 if (getCookiesval) {
     getCookiesval = getCookiesval.split('+');
 }
 //Desktopview
 if ($('.registerFormNew').length > 0) {
     getVariantlist();
 }
//Mobileview
if($('#exampleFormControlSelect2_fnc_mobile').length > 0) {
       getVariantlist();
}


 function getVariantlist() {
     //reset variant dropdown
     $('#exampleFormControlSelect2_fnc')
         .empty()
         .append('<option selected="selected" value="">Select Variant</option>');
     //mobileview
     $('#exampleFormControlSelect2_fnc_mobile')
     .empty()
     .append('<option selected="selected" value="">Select Variant</option>');    

     // get variant list based on model
     //postDetails('http://www.mocky.io/v2/5e3abd292f0000e19056c5cb', JSON.stringify({ 'carModelID': $('#HdnFinCarModelIdMobile').val() })).then(function (resData) {
     //originapi 
     ///api/sitecore/MasterData/CarVarientByCarModel
     postDetails('/api/sitecore/MasterData/CarVarientByCarModel', JSON.stringify({
         'carModelID': $('#HdnFinCarModelIdMobile').val()
     })).then(function (resData) {
         if (resData.status.toLowerCase() == 'success'){
             getCitylist()
             for (var i = 0; i < resData.car_variant_list.length; i++) {
                 var option = $('<option></option>');
                 option.attr('value', resData.car_variant_list[i].msil_code);
                 option.attr('data-id', resData.car_variant_list[i].id);
                 option.text(resData.car_variant_list[i].car_variant);



     if (window.matchMedia('only screen and (min-width: 992px)').matches)  
     { 
        $('#exampleFormControlSelect2_fnc').append(option);
     }
     if (window.matchMedia('only screen and (max-width: 992px)').matches){
      
        $('#exampleFormControlSelect2_fnc_mobile').append(option);
        }
     
             }
             if (getCookiesval) {
                 //Check if city is selected or not
                 // $('#ddcity_fnc').val(getCookiesval[0]);
                 $('#ddcity_fnc').val('08');
                 $('#ddcity_fnc_mobile').val('08');
                 $(".price_fnc").html('<i class="fa fa-rupee-sign"></i>');
                 // make 1 st option of variant drowp down as  Selected

                 

     if (window.matchMedia('only screen and (min-width: 992px)').matches)  
     {
        $('#exampleFormControlSelect2_fnc').val(getCookiesval[1]);
     }
     if (window.matchMedia('only screen and (max-width: 992px)').matches){
        
        $('#exampleFormControlSelect2_fnc_mobile').val(getCookiesval[1]);
     }



             } else {
                 //Check if city is selected or not
                 if ($('#ddcity_fnc').val() == 'Location') {
                     $('#ddcity_fnc').val('08');
                 }
                 if ($('#ddcity_fnc_mobile').val() == 'Location') {
                 $('#ddcity_fnc_mobile').val('08');
             } 
                 // make 1 st option of variant drowp down as  Selected


    
     if (window.matchMedia('only screen and (min-width: 992px)').matches)  
     {
        $('#exampleFormControlSelect2_fnc').prop('selectedIndex', 1);
     }     
     if (window.matchMedia('only screen and (max-width: 992px)').matches){
      
        $('#exampleFormControlSelect2_fnc_mobile').prop('selectedIndex', 1);
     }


             }
         }
     })
 }

 function getCitylist() {
     // Get model message form server
     //Get All Cities
     //$('.nfloaderMain').show();
     $.ajax({
         contentType: 'application/json; charset=utf-8',
         dataType: 'json',
         //url:'http://www.mocky.io/v2/5e3abd992f00005da156c5cf', //'/api/sitecore/MasterData/CityData',
         url: '/api/sitecore/MasterData/CityData',
         cache: false,
         type: 'GET',
         success: function (res) {
             $('.nfloaderMain').hide();
              res = JSON.parse(res);
             $('#ddcity_fnc').empty();
              $('#ddcity_fnc_mobile').empty();    
             if (res.status.toLowerCase() == 'success') {
                 var data = res.city_list;
                 for (var i = 0; i < data.length; i++) {
                     var option = $('<option></option>');
                     option.attr('value', data[i].msil_code);
                     option.attr('data-id', data[i].id);
                     option.text(data[i].city);


     if(window.matchMedia('only screen and (min-width: 992px)').matches)  
     {
        $('#ddcity_fnc').append(option);
     }    
     if(window.matchMedia('only screen and (max-width: 992px)').matches){
      
        $('#ddcity_fnc_mobile').append(option);
     }

                 }
                 if (getCookiesval) {
                     //Check if city is selected or not
                     //$('#ddcity_fnc').val(getCookiesval[0]);
                     $('#ddcity_fnc').val('08');
                     $('#ddcity_fnc_mobile').val('08');
                     $(".price_fnc").html('<i class="fa fa-rupee-sign"></i>');
                 } else {
                     //Check if city is selected or not
                     $('#ddcity_fnc').val('08');
                     $('#ddcity_fnc_mobile').val('08');
                 }


     
     if (window.matchMedia('only screen and (max-width: 992px)').matches)  
     {
        getPriceDetails_fnc();
     }
     if (window.matchMedia('only screen and (min-width: 992px)').matches){
              getPriceDetails_fnc();
     }


             }

         },
         error: function (xhr, status, error) {
             $('.nfloaderMain').hide();
         }
     });
 }

 $('#ddcity_fnc').change(function () {
     //$('.price_fnc').html('<i class='fa fa-rupee-sign'></i>');
     getPriceDetails_fnc();
 });

 $('#ddcity_fnc_mobile').change(function () {
 //$('.price_fnc').html('<i class='fa fa-rupee-sign'></i>');
 getPriceDetails_fnc();
});

 $('#exampleFormControlSelect2_fnc').change(function () {
    $(".price_fnc").html('<i class="fa fa-rupee-sign"></i>');
     SetVariantPrice_fnc();
 });

$('#exampleFormControlSelect2_fnc_mobile').change(function () {
    $(".price_fnc").html('<i class="fa fa-rupee-sign"></i>');
 SetVariantPrice_fnc();
});


 function getPriceDetails_fnc() {
     if ($('#HdnFinCarModelCodeMobile').val() && $('#ddcity_fnc').val() || $('#ddcity_fnc_mobile').val()) {
                      var citycodevalue;




      
     if (window.matchMedia('only screen and (min-width: 992px)').matches)  
     {  
        if($('#ddcity_fnc').val() !=''  && $('#ddcity_fnc').val() != null){
            var citycodevalue = $('#ddcity_fnc').find('option:selected').val();
      }
     }
     if (window.matchMedia('only screen and (max-width: 992px)').matches)  
     {
        if($('#ddcity_fnc_mobile').val() !=''  && $('#ddcity_fnc_mobile').val() != null){
            var citycodevalue = $('#ddcity_fnc_mobile').find('option:selected').val(); 
      }
     }


         var carCityModelDetails = { CarModelCode: $('#HdnFinCarModelCodeMobile').val(), CityCode: citycodevalue  }


         carCityModelDetails = JSON.stringify({ 'carCityModelDetails': carCityModelDetails });
         $.ajax({
             type: 'POST',
             //url: 'http://www.mocky.io/v2/5e3abdf22f00009f9156c5d3', //'/api/sitecore/API/GetCarPrice',
             url: '/api/sitecore/API/GetCarPrice',
             data: carCityModelDetails,
             contentType: 'application/json; charset=utf-8',
             datatype: 'json',
             async: 'true',
             success: function (response) {
                 response = jQuery.parseJSON(response);
                 var Price = '';
                 var i;
                 priceListForSelectedCity_fnc = response;
                 priceListForSelectedCity_fnc_mobile = response;
                 if (response != null && response.items != null) {
                     response.items.sort(function (a, b) {
                         return a['METALLIC PRICE'] - b['METALLIC PRICE']
                     });
                     if (response.items.length) {
                         var ddlItem = '';
                         var ddlItemMobile = '';
                         ddlItem = $('#exampleFormControlSelect2_fnc option');
                         $('#exampleFormControlSelect2_fnc').empty();

                          ddlItemMobile = $('#exampleFormControlSelect2_fnc_mobile option');
                         $('#exampleFormControlSelect2_fnc_mobile').empty();
                         
                         for (var i = 0; i < response.items.length; i++) {
                             ddlItem.each(function () {
                                 if(this.value && response.items[i]['MODL_CODE'].includes(this.value )){
                                 //if (this.value == response.items[i]['MODL_CODE']) {
                                     var option = $('<option></option>');
                                     option.attr('value', this.value);
                                     option.attr('data-id', $(this).data('id'));
                                     option.text(response.items[i]['MODL_DESC']);
                                     $('#exampleFormControlSelect2_fnc').append(option);
                                 }
                             });

                             //mobile view
                             ddlItemMobile.each(function () {
                                 if(this.value && response.items[i]['MODL_CODE'].includes(this.value )){
                                 //if (this.value == response.items[i]['MODL_CODE']) {
                                     var option = $('<option></option>');
                                     option.attr('value', this.value);
                                     option.attr('data-id', $(this).data('id'));
                                     option.text(response.items[i]['MODL_DESC']);
                                     $('#exampleFormControlSelect2_fnc_mobile').append(option);
                                 }

                             });

                         }

                         getCookiesval = getCookie('ActiveVariantCity');

                         if (getCookiesval) {
                             getCookiesval = getCookiesval.split('+');
                             $('#exampleFormControlSelect2_fnc option').each(function () {
                                 if (this.value == getCookiesval[1]) {
                                     // make 1 st option of variant drowp down as  Selected
                                     $('#exampleFormControlSelect2_fnc').val(getCookiesval[1]);
                                 }

                             });
                           //Mobile View
                            $('#exampleFormControlSelect2_fnc_mobile option').each(function () {
                                 if (this.value == getCookiesval[1]) {
                                     // make 1 st option of variant drowp down as  Selected
                                     $('#exampleFormControlSelect2_fnc_mobile').val(getCookiesval[1]);
                                 }

                             }); 
                         } else {
                             // make 1 st option of variant drowp down as  Selected
                             $('#exampleFormControlSelect2_fnc').prop('selectedIndex', 0);
                                $('#exampleFormControlSelect2_fnc_mobile').prop('selectedIndex', 0);
                         }


                         SetVariantPrice_fnc();
                         for (i = 0; i < response.items.length; i++) {               
                  if($('#exampleFormControlSelect2_fnc').val() != null){
                   if(response.items[i].MODL_CODE.toUpperCase().includes($('#exampleFormControlSelect2_fnc').val().toUpperCase())){
                             //if ($('#exampleFormControlSelect2_fnc').val().toUpperCase() === response.items[i].MODL_CODE.toUpperCase()) {
                                 Price = (response.items[i]['METALLIC PRICE'] != null) ? response.items[i]['METALLIC PRICE'] : response.items[i]['NON-METALLIC PRICE'];
                                 break;
                             }
                  }
                  if($('#exampleFormControlSelect2_fnc_mobile').val() != null){
                     if(response.items[i].MODL_CODE.toUpperCase().includes($('#exampleFormControlSelect2_fnc_mobile').val().toUpperCase())){
                             //if ($('#exampleFormControlSelect2_fnc').val().toUpperCase() === response.items[i].MODL_CODE.toUpperCase()) {
                                 Price = (response.items[i]['METALLIC PRICE'] != null) ? response.items[i]['METALLIC PRICE'] : response.items[i]['NON-METALLIC PRICE'];
                                 break;
                             }
                  }

                         }










                         if (Price != null) {
                             var commaSeperatedPrice = toCommaSepratedPrice(Price);
                             //getExtimatePrice(Price);
                             $(".price_fnc").html('<i class="fa fa-rupee-sign"></i> ' + commaSeperatedPrice);
                         }
                     } else {
                         // make 1 st option of variant drowp down as  Selected
                         $('#exampleFormControlSelect2_fnc').prop('selectedIndex', 1);
                         $('#exampleFormControlSelect2_fnc_mobile').prop('selectedIndex', 1);
                         Price = '';
                         $(".price_fnc").html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));

                     }
                 }
             },
             error: function (response) {
              }
         });
     }

 }




function SetVariantPrice_fnc() {
 var i;
 var Price = '';
for (i = 0; i < priceListForSelectedCity_fnc_mobile.items.length; i++) {
     if ($('#exampleFormControlSelect2_fnc_mobile').val() && priceListForSelectedCity_fnc_mobile.items[i].MODL_CODE.toUpperCase().includes($('#exampleFormControlSelect2_fnc_mobile').val().toUpperCase())) {
         //if ($('#exampleFormControlSelect2_fnc_mobile').val() && $('#exampleFormControlSelect2_fnc_mobile').val().toUpperCase() === priceListForSelectedCity_fnc_mobile.items[i].MODL_CODE.toUpperCase()) {
         Price = (priceListForSelectedCity_fnc_mobile.items[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity_fnc_mobile.items[i]['METALLIC PRICE'] : priceListForSelectedCity_fnc_mobile.items[i]['NON-METALLIC PRICE'];
         break;
     }
 }
for (i = 0; i < priceListForSelectedCity_fnc.items.length; i++) {
         if ($('#exampleFormControlSelect2_fnc').val() && priceListForSelectedCity_fnc.items[i].MODL_CODE.toUpperCase().includes($('#exampleFormControlSelect2_fnc').val().toUpperCase())) {
             //if ($('#exampleFormControlSelect2_fnc').val() && $('#exampleFormControlSelect2_fnc').val().toUpperCase() === priceListForSelectedCity_fnc.items[i].MODL_CODE.toUpperCase()) {
             Price = (priceListForSelectedCity_fnc.items[i]['METALLIC PRICE'] != null) ? priceListForSelectedCity_fnc.items[i]['METALLIC PRICE'] : priceListForSelectedCity_fnc.items[i]['NON-METALLIC PRICE'];
             break;
         }
     }


         if (Price != null) {
         getExtimatePrice(Price);
         $(".price_fnc").html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));

         var carModel = $('#HdnCarModelName').val();
         if (carModel) {
             setCookie('last_interaction_' + carModel, 'varientID=' + $('#exampleFormControlSelect2_fnc').val() + '&varientPrice=' + Price);
         }
         if (carModel) {
         setCookie('last_interaction_' + carModel, 'varientID=' + $('#exampleFormControlSelect2_fnc_mobile').val() + '&varientPrice=' + Price);
     }

     } else {
         Price = '';
         $(".price_fnc").html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(Price));

     }
}



function getExtimatePrice(params) { ///api/sitecore/fmpapi/emiminimum 
     postDetails('/api/sitecore/fmpapi/emiminimum ', JSON.stringify({
         'price': params
     })).then(function (res) {
         if (res) {
             $('.exprice_fnc').empty();
             $('.exprice_fnc').html('<i class="fa fa-rupee-sign"></i> ' + toCommaSepratedPrice(res.loan_emi) + ' <span>/month</span>');
         }
     }).catch(function (err) {

     })
 }

















    if($('#form-fnc').length)
    {
  // bootstrap datepicker
  $('.dateselector.date').datepicker({
    autoclose: true,
    format: 'dd-mm-yyyy',
    endDate: new Date(new Date().getFullYear() - 18, new Date().getMonth(), new Date().getDate()),
    defaultViewDate: new Date(new Date().getFullYear() - 18, new Date().getMonth(), new Date().getDate()),
  });
    }

    var vfnc = $('#form-fnc').validate({
        rules: {
            Name: {
                required: true,
                maxlength: 30,
                name_regex: /^[A-Za-z]+$/
            },
            Email: {
                required: true,
                email: true,
                maxlength: 100,
                validateDomainName: true,
                email_regex: /^(([^<>()[\]\\.,;:\s@\']+(\.[^<>()[\]\\.,;:\s@\']+)*)|(\'.+\'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/igm
            },
            Mobile: {
                required: true,
                minlength: 10,
                maxlength: 10,
                mobile_regex: /^[^0-5]\d{9}$/,
                number: true
            },
            birthDate: {
                required: true
            },
            IsDisclaimerAccepted_fn: 'required',
            Otp: {
                required: true,
                minlength: 4,
                number: true,
                maxlength: 4
            },
            selectState: {
                required: true
            },
            selectCity: {
                required: true
            },
            selectDealer: {
                required: true
            }
        },
        messages: {
            Name: $('#form-fnc').find('.Name').attr('data-error'),
            Email: $('#form-fnc').find('.Email').attr('data-error'),
            Mobile: $('#form-fnc').find('.Mobile').attr('data-error'),
            IsDisclaimerAccepted_fn: $('#form-fnc').find('#IsDisclaimerAccepted_fn').attr('data-error'),
            Otp: $('#form-fnc').find('#Otp').attr('data-error'),
            birthDate: $('#form-fnc').find('#regDatepicker').attr('data-error'),
            selectState: $('#form-fnc').find('.selectState').attr('data-error'),
            selectCity: $('#form-fnc').find('.selectCity').attr('data-error'),
            selectDealer: $('#form-fnc').find('.selectDealer').attr('data-error')
        },
        errorElement: 'em',
        errorPlacement: function (error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');
            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function (element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
            $('.rfiotperror').hide();
        },
        unhighlight: function (element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function (form) {
            form.submit();
        }
    });

    var $inputEmailFnc = $('#form-fnc .Email');
	$inputEmailFnc.keypress(function(e) {
	  var max = 99;
	  if ($inputEmailFnc.val().length > max) {
		  $inputEmailFnc.val($inputEmailFnc.val().substr(0, max));
	  }
	  var key = e.keyCode;
	  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
	  if (!returnn) {
		return false;
	  }
	});

    var interval_fnc;
    function OtpTimer_fnc() {
        var count = 120;
        clearInterval(interval_fnc);
        interval_fnc = setInterval(function () {
            $('#count').html(count);
            count--;
            if (count === 0) {
                clearInterval(interval_fnc);
                $('#count').html('');
                $('#counter').css('display', 'none');
                $('.resend0_fnc').css('pointer-events', 'inherit');
                $('.resend0_fnc').css('color', 'red');
                $('.resendOtp').css('cursor', 'pointer');
            }
        }, 1000);
    }

    $('.resend0_fnc').click(function () {
        $('.nfloaderMain').show();
        var rowdata = PrepareRequest('/api/sitecore/FMPAPI/SendOTP', $('#form-fnc').serialize());
        $.ajax(rowdata).done(function (response) {
            $('.nfloaderMain').hide();
            response = JSON.parse(response);
            if (response.status.toLowerCase() == 'success') {
                $('.rfiotperror').hide();
                $('.resend0_fnc').css('pointer-events', 'none');
                $('#counter').css('display', 'block');
                OtpTimer_fnc();
                $('.resend0_fnc').css('color', 'grey');
                $('.resend0_fnc').css('cursor', 'auto');
            } else if (response.message.toLowerCase() == 'businessexception') {
                if(response.errors)
                            {
                                var newmsg = response.errors.map(function (elem) {
                                    return elem.error_message;
                                }).join(', ');
                                alert(newmsg);
                                errorDataLayer(newmsg);
                            }
                            else{
                                alert(response.error_message);
                                errorDataLayer(response.error_message);
                            }
            }
            else {
                alert(response.error_message);
                errorDataLayer(response.error_message);
            }
        }).error(function (err) {
            $('.nfloaderMain').hide();
         });
    });

    $('.fncopen0_NO').click(function () {
        $('.rfiotperror').hide();
        $('#sf4').hide();
        $('#sf3').show();
        GetFinanceStates();
        DataLayerMSILDL_Common.Push('user_action', 'nexa_active finance journey overlay', 'click', 'No');

    });

    var enquery_data;
    $('.open1_fnc').click(function () {
        if (vfnc.form()) {
            tdSubmit({
                'eventCategory': 'nexa_finance offer form',
                'eventAction': 'Click',
                'eventLabel': 'otp submit',
            }, 'event_nexa');
            $('.nfloaderMain').show();
            var rowdata = PrepareRequest('/api/sitecore/FMPAPI/VerifyOTP', 'Mobile=' + $('#form-fnc').find('.Mobile').val() + '&Email=' + $('#form-fnc').find('.Email').val() + '&Otp=' + $('#form-fnc').find('#Otp').val());
            $.ajax(rowdata).done(function (response) {
                $('.nfloaderMain').hide();
                response = JSON.parse(response);
                if (response.status) {
                    tdSubmit({
                        'mobile':convertSHA($('#form-fnc').find('.Mobile').val())
                     }, 'nexa_fmp_mobile_verify');
                    enquery_data = null;
                    if(response.enquiry_id)
                    {
                        $('.pre-tag').hide();
                        enquery_data = response;
                        DataLayerMSILDL_Common.Push('user_action', 'nexa_finance loan offer', 'submit', 'otp submit');
                        if(response.loan_status == 10056 || response.loan_status == 10057)
                        {
                            $('.fncopen0_NO').hide();
                            $('.fncopen0_YES').val('PROCEED');
                            $('.rfiotperror').hide();
                        }
                        else
                        {
                            $('.fncopen0_NO').show();
                            $('.fncopen0_YES').val('YES');
                            $('.rfiotperror').hide();
                        }
                        $('#sf4').find('p').html('You have an active finance journey for the car <strong>' +response.ModalName +'</strong>. Do you want to continue where you left off?')
                        $('#sf2').hide();
                        $('#sf4').show();
                    }
                    else{
                        $('.rfiotperror').hide();
                        $('#sf2').hide();
                        $('#sf3').show();
                        GetFinanceStates();
                    }
                }
                else if (response.message.toLowerCase() == 'businessexception') {
                    if(response.errors)
                                {
                                    var newmsg = response.errors.map(function (elem) {
                                        return elem.error_message;
                                    }).join(', ');
                                    alert(newmsg);
                                    errorDataLayer(newmsg);
                                }
                                else{
                                    alert(response.error_message);
                                    errorDataLayer(response.error_message);
                                }
                }
                else {
                    $('.rfiotperror').text(response.message);
                    $('.rfiotperror').show();
                }
            }).error(function (err) {
                $('.nfloaderMain').hide();
            });
        }
    });

    $('.open2_fnc').click(function () {
        if (vfnc.form()) {
            $('.nfloaderMain').show();
            $(this).attr('disabled', 'disabled');
            var that = this;
            tdSubmit({
                'name': convertAES($('#form-fnc').find('.Name').val()),
                'email': convertSHA($('#form-fnc').find('.Email').val()),
                'dob': convertAES($('#form-fnc').find('#regDatepicker').val()),
                'city': $('#form-fnc').find('.selectCity option:selected').text(),
                'state': $('#form-fnc').find('.selectState option:selected').text(),
                'dealer': $('#form-fnc').find('.selectDealer option:selected').text(),
                'model':  $('#HdnCarModelName').val(),
                'variant':$('#exampleFormControlSelect2_fnc').find('option:selected').text()
              }, 'nexa_fmp_interest');
              tdSubmit({
                'eventCategory': 'nexa_finance offer form',
                'eventAction': 'Click',
                'eventLabel': $('#form-fnc').find('.selectState option:selected').text()+'-'+$('#form-fnc').find('.selectCity option:selected').text()+'-'+$('#form-fnc').find('.selectDealer option:selected').text(),
            }, 'event_nexa');
            tdSubmit({
                'eventCategory': 'nexa_finance offer form',
                'eventAction': 'Click',
                'eventLabel': 'check for loan offers-step 2',
            }, 'event_nexa');
            postDetails('/api/sitecore/FMPAPI/CustomerEnquiry', JSON.stringify({
                'first_name': $('#form-fnc').find('.Name').val(),
                'email': $('#form-fnc').find('.Email').val(),
                'mobile': $('#form-fnc').find('.Mobile').val(),
                'dob': $('#form-fnc').find('#regDatepicker').val(),
                'city': $('#form-fnc').find('.selectCity option:selected').val(),
                'state': $('#form-fnc').find('.selectState option:selected').val(),
                'dealer': $('#form-fnc').find('.selectDealer option:selected').val(),
                'car_model': $('#HdnFinCarModelId').val(),
                'car_variant': $('#exampleFormControlSelect2_fnc').find('option:selected').data('id'),
                'disclaimer_flag': 'Y',
                'channel': 'NX',
                'force_create_flag':(enquery_data)?'Y':null,
                'existing_enquiry_id':(enquery_data)?enquery_data.enquiry_id:null
            })).then(function (res) {
                $('.nfloaderMain').hide();
                tdSubmit({
                    'variant':$('#exampleFormControlSelect2_fnc').find('option:selected').text(),
                    'state':$('#form-fnc').find('.selectState option:selected').text()
                }, 'nexa_fmp_emi');
                $(that).removeAttr('disabled');
                var city_fn = $('#form-fnc').find('.selectCity option:selected').text();
                var ischeck = false;
                DataLayerMSILDL_Common.Push('user_action', 'nexa_finance loan offer', 'click', 'check for loan offers-step 2');
                if (res.status && res.status.toLocaleLowerCase() == 'success') {
                    for (var index = 0; index < cityList.length; index++) {
                        const element = cityList[index];
                        if (element.city.toLocaleLowerCase() == city_fn.toLocaleLowerCase()) {
                            ischeck = true;
                            break;
                        }
                    }
                    if (ischeck) {
                        var rowdata = {
                            'name': $('#form-fnc').find('.Name').val(),
                            'email': $('#form-fnc').find('.Email').val(),
                            'mobile': $('#form-fnc').find('.Mobile').val(),
                            'dob': $('#form-fnc').find('#regDatepicker').val(),
                            'enquiry_id': res.enquiry_id,
                            'car_model': $('#HdnFinCarModelId').val(),
                            'car_variant': $('#exampleFormControlSelect2_fnc option:selected').data('id'),
                            'variant_code':$('#exampleFormControlSelect2_fnc option:selected').val()+'00',
                            'model_code':$('#HdnFinCarModelCode').val(),
                            'color_code':'ZYR',
                            'city_name':city_fn,
                            'car_name':$('#HdnCarModelName').val(),
                            'state': $('#form-fnc').find('.selectState option:selected').val(),
                            'city': $('#form-fnc').find('.selectCity option:selected').val(),
                            'dealer': $('#form-fnc').find('.selectDealer option:selected').val(),
                            'page':0
                        }

                        setDataInLocal('enquiry_details', JSON.stringify(rowdata));
                        setCookie('enquiry_details', JSON.stringify(rowdata));
                        removeDataInLocal('buildArray');
                        removeDataInLocal('badcrum');
                        window.location.href = '/nexa-finance/nexafinance-price-summary';
                    }
                    else {
                        $('#sf1').hide();
                        $('#sf2').hide();
                        $('#sf3').hide();
                        $('.pre-tag').hide();
                        $('#sf-thankyou').html('<p>Thank you for expressing your interest, we will get back to you.</p>')
                        $('#sf-thankyou').show();
                    }
                }
                else if (res.message.toLowerCase() == 'businessexception') {
                    if(res.errors)
                                {
                                    var newmsg = res.errors.map(function (elem) {
                                        return elem.error_message;
                                    }).join(', ');
                                    alert(newmsg);
                                    errorDataLayer(newmsg);
                                }
                                else{
                                    alert(res.error_message);
                                    errorDataLayer(res.error_message);
                                }
                }
                else {
                    $('#sf1').hide();
                    $('#sf2').hide();
                    $('#sf3').hide();
                    $('.pre-tag').hide();
                    $('#sf-thankyou').html('<p>' + res.error_message + '</p>');
                    errorDataLayer(res.error_message);
                    $('#sf-thankyou').show();
                }
            }).catch(function (err) {
                $('.nfloaderMain').hide();
            })
        }
    });
    $('.fncopen0').click(function () {
        if (vfnc.form()) {
            $(this).attr('disabled', 'disabled');
            var that = this;
            deleteCookie('enquiry_details');
            deleteCookie('final_loanoffer');
            tdSubmit({
                'eventCategory': 'nexa_finance offer form',
                'eventAction': 'Click',
                'eventLabel': 'continue button',
            }, 'event_nexa');
            DataLayerMSILDL_Common.Push('user_action', 'nexa_finance loan offer', 'click', 'continue button');
            var rowdata = PrepareRequest('/api/sitecore/FMPAPI/SendOTP', 'Mobile=' + $('#form-fnc').find('.Mobile').val());
            $('.nfloaderMain').show();
            $.ajax(rowdata).done(function (response) {
                $('.nfloaderMain').hide();
                $(that).removeAttr('disabled');
                response = JSON.parse(response);
                if (response.status.toLowerCase() == 'success') {
                    $('#sf1').hide();
                    $('#sf2').show();
                    $('#sf2').find('#Names').val($('#form-fnc').find('.Name').val())
                    $('#sf2').find('#Emails').val($('#form-fnc').find('.Email').val());
                    $('#sf2').find('#Mobiles').val($('#form-fnc').find('.Mobile').val());
                    $('.resend0_fnc').css('pointer-events', 'none');
                    OtpTimer_fnc();
                    $('#counter').css('display', 'block');
                    $('.resend0_fnc').css('color', 'grey');
                    $('.resend0_fnc').css('cursor', 'auto');

                } else if (response.message.toLowerCase() == 'businessexception') {
                    if(response.errors)
                                {
                                    var newmsg = response.errors.map(function (elem) {
                                        return elem.error_message;
                                    }).join(', ');
                                    alert(newmsg);
                                    errorDataLayer(newmsg);
                                }
                                else{
                                    alert(response.error_message);
                                    errorDataLayer(response.error_message);
                                }
                }
                else {
                    alert(response.error_message);
                    errorDataLayer(response.error_message);
                }
            }).error(function (err) {
                $('.nfloaderMain').hide();
             });
        }
    })

 //finance state populated
 function GetFinanceStates() {
    $('.nfloaderMain').show();
    var rowdata = PrepareRequest('/api/sitecore/MasterData/StateData', '');
    $.ajax(rowdata).done(function (response) {
        $('.nfloaderMain').hide();
        response = JSON.parse(response);
        if (response.state_list.length) {
            for (var i = 0; i < response.state_list.length; i++) {
                var option = $('<option></option>');
                option.attr('value', response.state_list[i].id);
                option.text(response.state_list[i].state);
                $('.registerstepform.stepform3').find('.selectState').append(option);
            }

        }
    })
        .error(function (err) {
            $('.nfloaderMain').hide();
         });
}

$('.registerstepform.stepform3').find('.selectState').change(function () {
    if (this.value) {
        $('.nfloaderMain').show();
        postDetails('/api/sitecore/MasterData/CityData', JSON.stringify({ 'stateID': this.value })).then(function (response) {
            $('.nfloaderMain').hide();
            if (response.status.toLowerCase() == 'success') {
                 DataLayerMSILDL_Common.Push('user_action', 'nexa_finance loan offer', 'click', $('#form-fnc').find('.selectState option:selected').text());
                $('.registerstepform.stepform3').find('.selectCity')
                    .empty()
                    .append('<option selected="selected" value="">Select City*</option>');
                $('.registerstepform.stepform3').find('.selectDealer')
                    .empty()
                    .append('<option selected="selected" value="">Select Dealer*</option>');
                for (var i = 0; i < response.city_list.length; i++) {
                    var option = $('<option></option>');
                    option.attr('value', response.city_list[i].id);
                    option.text(response.city_list[i].city);
                    $('.registerstepform.stepform3').find('.selectCity').append(option);
                }
            }
        })
            .catch(function (err) {
                $('.nfloaderMain').hide();
             })

    }
});

    $('.registerstepform.stepform3').find('.selectDealer').change(function () {
     DataLayerMSILDL_Common.Push('user_action', 'nexa_finance loan offer', 'click', $('#form-fnc').find('.selectDealer option:selected').text());
    });

    $('.registerstepform.stepform3').find('.selectCity').change(function () {
        getFinanceDealerDataBasedOncity($(this).val());

    });

    function getFinanceDealerDataBasedOncity(id) {
        $('.nfloaderMain').show();
        getData('/api/sitecore/MasterData/DealerByCityData?cityID=' + id).then(function (res) {
            res = JSON.parse(res);
            $('.nfloaderMain').hide();
            DataLayerMSILDL_Common.Push('user_action', 'nexa_finance loan offer', 'click', $('#form-fnc').find('.selectCity option:selected').text());
            if (res.dealer_list.length) {
                $('.registerstepform.stepform3').find('.selectDealer')
                    .empty()
                    .append('<option selected="selected" value="">Select Dealer*</option>');
                for (var i = 0; i < res.dealer_list.length; i++) {
                    var option = $('<option></option>');
                    option.attr('value', res.dealer_list[i].id);
                    option.text(res.dealer_list[i].dealer_name);
                    $('.registerstepform.stepform3').find('.selectDealer').append(option);
                }
            }

        }).catch(function (err) {
            $('.nfloaderMain').hide();
        })
    }
    //end finance


                                                                            
                                                              
//Car Varient
if (window.matchMedia('only screen and (min-width: 992px)').matches)  
{
$('#exampleFormControlSelect2_fnc').change(function(){  
    var carvarient = $(this).val();   
    var brandname = $('#HdnCarModelName').val();  
    var eventlevelvalue = brandname+'-'+carvarient; 
    var event = 'Variant Selection';             
    var eventCategory =  'Top Banner Variant Selection'; 
     DataLayerMSILDL_Common.Push(event,eventCategory ,'click', eventlevelvalue); 
    });
}
if (window.matchMedia('only screen and (max-width: 992px)').matches){
   
$('#exampleFormControlSelect2_fnc_mobile').change(function(){ 
         var carvarient = $(this).val();
         var brandname = $('#HdnCarModelName').val(); 
         var eventlevelvalue = brandname+'-'+carvarient; 
         var event = 'Variant Selection';
         var eventCategory =  'Top Banner Variant Selection'; 
     DataLayerMSILDL_Common.Push(event,eventCategory  , 'click', eventlevelvalue );
     });
}

//City
if (window.matchMedia('only screen and (min-width: 992px)').matches)  
{
$('#ddcity_fnc').change(function(){
     var City_value = $(this).val(); 
     var city_name  = $(this).find('[value="'+City_value+'"]').text(); 
       var brandname = $('#HdnCarModelName').val(); 
       var eventlevelvalue = brandname+'-'+city_name;
         var event = 'City Selection';
            var eventCategory =  'Top Banner City Selection'; 
              DataLayerMSILDL_Common.Push(event, eventCategory ,'click', eventlevelvalue);
             });
}                                                                                                   

if (window.matchMedia('only screen and (max-width: 992px)').matches){
   
$('#ddcity_fnc_mobile').change(function(){
     var City_value = $(this).val(); 
     var city_name  = $(this).find('[value="'+City_value+'"]').text(); 
       var brandname = $('#HdnCarModelName').val(); 
       var eventlevelvalue = brandname+'-'+city_name;
         var event = 'City Selection';   
         var eventCategory =  'Top Banner City Selection';
            DataLayerMSILDL_Common.Push(event, eventCategory ,'click', eventlevelvalue);});
}

//Car Cards
$(document).on('click','.loanbox a',function(){
    var event = 'Check For Loan Offers';
    var eventCategory =  'nexa_finance-Homepage-Nexa Cars';
      var brandname = $('#HdnCarModelName').val();
        var eventlevelvalue=  'Check For Loan Offers - '+ brandname; 
     DataLayerMSILDL_Common.Push(event, eventCategory ,'click', eventlevelvalue);  
       });
       //car cards home page
       $(document).on('click','.checkLoanOffers',function(){
        var event = 'Check For Loan Offers';
        var eventCategory =  'nexa_finance-Homepage-Nexa Cars';
          var brandname = $('#HdnCarModelName').val();
            var eventlevelvalue=  'Check For Loan Offers - '+ brandname; 
         DataLayerMSILDL_Common.Push(event, eventCategory ,'click', eventlevelvalue);  
           });      
//Click on finance banner - Get Started
$(document).on('click','.newTextBox a',function(){
    var event = 'Click on finance banner - Get Started';
    var eventCategory =  'Top Banner';
        var eventlevelvalue=  'Finance - Get Started'; 
     DataLayerMSILDL_Common.Push(event, eventCategory ,'click', eventlevelvalue);  
       });    


});
//End Brand Page Mast Head JS
'use strict';
$(document).ready(function() {
    var interval;
    var otptime = function() {       
        var count = 90;
         clearInterval(interval);
         interval = setInterval(function() {
            $('#count').html(count);
            count--;
            if (count === 0) {
                clearInterval(interval);
                $('#count').html('');
                $('#counter').css('display', 'none');
                $('.resend0').css('pointer-events', 'inherit');
                $('.resend0').css('color', 'red');
            }
        }, 1000);
    };
    // initialise validation rules for all input fields
    var form_rquote = $('#form-rquote').validate({
        rules: {
            Name: {
                required: true,
                maxlength: 30,
                name_regex: /^[A-z]*((-|\s)*[A-z])*$/g
            },
            Email: {
                required: true,
                email: true,
                maxlength: 100,
                email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
            },
            Mobile: {
                required: true,
                minlength: 10,
                maxlength: 10,
                mobile_regex: /^[^0-5]\d{9}$/,
                number: true
            },
            carmodel: {
                required: true
            },
            BuyerType: {
				required: true
			},
            carvariant: {
                required: true
            },
            IsDisclaimerAccepted: 'required',
            //disclaimer1: 'required',
            //disclaimer2: 'required',
            //disclaimer3: 'required',
            Otp: {
                required: true,
                minlength: 4,
                maxlength: 4
            },
            State: {
                required: true
            },
            City: {
                required: true
            },
            Dealer: {
                required: true
            }
        },
        messages: {
            Name: {
                required: 'Name is required field',
                maxlength: 'Maximum length should be 30 characters',
                name_regex: 'Remove extra space from the name field'
             },
            Email: $('#Email').attr('data-error'),
            Mobile: $('#Mobile').attr('data-error'),
            carmodel: $('#CarModel').attr('data-error'),
            BuyerType: $('#raqByrtyp').attr('data-error'),
            carvariant: $('#CarVariant').attr('data-error'),
            IsDisclaimerAccepted: $('#IsDisclaimerAccepted').attr('data-error'),
            Otp: $('#Otp').attr('data-error'),
            State: $('#State').attr('data-error'),
            City: $('#City').attr('data-error'),
            Dealer: $('#Dealer').attr('data-error')
        },
        errorElement: 'em',
        errorPlacement: function(error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');

            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function(element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function(form) {
            form.submit();
        }
    });

    var $inputEmailFrfi = $('#form-rquote #Email');
	$inputEmailFrfi.keypress(function(e) {
	  var max = 99;
	  if ($inputEmailFrfi.val().length > max) {
		  $inputEmailFrfi.val($inputEmailFrfi.val().substr(0, max));
	  }
	  var key = e.keyCode;
	  var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
	  if (!returnn) {
		return false;
	  }
	});    

    // these buttons all run the validation, overridden by specific targets above
    $('.form-rquote3').click(function() {
        if (form_rquote.form()) {
            var that = this;
           var otpdata = $('#btdotp').val();
            rqoute_Detail = rqoute_Detail + '&' + 'Otp=' + otpdata;
            rqoute_Detail = rqoute_Detail + '&CarModelName=' + $('#CarModel option:selected').text() + '&CityName=' + $('#City option:selected').text() +
                '&StateName=' + $('#State option:selected').text() + '&DealerName=' + $('#Dealer option:selected').text() +
                '&VariantName=' + $('#carvariant option:selected').text();
            // get access token

 

            var rowdata = PrepareRequest('/api/sitecore/Forms/RequestAQuote', rqoute_Detail);
            // send data to server
            $.ajax(rowdata)
                .done(function(response) {
                    if (response.IsSuccess) {
                        $('#myModal_testdrive').modal('toggle');
                        //GTM Code start
                        //DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' RAQ Model', $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
                        var gacarmodel=(($('#f_carmodel').val() == 'Home' ||$('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
                        DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel.trim() + ' RAQ Model', gacarmodel.trim(), $('#Mobile').val(), $('#f_type').val());
                        //GTM Code ends
                        $('.formTitle').hide();

 

                        $('.stepform1').hide();
                        // $(that).parents('.registerstepform').next().show();
                        $('.formthankyou').show();
                    }
                })
                .error(function(err) {});

 

        }
    });

    // call on third submit button 
    $('.form-rquote2').click(function() {
        if (form_rquote.form()) {

 

            //GTM Code start
            //DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' RAQ Dealer', $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
            var gacarmodel=(($('#f_carmodel').val() == 'Home' ||$('#f_carmodel').val() == 'Other') && $('#CarModel').val()) ? $('#CarModel option:selected').text() : $('#f_carmodel').val();
            DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel.trim() + ' RAQ Dealer', gacarmodel.trim(), $('#Mobile').val(), $('#f_type').val());
            //GTM Code ends

 

            $(this).parents('.registerstepform').hide();
            $('#step3').hide();
            $(this).parents('.registerstepform').next().show();
            $('#step4').show();
        }
    });


    // call on second submit button 
    var b_disable=0;
    $('.form-rquote1').click(function(){
           if (form_rquote.form()&& !b_disable){
               b_disable=1;
               var that = this;
               var otpdata = $('#btdotp').val();
               //var data = $('.form-rquote').serialize() + '&' + 'Otp=' + otpdata;
               var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
               var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
               if(typeof MobileNumberForSkipOTPChk == 'undefined'){
                   var MobileNumberForSkipOTP = '';
               }else{
                   var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
               }
   
               var that = this;
               var f_thankyouaccessories = $('#f_thankyouaccessories').val();
               if(typeof f_thankyouaccessories == 'undefined')
               {
                var data = $('.form-rquote').serialize() + '&Otp=' + otpdata +'&CarModelName='+$('#carmodel option:selected').text()+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
               }else{
                var data = $('.form-rquote').serialize() + '&Otp=' + otpdata  +'&CarModelName='+$('#carmodel option:selected').text() + '&IsDisplayNewThankyouWithAccessories=' + f_thankyouaccessories+ '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
                }

               var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', data);
               var rowdata2 = PrepareRequest('/api/sitecore/Forms/RequestAQuote', data);
               //rquote_Detail = $(this).closest('form').serialize();
               // get access token
  
               //prepare data for sending
               //var rowdata = PrepareRequest('/api/sitecore/Forms/VerifyOtp', rquote_Detail);
               // send data to server
               $.ajax(rowdata).done(function(response) {
                       if (response.IsSuccess) {   
                           $('.form-rquote1').addClass('disableCls');                                       
                           $.ajax(rowdata2).done(function(response2){                             
                            if ($.trim(response2) == null || $.trim(response2) == undefined){ dis = 0; console.log(response2); }else{
                                if(response2.IsEnable !== 'undefined'){
                                    if(ra.utils.readCookie('pll_forms')==null){
                                        ra.utils.setCookieUniversal('pll_forms',ra.utils.marquee_event.pll_forms,'5000'); 
                                        ra.utils.setCookieUniversal('pll_forms_name','Request A Quote','5000'); 
                                        Marquee_Total();
                                    }
                            $('#myModal_testdrive').modal('toggle');
                            $('.stepform1').hide();
                            $('#sf-thankyou').show();
                            var BalenoChk = $('#carmodel').val();
                            if(BalenoChk=='16'){
                            $('.thankyouMsgCarBoxSection').hide();
                            }else{
                            $('.thankyouMsgCarBoxSection').show();
                            }

                            if(response2.TrueCallerLink!='' && response2.TrueCallerLinkText!=''){
                                if (window.location.href.indexOf('Truecaller') > -1) {
                                    var myScript = document.createElement('script');
                                    myScript.setAttribute('src', response2.TrueCallerLink);
                                    document.head.appendChild(myScript);
                                  }
                            }

                            // $('.thankyoutitleres').html(response2.ThankyouTitle);
                            $('.ThankyouSubTitleres').html(response2.ThankyouSubTitle); 
                            $('.BrandImageRes').attr('src', response2.BrandImage);
                            $('.AccessoriesHeadingres').html(response2.AccessoriesHeading); 
                            $('.ExploreUrlres').attr('href', response2.ExploreAccessoriesURL);  
                            $('.BrandImageResBig').attr('src', response2.BrandImage);
                            if(response2.AccessoryItems){
                            for(var i = 0; i < response2.AccessoryItems.length; i++){
                                    const element = response2.AccessoryItems[i];  
                                    $('.resulVal').append('<a href='+ element.AccessoryURL + '><div class="item"><img src='+ element.AccessoryImage + '><p>'+ element.AccessoryTitle + '</p></div></a>');
                            } 
                        }
                        }else if(response2){
                            $('#myModal_testdrive').modal('toggle');
                            $('.stepform1').hide();
                            $('#sf-thankyou').show();
                        }
                    }                 
                           })
                           .error(function(err) {
                            b_disable = 0;
                            });                       
                           //GTM Code start
                           var gacarmodel=(($('#f_carmodel').val() == 'Home' ||$('#f_carmodel').val() == 'Other') && $('#carmodel').val()) ? $('#carmodel option:selected').text() : $('#f_carmodel').val();
                           DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel.trim() + ' RAQ Post OTP',gacarmodel.trim(), $('#Mobile').val(), $('#f_type').val());
     
                           //GTM Code ends
                           tdSubmit({
                            name:convertAES($('#form-rquote').find('#Name').val()),
                            email:convertSHA($('#form-rquote').find('#Email').val()),
                            mobile:convertSHA($('#form-rquote').find('#Mobile').val()),
                            state:$('#form-rquote').find('#State option:selected').text(),
                            city:$('#form-rquote').find('#City option:selected').text(),
                            dealer:$('#form-rquote').find('#Dealer option:selected').text(),
                            model:$('#form-rquote').find('#carmodel option:selected').text().trim(),
                            variant:$('#form-rquote').find('#carvariant option:selected').text().trim(),
                        }, 'request_quote_nexa');
                        tdSubmit({
                            'eventCategory': 'Request a Quote Post OTP '+gacarmodel.trim(),
                            'eventAction': 'click',
                            'eventLabel': 'Request a Quote Post OTP '+gacarmodel.trim(),
                        }, 'event_nexa');

                           $('.rqootperror').hide();
                          
                       } else {
                           $('.rqootperror').show();
                           b_disable = 0;
                           $('.form-rquote1').removeClass('disableCls');   
                       }
                   })
                   .error(function(err) {});
                   b_disable = 0;
           }
       });
   

    // call on first submit button 
    $('.form-rquote0').click(function() {
        
        if (form_rquote.form()) {
            var getName = $('.form-rquote').find('.name').val();
            var getEmail = $('.form-rquote').find('.email').val();
            var getMobile = $('.form-rquote').find('.mobile').val();
            $('.prefilled-name').val(getName);
            $('.prefilled-email').val(getEmail);
            $('.prefilled-mobile').val(getMobile);

            var IsEnableSkipOTPchk = $('#f_isenableskipotp').val();
			if(typeof IsEnableSkipOTPchk == 'undefined'){
				var IsEnableSkipOTP = '';
			}else{
				var IsEnableSkipOTP = $('#f_isenableskipotp').val();
			}
            var MobileNumberForSkipOTPChk = $('#f_mobilenumberforskipotp').val();
			if(typeof MobileNumberForSkipOTPChk == 'undefined'){
				var MobileNumberForSkipOTP = '';
			}else{
				var MobileNumberForSkipOTP = $('#f_mobilenumberforskipotp').val();
			}

            var that = this;
            var data = $(this).closest('form').serialize() + '&IsEnableSkipOTP=' +IsEnableSkipOTP  + '&MobileNumberForSkipOTP=' +MobileNumberForSkipOTP;
            //prepare data for sending 
            var rowdata = PrepareRequest('/api/sitecore/Forms/SendOtp', data);
            // send data to server
            $.ajax(rowdata).done(function(response) {
                    if (response.IsSuccess) {
                        $('.verifyotp').val('');
                        $('#myModal_testdrive').modal('show');
                        //GTM Code start
                        //DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', $('#f_carmodel').val() + ' RAQ Pre OTP', $('#f_carmodel').val(), $('#Mobile').val(), $('#f_type').val());
                        var gacarmodel=(($('#f_carmodel').val() == 'Home' ||$('#f_carmodel').val() == 'Other') && $('#carmodel').val()) ? $('#carmodel option:selected').text() : $('#f_carmodel').val();
                        DataLayerMSILDL_FormSubmission_Type.Push($('#f_eventcategory').val(), 'Submit', gacarmodel.trim() + ' RAQ Pre OTP',gacarmodel.trim(), $('#Mobile').val(), $('#f_type').val());
                        //GTM Code ends

                        tdSubmit({
                            'eventCategory': 'Request a Quote Pre OTP '+gacarmodel.trim(),
                            'eventAction': 'click',
                            'eventLabel': 'Request a Quote Pre OTP '+gacarmodel.trim(),
                        }, 'event_nexa');

                        $(that).parents('.registerstepform').show();
                        $('#step1').hide();
                       // $(that).parents('.registerstepform').next().show();
                        $('#step2').show();
                        $('.resend0').css('pointer-events', 'none');
                        otptime();
                        $('#counter').css('display', 'block');
                        $('.resend0').css('color', 'grey');
                    }
                }).error(function(err) {});
        }
    });;

    //If Car Model changes 
    $('#carmodel').change(function() {
        $('#carvariant').html('');

        var variants = $('#carvariant');

        var carId = $('#carmodel').val();

        postDetails('/api/sitecore/API/GerVariantsByCarId', JSON.stringify({ 'carId': carId })).then(function(resData) {
            if (resData.items) {
                for (var i = 0; i < resData.items.length; i++) {
                    var option = $('<option></option>');
                    option.attr('value', resData.items[i].id);
                    option.text(resData.items[i].name);
                    $('#carvariant').append(option);

                }
            }
        })
    });

});
'use strict';
/*globals ra */

(function(){
    ra.rotater = {
        settings:{
          target:'.mod-rotater'
        },
        init:function(){
          this.bindrotaterEvent();
          //this.threeSixtyEvent();
        },
        bindrotaterEvent : function(){
          var bindContext = this;

          $('#nav-exterior-tab').click(function(){
            bindContext.threeSixtyEvent();
            $('.threesixtyrotaterview').hide();            
          });

           $('.threesixtyrotaterview a').click(function(){
            bindContext.threeSixtyEvent();
            $('.threesixtyrotaterview').hide(); 
           });

          $('#nav-interior-tab').click(function(){            
            $('.threesixtyrotaterview').hide();
            
          });
          
        },
        threeSixtyEvent : function(){
          $('.threesixty').threeSixty({
            dragDirection: 'horizontal',
            useKeys: false,
            draggableSpeed:1000,
            draggable: true
          });

        }

      };
    
}(ra));

'use strict';
/*globals ra */

(function() {

    $('.searchbtn').click(function() {
        //$(this).toggleClass('active');
        $('.newSearchSection').slideDown();
        //$('.searchbtn').addClass('active')
        //$('.inrsearchbox').toggleClass('active');
        
    });

    $( '.mobile-search' ).focus(function() {
        $('.newSearchSection').slideDown();
      });

    $('.newSearchbtn').click(function() {
        $('.newSearchSection').slideUp();
        //$('.searchbtn').removeClass('active')        
    });

    $( '.searchbtn' ).on( 'click', tapHandler );      
    function tapHandler( event ) {
        $('.search').focus();
    }

}(ra));

$(document).ready(function() {
    $('.newInrsearchbox').find('.search').keypress(function(e) {
        if (e.which == 13) {
            navigate($('.newInrsearchbox').find('.search').val());
        }
    });

    $('.inrfooterbox').find('.mobile-search').keypress(function(e) {
        if (e.which == 13) {
            navigate($('.inrfooterbox').find('.mobile-search').val());
        }
    });

    $('.mobile-searchbtn').click(function() {
        navigate($('.inrfooterbox').find('.mobile-search').val());
    });

    $('.searchpage').find('.searchresult').keypress(function(e) {
        if (e.which == 13) {
            navigate($('.searchpage').find('.searchresult').val());
        }
    });


$('.logout').on('click',function(event){
        event.stopPropagation();
        $.ajax({
        type: 'POST',
        url: '/api/sitecore/NexaUserLogin/UserLogout',
        contentType: 'application/json; charset=utf-8',
        datatype: 'json',
        async: 'true',
        success: function(response) {
            if(response !=null && response.status != null){
                window.location.href='/login';
            }
        },
        error: function(response) {
        }
    });
    })



});
'use strict';
/*globals ra */
$(window).scroll(function () {
    if ($(window).width() >= 1500) {
        var scroll = $(window).scrollTop();
        var position = 840;
        if (scroll > position) {
            $('.sticky-navigation').addClass('sticked');
            $('.topheader2').hide();
        } else {
            $('.sticky-navigation').removeClass('sticked');
            $('.topheader2').show();
        }
    } else if ($(window).width() >= 1200) {
        var scroll = $(window).scrollTop();
        var position = 500;
        if (scroll > position) {
            $('.sticky-navigation').addClass('sticked');
            $('.topheader2').hide();
        } else {
            $('.sticky-navigation').removeClass('sticked');
            $('.topheader2').show();
        }
    } else if ($(window).width() >= 767) {
        var scroll = $(window).scrollTop();
        var position = 400;
        if (scroll > position) {
            $('.sticky-navigation').addClass('sticked');
            $('.topheader2').hide();
        } else {
            $('.sticky-navigation').removeClass('sticked');
            $('.topheader2').show();
        }
    } else if ($(window).width() < 767) {
        var scroll = $(window).scrollTop();
        var position = 550;
        if (scroll > position) {
            $('.sticky-navigation').addClass('sticked');
            $('.topheader2').hide();
            $('.branch-banner-section').addClass('active2');
        } else {
            $('.sticky-navigation').removeClass('sticked');
            $('.topheader2').show();
            $('.branch-banner-section').removeClass('active2');
        }
    }

});
'use strict';

var H1 = $('.topheader').outerHeight();    

$(window).scroll(function () {    
    var scroll = $(window).scrollTop(); if (scroll > H1) {
        $('.topheader2').addClass('stick');
        $('.branch-banner-section').addClass('active'); 

    } else if (scroll < H1) {
        $('.topheader2').removeClass('stick');
        $('.branch-banner-section').removeClass('active');
    }
});
$(document).ready(function(){
    $('.widgetclose').click(function(){
        $('.topwidget').hide();
    });

    // $('.firstbtn').click(function(){
    //     $('.twostepform').show();
    //     $('.onestepform').hide();
    // });
    
    // $('.secondbtn').click(function(){
    //     $('.twostepform').hide();
    //     $('.threestepform').show();
    // });

    // $('.thirdbtn').click(function(){
    //     $('.fourthstepform').show();
    //     $('.threestepform').hide();
    // });

    $('#btn1').click(function(){
        $('.detailformbox').hide();
        $('.otpdetailbox').show();
    });
    $('#btn2').click(function(){
        $('.addressformbox').show();
        $('.otpdetailbox').hide();
    });
});

'use strict';
/*globals ra */

(function(){  
    
  $('body').mouseover(function(e){  
    if(!($(e.target).hasClass('submenubox') || $(e.target).parents().hasClass('submenubox'))) {   
      $('.submenubox').removeClass('active');
      $('.secondlevel').removeClass('active');
    }
    else {
    
    }  
  });

  $('.firstlevel').mouseover(function(e){
    $('.submenubox').addClass('active');
    var idValue= $(this).attr('id');
    $('.secondlevel').removeClass('active');
    $('.secondlevel').each(function(index,value){
      if($(this).data('id')===idValue) {
        $(this).addClass('active');
      }
    }); 
    e.preventDefault();
    e.stopPropagation();
  });

}(ra));

$(document).ready(function() {
    var v = $('#form-sub').validate({
        rules: {
            email: {
                required: true,
                email: true,
                maxlength: 100,
                email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
            },
            privacypolicy: 'required'
        },
        messages: {
            email: 'Please enter a valid Email'
        },
        errorElement: 'em',
        errorPlacement: function(error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');

            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function(element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function(form) {
            form.submit();
        }
    });

    var $inputEmailSub = $('#form-sub .email');
    $inputEmailSub.keypress(function(e) {
      var max = 99;
      if ($inputEmailSub.val().length > max) {
        $inputEmailSub.val($inputEmailSub.val().substr(0, max));
      }
      var key = e.keyCode;
      var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
      if (!returnn) {
      return false;
      }
    });    


    var myModalAutoOpen_subscribe_frm = $('#myModalAutoOpen_subscribe_frm').validate({
        rules: {
            email: {
                required: true,
                email: true,
                maxlength: 100,
                email_regex: /^(([^<>()\[\]\.,;:\s@\']+(\.[^<>()\[\]\.,;:\s@\']+)*)|(\'.+\'))@(([^<>()[\]\.,;:\s@\']+\.)+[^<>()[\]\.,;:\s@\']{2,})$/i
            },
            privacypolicy: 'required'
        },
        messages: {
            email: 'Please enter a valid Email'
        },
        errorElement: 'em',
        errorPlacement: function(error, element) {
            // Add the `invalid-feedback` class to the error element
            error.addClass('invalid-feedback');

            if (element.prop('type') === 'checkbox') {
                error.insertAfter(element.next('label'));
            } else {
                error.insertAfter(element);
            }
        },
        highlight: function(element, errorClass, validClass) {
            $(element).addClass('is-invalid').removeClass('is-valid');
        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).addClass('is-valid').removeClass('is-invalid');
        },
        submitHandler: function(form) {
            form.submit();
        }
    });

    function downloadFile(src) {
        var link = document.createElement('a');
        document.body.appendChild(link);
        link.href = src;
        link.download = '';
        link.click();
    }
    
    function postDetailsDBrochure(url, data) {
        return new Promise(
            function (resolve, reject) {
                $.ajax({
                        type: 'POST',
                        url: url,
                        data: data,
                        contentType: 'application/json; charset=utf-8',
                        datatype: 'json',
                        async: 'true',
                    })
                    .done(function (response) {
 
                        // var res = JSON.parse(response);
                        resolve(response);
                        //console.log('Responeceee', res);
                        if (response) {
                            if (response.IsSuccess) {
                                $('#myModalAutoOpen_subscribe').modal('hide');
                                localStorage.setItem('subscribePopup','completed')
                                var pdfUrl = $('#brochureURL').val();
                                downloadFile(pdfUrl);
                            } else {
                                $('#myModalAutoOpen_subscribe').modal('hide');
                                alert(response.Message);
                            }
                        }
                    })
                    .error(function (err) {
                        console.log(err);
 
                        reject(err);
                    });
            }
        )
    }

    var $inputEmailSubFrm = $('#myModalAutoOpen_subscribe_frm .email');
    $inputEmailSubFrm.keypress(function(e) {
      var max = 99;
      if ($inputEmailSubFrm.val().length > max) {
        $inputEmailSubFrm.val($inputEmailSubFrm.val().substr(0, max));
      }
      var key = e.keyCode;
      var returnn = ((key >= 48 && key <= 57) || (key >= 65 && key <= 90) || (key >= 97 && key <= 122) || (key == 32) || key==64 || key==46);
      if (!returnn) {
      return false;
      }
    });    
 
    function apiCallDBrochure(link) {
        if (myModalAutoOpen_subscribe_frm.form()) {
 
            var bodyMain = {
                to: $('#myModalAutoOpen_subscribe_frm').find('.email').val()
            }
            //console.log(bodyMain);
            postDetailsDBrochure(link, JSON.stringify(bodyMain)).then(function () {
               
 
            }).catch(function (err) {
                console.log(err);
            });
        }
    }
  
    $('#myModalAutoOpen_subscribe_sbmt').click(function () {
        apiCallDBrochure('/api/sitecore/CarBrand/SendBrochure');
    });

    // $('.brochurepopup').click(function() {
    //     $(this).closest('.parentBrochure').find('.brochurePopop').fadeIn();
    //     $('body').addClass('bodylock');
    // });

    // $('.brochurepopup').click(function(){
    //     $('.brandbrochurePopup').fadeIn();
    //     $('body').addClass('bodylock');
    // });

    // $('.brochurepopup').click(function(){
    //     $('.brandbrochurePopup').fadeIn();
    //     $('body').addClass('bodylock');
    // });

  
    
//brochure brand popup Open
$(document).find('.brochurepopup').on('click', function () { 
    // $('.brochurePopop').css('display','block');
    $(this).closest('.parentBrochure').find('.brochurePopop').fadeIn();
    // $('body').addClass('bodylock');
    // $('.brandbrochurePopup').fadeIn();
  });

  $(document).find('.brochurepopup').on('click', function () { 
    $('.brandbrochurePopup').css('display','block');  
    //E-brochure
    $(this).closest('.brochurePopupNewDesign').css('display','block');
     });

  //Ajax Call After Brochure Download
  $(document).find('.brochureNewDesign').on('click', function () { 
    var BrochureURL = $(this).find('ul li:eq( 1 ) a').attr('href');                                                  
    var BrandName = $(this).find('h2').text();
    var isDownloaded = 'true';
    if(BrochureURL.trim() != '' && BrandName.trim() != ''){
        
                 //prepare data for sending 
                 var rowdata = PrepareRequestMedia('/api/sitecore/api/SaveBrochureDownloadFacets', JSON.stringify({ brochureURL:BrochureURL, brandName:BrandName, isDownloaded: isDownloaded }), '');
                 // send data to server
                 $.ajax(rowdata)
                     .done(function(response) {
                         var reso = JSON.parse(response);
                         if (reso) {
                            //   console.log(reso);
                         } else {
                            console.log('something Went Wrong');
                         }
                     })
                     .error(function(err) {});
    }
 });

 


    $('.padRight10').click(function() {
        tdSubmit({
            'eventCategory': 'Accessories Broucher Download',
            'eventAction': 'Click',
            'eventLabel': 'pdf',
         }, 'event_nexa');
    });
    
    $('.closeSubscribe').click(function() {
        $('.brandbrochurePopup, .brochurePopop').fadeOut();
        $('body').removeClass('bodylock');
    });

    $('.closeCancelPopup').click(function() {
        $('.cancelPopupSection').fadeOut();
        $('body').removeClass('bodylock');
    });

    $('.newpopup').click(function() {
        $('.subscribeform').fadeIn();
        $('body').addClass('bodylock');
        $('#nexahub').show();
        $('.thankyoutext').hide();
    });

    // $('.thankyou_popupBtn').click(function() {
    //     $('.thankyouSubscribeform').fadeIn();
    //     $('body').addClass('bodylock');
    // });

    $('.closethankyou_msg').click(function() {
        $('.thankyouSubscribeform').fadeOut();
        $('body').removeClass('bodylock');
    });

    $('.subscribeformIn').find('.subscribtionSub').click(function() {
        if (v.form()) {
            //prepare data for sending 
            var rowdata = PrepareRequestMedia('/api/sitecore/API/Subscribe', JSON.stringify({ emailid: $('.subscribeformIn').find('.email').val(), currentUrl: $(location).attr('href'), category: 'All' }), '');
            // send data to server
            $.ajax(rowdata)
                .done(function(response) {
                    var reso = JSON.parse(response);
                    if (reso.status) {
                        $('#nexahub').hide();
                        $('.thankyoutext').show();
                        $('#emailID').val('');
                        $('input:checkbox').removeAttr('checked');
                    } else {
                        alert('something went wrong')
                    }
                })
                .error(function(err) {});
        }
    });

})

'use strict';
// lazyload
document.addEventListener("DOMContentLoaded", function () {
    var lazyloadImages = document.querySelectorAll("img.lazy");
    var lazyloadThrottleTimeout;
  
    function lazyload() {
      if (lazyloadThrottleTimeout) {
        clearTimeout(lazyloadThrottleTimeout);
      }
  
      lazyloadThrottleTimeout = setTimeout(function () {
        var scrollTop = window.pageYOffset;
        lazyloadImages.forEach(function (img) {
          if (img.offsetTop < (window.innerHeight + scrollTop)) {
            img.src = img.dataset.src;
            img.classList.remove('lazy');
          }
        });
        if (lazyloadImages.length == 0) {
          document.removeEventListener("scroll", lazyload);
          window.removeEventListener("load", lazyload);
          window.removeEventListener("resize", lazyload);
          window.removeEventListener("orientationChange", lazyload);
        }
      }, 20);
    }
  
    document.addEventListener("scroll", lazyload);
    window.addEventListener("load", lazyload);
    window.addEventListener("resize", lazyload);
    window.addEventListener("orientationChange", lazyload);
  });

  document.addEventListener("DOMContentLoaded", function() {
    var lazyVideos = [].slice.call(document.querySelectorAll("video.lazy"));
  
    if ("IntersectionObserver" in window) {
      var lazyVideoObserver = new IntersectionObserver(function(entries, observer) {
        entries.forEach(function(video) {
          if (video.isIntersecting) {
            for (var source in video.target.children) {
              var videoSource = video.target.children[source];
              if (typeof videoSource.tagName === "string" && videoSource.tagName === "SOURCE") {
                videoSource.src = videoSource.dataset.src;
              }
            }
  
            video.target.load();
            video.target.classList.remove("lazy");
            lazyVideoObserver.unobserve(video.target);
          }
        });
      });
  
      lazyVideos.forEach(function(lazyVideo) {
        lazyVideoObserver.observe(lazyVideo);
      });
    }
  });

$(document).ready(function () {
    var activeIndex = $('.active-tab').index(),
        $contentlis = $('.tabs-content > .tab-pane'),
        $tabslis = $('.tabs li');

    // Show content of active tab on loads
    $contentlis.eq(activeIndex).show();

    $('.tabs').on('click', 'li', function (e) {
        var $current = $(e.currentTarget),
            index = $current.index();
        //console.log(index, 'fsafsfasfs')

        $tabslis.removeClass('active-tab');
        $current.addClass('active-tab');
        $contentlis.hide().eq(index).show();
    });


    $(".right-mode-triger ul li a").click(function(){
      $(".right-mode-triger ul li a").removeClass('active');
      $(this).addClass('active');
      var id = $(this).data("id");
      $(".drive-car-pane .tab-pane").hide();
      $("#" + id).show();
    });

    $(".technology-triger ul li a").click(function(){
      $(".technology-triger ul li a").removeClass('active');
      $(this).addClass('active');
      var id = $(this).data("id");
      $(".showhide-content .tab-pane").hide();
      $("#" + id).show();
    });
    $(".rules-content-triger ul li a").click(function(){
      $(".rules-content-triger ul li a").removeClass('active');
      $(this).addClass('active');
      var id = $(this).data("id");
      $(".highlightsshowhide-content .tab-pane").hide();
      $("#" + id).show();
    });

    

    $('.disgin-philosophy-slider').owlCarousel({
        loop:true,
        nav:false,
        dots:true,
		//smartSpeed: 1000,
		autoplay:true,
		autoplayTimeout: 4000,
        margin:0,
        onInitialized: startProgressBar,
        onTranslate: resetProgressBar,
        onTranslated: startProgressBar,
		//animateOut: 'fadeOut',
		//mouseDrag:false,
        responsive:{
            0:{
                items:1,
				mouseDrag:true
            },
            1279:{
                items:1
            }
        }
    })

    function startProgressBar() {
        // apply keyframe animation
        $(".slide-progress").css({
          width: "100%",
          transition: "width 4000ms"
        });
      }
  
      function resetProgressBar() {
        $(".slide-progress").css({
          width: 0,
          transition: "width 0s"
        });
      }
      //Init progressBar where elem is $("#owl-demo")
      function progressBar(elem){
        $elem = elem;
        //build progress bar elements
        buildProgressBar();
        //start counting
        start();
      }

    $('.sc-connect-slider').owlCarousel({
        items: 1,
        loop: false,
        autoplay: false,
        autoplayHoverPause: true,
        smartSpeed: 1000,
        slideBy: 1,
        margin: 0,
        responsiveClass: true,
        nav: false,
        dots: true,
        responsive: {
            0: {
                items: 1,
            },
            767: {
                items: 1,
            },
            768: {
                items: 1,
                dots: true,
            },
            1024: {
                items: 1,
                dots: true,
            }
        }
    })

    $('.persona-variant-slider').owlCarousel({
        items: 1,
        loop: true,
        autoplay: false,
        autoplayHoverPause: true,
        smartSpeed: 1000,
        //slideBy: 1,
        //margin: 5,
        nav: false,
        dots: true,
        autoWidth:true,
        responsive: {
            0: {
                items: 1,
                autoWidth:true,
            },
            600: {
                items: 1,
                autoWidth:true,
                margin: 10,
            },
            768: {
                items: 2,
                autoWidth:false,
                //margin: 10,
            },
            1024: {
                items: 2,
                autoWidth:false,
            }
        }
    })

/**
 * debounce
 * @param {integer} milliseconds This param indicates the number of milliseconds
 *     to wait after the last call before calling the original function.
 * @param {object} What "this" refers to in the returned function.
 * @return {function} This returns a function that when called will wait the
 *     indicated number of milliseconds after the last call before
 *     calling the original function.
 */
 Function.prototype.debounce = function (milliseconds, context) {
    var baseFunction = this,
        timer = null,
        wait = milliseconds;

    return function () {
        var self = context || this,
            args = arguments;

        function complete() {
            baseFunction.apply(self, args);
            timer = null;
        }

        if (timer) {
            clearTimeout(timer);
        }

        timer = setTimeout(complete, wait);
    };
};

/**
* throttle
* @param {integer} milliseconds This param indicates the number of milliseconds
*     to wait between calls before calling the original function.
* @param {object} What "this" refers to in the returned function.
* @return {function} This returns a function that when called will wait the
*     indicated number of milliseconds between calls before
*     calling the original function.
*/
Function.prototype.throttle = function (milliseconds, context) {
    var baseFunction = this,
        lastEventTimestamp = null,
        limit = milliseconds;

    return function () {
        var self = context || this,
            args = arguments,
            now = Date.now();

        if (!lastEventTimestamp || now - lastEventTimestamp >= limit) {
            lastEventTimestamp = now;
            baseFunction.apply(self, args);
        }
    };
};


/*!
 * zA7n, v1.0, MIT License
 * bryzgalovd@gmail.com
 */
(function ($, window) {
	
	function zA7n($ul, opt) {
		var ul_width,
			$li = $('li', $ul),
			li_length,
			start_width;

		li_length = $li.length;

		function setVars () {
			ul_width = 100;
			start_width = ul_width / li_length;
			$li.css({'width': start_width + '%'});
		}
		// $('.current-page.active').css({'width': 60 + '%'});
		$li.each(function () {
			var $item = $(this),
				item_width;

			item_width = start_width;

			$item.on({
				'mouseover': function (event) {
                    //var $this = $(this),
                    //ActivatedItem = $this.parent('ul').find('.current-page');
					// $li.css({'width': ((ul_width - item_width) / (li_length - 1)) + '%'});
					$item.css({'width': 60 + '%'});
          //ActivatedItem.removeClass('active').css({'width': 60 + '%'});
                //     $this.children('.bg-image').addClass("active");
                // var vidEl = $this.children('video').get(0);
                // vidEl.play().fadeIn();
                $('.current-page').removeClass('active');
				},
				'mouseout': function (event) {
                    //var $this = $(this),
                    //ActivatedItem = $this.parent('ul').find('.current-page');
					$li.css({'width': start_width + '%'});
          $('.current-page').addClass('active');
          //ActivatedItem.removeClass('active');
          //$('.current-page').addClass('active');
          
                //     $this.children('.bg-image').removeClass("active");
                // var vidEl = $this.children('video').get(0);
                // vidEl.pause().fadeOut();
                // vidEl.currentTime = 0; 

                /** $('.current-page.active').width('74%');
      slideItem.hover(function () {
        var $this = $(this),
          itemsLength = $this.parent('ul').children().length,
          ActivatedItem = $this.parent('ul').find('.current-page'),
          normItemWidth = fullScrnWidthPercent / itemsLength,
          lgItemWidth = normItemWidth * 3;
        ActivatedItem.removeClass('active').stop().animate({ 'width': normItemWidth + '%' }, 500);
        $this.stop().animate({ 'width': lgItemWidth + '%' }, 500);
      },
        function () {
          var $this = $(this),
            ActivatedItem = $this.parent('ul').find('.current-page'),
            itemsLength = $this.parent('ul').children().length,
            normItemWidth = fullScrnWidthPercent / itemsLength;
          $this.stop().animate({ 'width': normItemWidth + '%' }, 500);
          ActivatedItem.removeClass('active');
          $('.current-page').addClass('active');
          // $('.current-page').width(normItemWidth + '%');
        }); */
				}
			});
		});
		
		setVars();
		
		$(window).on('resize', function () {
			setVars();
		}.debounce(150));
	}

	$.fn.zA7n = function (o) {
		var opt = $.extend({}, o);
		return this.each(function () {
			var $ul = $(this);
			if ($ul.data('zAc6n')) {
				return;
			}
			zA7n($ul, opt);
			$ul.data('zAc6n', 1).addClass('_create');
		});
	};
}(jQuery, this));



    $(window).load(function () {
		$('#zA7n').zA7n({});
    $('#zA7n-p').zA7n({});
    $('#zA7n-p2').zA7n({});
	});
})


$(document).ready(function () {

    AOS.init({
      duration: 1000,
      disable: 'mobile'
  
    });
  
    // owl active on mobile & tab
    bannerOwlInitialize();
  
  }); //jquery initialize end
  
  function bannerOwlInitialize() {
    var screenSize = $(window).width(),
      fullScrnWidthPercent = 100;

      if (screenSize <=767) {
        $('.benefit-item-slider').addClass("owl-carousel");
        $('.benefit-item-slider').owlCarousel({
          loop: true,
          //margin: 10,
          navText: ["<i class='angle-left'></i>", "<i class='angle-right'></i>"],
          dots: false,
          nav: true,
          responsiveClass: true,
          responsive: {
            0: {
              items: 1,
            },
            460: {
              items: 1
            },
            768: {
              items: 2
            }
          }
        });
      }

      else {
        $('.benefit-item-slider').trigger("destroy.owl.carousel").removeClass("owl-carousel");
      }
  
    if (screenSize < 1200) {
      // $('.bg-image').height(fullScrnWidthPercent / 2 + 'vh');
      $(' .expanded-slider').addClass("owl-carousel");
      // slideItem.addClass("w_auto");
      $(' .expanded-slider').owlCarousel({
        loop: true,
        margin: 10,
        navText: ["<i class='angle-left'></i>", "<i class='angle-right'></i>"],
        dots: false,
        nav: true,
        responsiveClass: true,
        responsive: {
          0: {
            items: 1.25,
          },
          460: {
            items: 1.75
          },
          768: {
            items: 2.5
          },
          900: {
            items: 3.5,
          }
        }
      });
    }
    else {
      var slideItem = $('.expanded-slider li');
  
      $('.expanded-slider').trigger("destroy.owl.carousel").removeClass("owl-carousel");
      // $('.bg-image').height(fullScrnWidthPercent / 1.5 + 'vh');
      $('.current-page.active').width('74%');
      slideItem.hover(function () {
        var $this = $(this),
          itemsLength = $this.parent('ul').children().length,
          ActivatedItem = $this.parent('ul').find('.current-page'),
          normItemWidth = fullScrnWidthPercent / itemsLength,
          lgItemWidth = normItemWidth * 3;
        ActivatedItem.removeClass('active').stop().animate({ 'width': normItemWidth + '%' }, 500);
        $this.stop().animate({ 'width': lgItemWidth + '%' }, 500);
      },
        function () {
          var $this = $(this),
            ActivatedItem = $this.parent('ul').find('.current-page'),
            itemsLength = $this.parent('ul').children().length,
            normItemWidth = fullScrnWidthPercent / itemsLength;
          $this.stop().animate({ 'width': normItemWidth + '%' }, 500);
          ActivatedItem.removeClass('active');
          $('.current-page').addClass('active');
          // $('.current-page').width(normItemWidth + '%');
        });
  
    }
  }
  
  $(window).resize(function () {
    bannerOwlInitialize();
  });
  

  
function jumpEngineVideo(ct, _this) {
    engine_video.currentTime = ct;
    console.log(ct)
  }
  
  $(document).ready(function () {
  
    var UrlPath = window.location.pathname;
    if(UrlPath=='/gv-version-2/intelligent-electric-hybrid'){  
      
      var engine_video = document.getElementById("engine_video");
      function progressLoop() {
        if (engine_video.currentTime >= 0 && engine_video.currentTime < 5) {
          $("#ieh2-tab,#ieh3-tab,#ieh4-tab").removeClass("active").attr('aria-selected', false)
          $("#ieh1-tab").addClass("active")
    
          $("#eh-hybrid-drive,#eh-engine-drive,#eh-regenerative").removeClass("active show")
          $("#eh-electric-drive").addClass("active show")
        }
        if (engine_video.currentTime >= 5 && engine_video.currentTime < 10) {
          $("#ieh1-tab,#ieh3-tab,#ieh4-tab").removeClass("active")
          $("#ieh2-tab").addClass("active")
    
          $("#eh-electric-drive,#eh-engine-drive,#eh-regenerative").removeClass("active show")
          $("#eh-hybrid-drive").addClass("active show")
        }
        if (engine_video.currentTime >= 10 && engine_video.currentTime < 15) {
          $("#ieh1-tab,#ieh2-tab,#ieh4-tab").removeClass("active")
          $("#ieh3-tab").addClass("active")
    
          $("#eh-electric-drive,#eh-hybrid-drive,#eh-regenerative").removeClass("active show")
          $("#eh-engine-drive").addClass("active show")
        }
        if (engine_video.currentTime >= 15 && engine_video.currentTime < 20) {
          $("#ieh1-tab,#ieh2-tab,#ieh3-tab").removeClass("active")
          $("#ieh4-tab").addClass("active")
    
          $("#eh-electric-drive,#eh-hybrid-drive,#eh-engine-drive").removeClass("active show")
          $("#eh-regenerative").addClass("active show")
        }
        // console.log(engine_video.currentTime)
      }
    
    
      engine_video.addEventListener("timeupdate", progressLoop);

     }
  })
  
  var UrlPathIs = window.location.pathname;
  if(UrlPathIs=='/gv-version-2'){  
  var $video = document.querySelector('#vid-poster-banner');

    if (window.outerWidth > 768) {
      $video.setAttribute('poster', "assets/images/gv-version2/poster-img.webp")
      console.log($video.getAttribute, 'desk')
    }
    else {
      $video.setAttribute('poster', "assets/images/gv-version2/poster-img-mob.webp")
      console.log($video.getAttribute, 'mob')
    }
  }
  
  



"use strict";
$(document).ready(function () {
  $(document).on("click", ".sticky-navigation nav a img", function (event) {
    var event = "Logo";
    var eventCategory = "Nexa Grand Vitara Logo";
    var eventAction = "click";
    var eventLabel = "Introducing Grand Vitara";
    CDPFunction(event, eventCategory, eventAction, eventLabel);
  });

  $(document).on("click", "#navbarSupportedContent ul li a", function (event) {
    var event = "Sub Navigation Menu";
    var eventCategory = "Nexa Grand Vitara Sub Navigation Menu";
    var eventAction = "click";
    var eventLabel = $(this).text().trim();
    CDPFunction(event, eventCategory, eventAction, eventLabel);
  });

  $(document).on("click", ".banner-vid .banner-cta a", function (event) {
    var event = "Top Banner";
    var eventCategory = "Nexa Grand Vitara Top Banner";
    var eventAction = "Click";
    var eventLabel = $(this).text().trim();
    CDPFunction(event, eventCategory, eventAction, eventLabel);
  });


    $('iframe').load(function(){
      $(this).contents().find("#carousel-example-generic ol li").on('click', function(event) {  
          var SpanText = $(this).children().text();
          var str;
         str=  SpanText.replace(/[^\w\s]/gi, '');
          var event = "Key Highlights";
          var eventCategory = "Nexa Grand Vitara Key Highlights";
          var eventAction = "Click";
          var eventLabel = str;
          CDPFunction(event, eventCategory, eventAction, eventLabel);
    
    });
    });



  $(document).on("click", "#designphilosophy div a", function (event) {
    var event = "Key Highlights";
    var eventCategory = "Nexa Grand Vitara Design Philosophy";
    var eventAction = "Click";
    var eventLabel = $(this).text().trim();
    CDPFunction(event, eventCategory, eventAction, eventLabel);
  });

  $(document).on("click",".dps-wraper .disgin-philosophy-slider .owl-dots button:nth-child(1)",function (event) {
      var CradNo = "Card-1";
      tdSubmit(
        {
          event: "Key Highlights",
          eventCategory: "Nexa Grand Vitara Design Philosophy",
          eventAction: "Click",
          eventLabel: CradNo,
        },
        "event_nexa"
      );
    }
  );

  $(document).on("click",".dps-wraper .disgin-philosophy-slider .owl-dots button:nth-child(2)",function (event) {
      var CradNo = "Card-2";
      tdSubmit(
        {
          event: "Key Highlights",
          eventCategory: "Nexa Grand Vitara Design Philosophy",
          eventAction: "Click",
          eventLabel: CradNo,
        },
        "event_nexa"
      );
    }
  );

  $(document).on("click",".dps-wraper .disgin-philosophy-slider .owl-dots button:nth-child(3)",function (event) {
      var CradNo = "Card-3";
      tdSubmit(
        {
          event: "Key Highlights",
          eventCategory: "Nexa Grand Vitara Design Philosophy",
          eventAction: "Click",
          eventLabel: CradNo,
        },
        "event_nexa"
      );
    }
  );

  $(document).on("click",".dps-wraper .disgin-philosophy-slider .owl-dots button:nth-child(4)",function (event) {
      var CradNo = "Card-4";
      tdSubmit(
        {
          event: "Key Highlights",
          eventCategory: "Nexa Grand Vitara Design Philosophy",
          eventAction: "Click",
          eventLabel: CradNo,
        },
        "event_nexa"
      );
    }
  );

  $(document).on("click",".dps-wraper .disgin-philosophy-slider .owl-dots button:nth-child(5)",function (event) {
      var CradNo = "Card-5";
      tdSubmit(
        {
          event: "Key Highlights",
          eventCategory: "Nexa Grand Vitara Design Philosophy",
          eventAction: "Click",
          eventLabel: CradNo,
        },
        "event_nexa"
      );
    }
  );
//Desktop
  $(document).on("click", ".persona-variant-section ul.accordion_ul li .pv-content a", function (event) {
    var event = "Key Highlights";
    var eventCategory = "Nexa Grand Vitara Persona Variant";
    var eventAction = "Click";
    var eventLabel = $(this).parent().parent().find('.pv-content h2').text() + " - Know More";
    CDPFunction(event, eventCategory, eventAction, eventLabel);
});

//Msite
$(document).on("click", ".persona-variant-section-mob .owl-item .pv-content a", function (event) {
  var event = "Key Highlights";
  var eventCategory = "Nexa Grand Vitara Persona Variant";
  var eventAction = "Click";
  var eventLabel = $(this).parent().parent().find('.pv-content h2').text() + " - Know More";
  CDPFunction(event, eventCategory, eventAction, eventLabel);
});

  //RFI Name
  $(document).on("focusout", "#form-rfi #Name", function () {
    var UrlPath = window.location.pathname;
    if (UrlPath == "/grand-vitara") {
      tdSubmit(
        {
          event: "RYI Form",
          eventCategory: "Nexa Grand Vitara RYI Form - Name",
          eventAction: "Click",
          eventLabel: "Enter Name",
        },
        "event_nexa"
      );
    }
  });

  $(document).on("focusout", "#form-rfi #Email", function () {
    var UrlPath = window.location.pathname;
    if (UrlPath == "/grand-vitara") {
      tdSubmit(
        {
          event: "RYI Form",
          eventCategory: "Nexa Grand Vitara RYI Form - Email",
          eventAction: "Click",
          eventLabel: "Enter Email",
        },
        "event_nexa"
      );
    }
  });

  $(document).on("focusout", "#form-rfi #Mobile", function () {
    var UrlPath = window.location.pathname;
    if (UrlPath == "/grand-vitara") {
      tdSubmit(
        {
          event: "RYI Form",
          eventCategory: "Nexa Grand Vitara RYI Form - Mobile",
          eventAction: "Click",
          eventLabel: "Enter Mobile",
        },
        "event_nexa"
      );
    }
  });

  $(document).on("change", "#form-rfi #RFIBuyerType", function () {
    var UrlPath = window.location.pathname;
    if (UrlPath == "/grand-vitara") {
      tdSubmit(
        {
          event: "RYI Form",
          eventCategory: "Nexa Grand Vitara RYI Form - Buyer Type",
          eventAction: "Click",
          eventLabel: $("#form-rfi")
            .find("#RFIBuyerType option:selected")
            .text(),
        },
        "event_nexa"
      );
    }
  });

  $(document).on("change", "#form-rfi #State", function () {
    var UrlPath = window.location.pathname;
    if (UrlPath == "/grand-vitara") {
      tdSubmit(
        {
          event: "RYI Form",
          eventCategory: "Nexa Grand Vitara RYI Form - State",
          eventAction: "Click",
          eventLabel: $("#form-rfi #State option:selected").text(),
        },
        "event_nexa"
      );
    }
  });

  $(document).on("change", "#form-rfi #City", function () {
    var UrlPath = window.location.pathname;
    if (UrlPath == "/grand-vitara") {
      tdSubmit(
        {
          event: "RYI Form",
          eventCategory: "Nexa Grand Vitara RYI Form - City",
          eventAction: "Click",
          eventLabel: $("#form-rfi #City option:selected").text(),
        },
        "event_nexa"
      );
    }
  });

  $(document).on("change", "#form-rfi #Dealer", function () {
    var UrlPath = window.location.pathname;
    if (UrlPath == "/grand-vitara") {
      tdSubmit(
        {
          event: "RYI Form",
          eventCategory: "Nexa Grand Vitara RYI Form - Dealer",
          eventAction: "Click",
          eventLabel: $("#form-rfi").find("#Dealer option:selected").text(),
        },
        "event_nexa"
      );
    }
  });

  $(document).on("click", "#form-rfi .disclamer", function (event) {
    var UrlPath = window.location.pathname;
    if (UrlPath == "/grand-vitara") {
      if (event.target.checked) {
        tdSubmit(
          {
            event: "RYI Form",
            eventCategory: "Nexa Grand Vitara RYI Form - Disclaimer",
            eventAction: "Click",
            eventLabel: "Disclaimer Checked",
          },
          "event_nexa"
        );
      }
    }
  });




  $(".safetyBlock .safetybox").mouseover(function () {
    var ImageTitle = $(this).text().trim();
    tdSubmit(
      {
        event: "Key Highlights",
        eventCategory: "Nexa Grand Vitara Safety",
        eventAction: "Click",
        eventLabel: ImageTitle,
      },
      "event_nexa"
    );
  });

  $("#color-tab ul li a").click(function () {
    tdSubmit(
      {
        event: "Key Highlights",
        eventCategory: "Nexa Grand Vitara Colours",
        eventAction: "Click",
        eventLabel: $(this).text().trim(),
      },
      "event_nexa"
    );
  });

  $(".highlightsSec a.carousel-control-next span").click(function () {
    tdSubmit(
      {
        event: "Key Highlights",
        eventCategory: "Nexa Grand Vitara Suzuki Connect",
        eventAction: "Click",
        eventLabel: "Next",
      },
      "event_nexa"
    );
  });



  $(".highlightsSec a.carousel-control-prev span").click(function () {
    tdSubmit(
      {
        event: "Key Highlights",
        eventCategory: "Nexa Grand Vitara Suzuki Connect",
        eventAction: "Click",
        eventLabel: "Previous",
      },
      "event_nexa"
    );
  });

  $(document).on("click", "ul.sConnectHighlights li a", function (event) {
    tdSubmit(
      {
        event: "Key Highlights",
        eventCategory: "Nexa Grand Vitara Suzuki Connect",
        eventAction: "Click",
        eventLabel: $(this).text().trim(),
      },
      "event_nexa"
    );
  });




// //Msite
// $(document).on("click", ".persona-variant-section-mob .owl-dots button", function (event) {

//   var UrlPath = window.location.pathname;
//   if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
//     var EventText = 'Nexa Grand Vitara Manual Transmission';
//   }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
//     var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid';
//   }else if(UrlPath == '/grand-vitara/allgrip'){
//     var EventText = 'Nexa Grand Vitara All Grip';
//   }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
//     var EventText = 'Nexa Grand Vitara Auto Transmission';
//   }else if(UrlPath == '/grand-vitara'){
//     var EventText = 'Nexa Grand Vitara';
//   }


// var ContentType = $(this).parent().parent().find('.active .pv-content h2').html();
// if(ContentType){
//   tdSubmit(
//     {
//       event: "Key Highlights",
//       eventCategory: EventText,
//       eventAction: "Click",
//       eventLabel: $(this).parent().parent().find('.active .pv-content h2').html(),
//     },
//     "event_nexa"
//   );
// }else{
//   var UrlPath = window.location.pathname;
//   if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
  
//     var EventText = 'Nexa Grand Vitara Manual Transmission - Key Highlights - ';
  
//   }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
  
//     var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights - ';
  
//   }else if(UrlPath == '/grand-vitara/allgrip'){
  
//     var EventText = 'Nexa Grand Vitara All Grip - Key Highlights - ';
  
//   }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
  
//     var EventText = 'Nexa Grand Vitara Auto Transmission - Key Highlights - ';
  
//   }else if(UrlPath == '/grand-vitara'){
  
//     var EventText = 'Nexa Grand Vitara - Key Highlights - ';
  
//   }


//   var IsDisplayed ='';
//   if( $("#interior").css("display") == "block" ){
//      IsDisplayed = 'Interior';
//   }
//   if( $("#exterior").css("display") == "block" ){
//     IsDisplayed = 'Exterior'; 
//   }

//   tdSubmit(
//     {
//       event: "Key Highlights",
//       eventCategory: EventText+IsDisplayed,
//       eventAction: "Click",
//       eventLabel: $(this).parent().parent().find('.active .pv-content p').html(),
//     },
//     "event_nexa"
//   );

  
  
//   var UrlPath = window.location.pathname;
//   if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
  
//     var EventTextl = 'Nexa Grand Vitara Manual Transmission - Key Highlights';
  
//   }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
  
//     var EventTextl = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights';
  
//   }else if(UrlPath == '/grand-vitara/allgrip'){
  
//     var EventTextl = 'Nexa Grand Vitara All Grip - Key Highlights';
  
//   }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
  
//     var EventTextl = 'Nexa Grand Vitara Auto Transmission - Key Highlights';
  
//   }else if(UrlPath == '/grand-vitara'){
  
//     var EventTextl = 'Nexa Grand Vitara - Key Highlights';
  
//   }
//   tdSubmit(
//     {
//       event: "Key Highlights",
//       eventCategory: EventTextl,
//       eventAction: "Click",
//       eventLabel: IsDisplayed,
//     },
//     "event_nexa"
//   );



// }

//     });  


//   $(document).on("click", ".key-highlights #zA7n-p ul li a", function (event) {
//     var Types = "Interior";

//     var UrlPath = window.location.pathname;
//     if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    
//       var EventText = 'Nexa Grand Vitara Manual Transmission - Key Highlights';
    
//     }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    
//       var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights';
    
//     }else if(UrlPath == '/grand-vitara/allgrip'){
    
//       var EventText = 'Nexa Grand Vitara All Grip - Key Highlights';
    
//     }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    
//       var EventText = 'Nexa Grand Vitara Auto Transmission - Key Highlights';
    
//     }else if(UrlPath == '/grand-vitara'){
    
//       var EventText = 'Nexa Grand Vitara - Key Highlights';
    
//     }
//     tdSubmit(
//       {
//         event: "Key Highlights",
//         eventCategory: EventText,
//         eventAction: "Click",
//         eventLabel: Types,
//       },
//       "event_nexa"
//     );

// //with keyhigh lights
// var UrlPath = window.location.pathname;
// if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {

//   var EventTextWithType = 'Nexa Grand Vitara Manual Transmission - Key Highlights - ';

// }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){

//   var EventTextWithType = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights - ';

// }else if(UrlPath == '/grand-vitara/allgrip'){

//   var EventTextWithType = 'Nexa Grand Vitara All Grip - Key Highlights - ';

// }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){

//   var EventTextWithType = 'Nexa Grand Vitara Auto Transmission - Key Highlights - ';

// }else if(UrlPath == '/grand-vitara'){

//   var EventTextWithType = 'Nexa Grand Vitara - Key Highlights - ';

// }


//     tdSubmit(
//       {
//         event: "Key Highlights",
//         eventCategory: EventTextWithType+Types,
//         eventAction: "Click",
//         eventLabel: $(this).find(".pv-content p").text(),
//       },
//       "event_nexa"
//     );
//   });

//   $(document).on("click", ".key-highlights #zA7n-p2 ul li a", function (event) {
//     var Types = "Exterior";

//     var UrlPath = window.location.pathname;
//     if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    
//       var EventText = 'Nexa Grand Vitara Manual Transmission - Key Highlights';
    
//     }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    
//       var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights';
    
//     }else if(UrlPath == '/grand-vitara/allgrip'){
    
//       var EventText = 'Nexa Grand Vitara All Grip - Key Highlights';
    
//     }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    
//       var EventText = 'Nexa Grand Vitara Auto Transmission - Key Highlights';
    
//     }else if(UrlPath == '/grand-vitara'){
    
//       var EventText = 'Nexa Grand Vitara - Key Highlights';
    
//     }
//     tdSubmit(
//       {
//         event: "Key Highlights",
//         eventCategory: EventText,
//         eventAction: "Click",
//         eventLabel: Types,
//       },
//       "event_nexa"
//     );
// //with keyhigh lights
// var UrlPath = window.location.pathname;
// if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {

//   var EventTextWithType = 'Nexa Grand Vitara Manual Transmission - Key Highlights - ';

// }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){

//   var EventTextWithType = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights - ';

// }else if(UrlPath == '/grand-vitara/allgrip'){

//   var EventTextWithType = 'Nexa Grand Vitara All Grip - Key Highlights - ';

// }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){

//   var EventTextWithType = 'Nexa Grand Vitara Auto Transmission - Key Highlights - ';

// }else if(UrlPath == '/grand-vitara'){

//   var EventTextWithType = 'Nexa Grand Vitara - Key Highlights - ';

// }


//     tdSubmit(
//       {
//         event: "Key Highlights",
//         eventCategory: EventTextWithType+Types,
//         eventAction: "Click",
//         eventLabel: $(this).find(".pv-content p").text(),
//       },
//       "event_nexa"
//     );

//   });

//   $(document).on("click", ".persona-variant-section #zA7n-p2 ul.accordion_ul li", function (event) {
//     var Types = "Exterior";

//     var UrlPath = window.location.pathname;
//     if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    
//       var EventText = 'Nexa Grand Vitara Manual Transmission - Key Highlights - ';
    
//     }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    
//       var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights - ';
    
//     }else if(UrlPath == '/grand-vitara/allgrip'){
    
//       var EventText = 'Nexa Grand Vitara All Grip - Key Highlights - ';
    
//     }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    
//       var EventText = 'Nexa Grand Vitara Auto Transmission - Key Highlights - ';
    
//     }else if(UrlPath == '/grand-vitara'){
    
//       var EventText = 'Nexa Grand Vitara - Key Highlights - ';
    
//     }


//     tdSubmit(
//       {
//         event: "Key Highlights",
//         eventCategory: EventText+Types,
//         eventAction: "Click",
//         eventLabel: $(this).find(".pv-content p").text(),
//       },
//       "event_nexa"
//     );
//   });

//   $(document).on("click",".scrollabel ul.nav-underline-angle li a",function (event) {

//       var UrlPath = window.location.pathname;
//       if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
      
//         var EventText = 'Nexa Grand Vitara Smart Hybrid Technology';
      
//       }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
      
//         var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid';
      
//       }else if(UrlPath == '/grand-vitara/allgrip'){
      
//         var EventText = 'Nexa Grand Vitara Choose the right mode';
      
//       }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
      
//         var EventText = 'Nexa Grand Vitara Auto Transmission Smart Hybrid Technology';
      
//       }else if(UrlPath == '/grand-vitara'){
      
//         var EventText = 'Nexa Grand Vitara';
      
//       }      
//       tdSubmit(
//         {
//           event: "Key Highlights",
//           eventCategory: EventText,
//           eventAction: "Click",
//           eventLabel: $(this).text(),
//         },
//         "event_nexa"
//       );
//     }
//   );

  // $(document).on("click", ".technology-explorer  ul li a", function (event) {
  //   tdSubmit(
  //     {
  //       event: "Key Highlights",
  //       eventCategory: "Nexa Grand Vitara Technology For the Explorer",
  //       eventAction: "Click",
  //       eventLabel: $(this).text(),
  //     },
  //     "event_nexa"
  //   );
  // });










    // $(document).on("click", ".ieh-benefits .owl-nav button.owl-next", function (event) {
    //   var UrlPath = window.location.pathname;
    //   if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {      
    //     var EventText = 'Nexa Grand Vitara Benefits of Manual Transmission';
    //   }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    //     var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid Benefits of Intelligent Electric Hybrid';
    //   }else if(UrlPath == '/grand-vitara/allgrip'){
    //     var EventText = 'Nexa Grand Vitara Benefits of Auto Transmission';
    //   }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    //     var EventText = 'Nexa Grand Vitara Benefits of Auto Transmission';
    //   }else if(UrlPath == '/grand-vitara'){
    //     var EventText = 'Nexa Grand Vitara';
    //   } 
    //   tdSubmit(
    //     {
    //       event: "Key Highlights",
    //       eventCategory: EventText,
    //       eventAction: "Click",
    //       eventLabel: 'Next',
    //     },
    //     "event_nexa"
    //   );
    // });  

//     $(document).on("click", ".ieh-benefits .owl-nav button.owl-prev", function (event) {
//       var UrlPath = window.location.pathname;
//       if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
//         var EventText = 'Nexa Grand Vitara Benefits of Manual Transmission';
//       }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
//         var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid Benefits of Intelligent Electric Hybrid';
//       }else if(UrlPath == '/grand-vitara/allgrip'){
//         var EventText = 'Nexa Grand Vitara Benefits of Auto Transmission';
//       }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
//         var EventText = 'Nexa Grand Vitara Benefits of Auto Transmission';
//       }else if(UrlPath == '/grand-vitara'){
//         var EventText = 'Nexa Grand Vitara';
//       } 
//       tdSubmit(
//         {
//           event: "Key Highlights",
//           eventCategory: EventText,
//           eventAction: "Click",
//           eventLabel: 'Previous',
//         },
//         "event_nexa"
//       );
//     });     




});



























































































//Msite point 25 ,27 ,28,33,35,36,41,43,44,48,50,51
$(document).on("click", ".persona-variant-section-mob .owl-dots button", function (event) {

  var UrlPath = window.location.pathname;
  if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    var EventText = 'Nexa Grand Vitara Manual Transmission';
  }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid';
  }else if(UrlPath == '/grand-vitara/allgrip'){
    var EventText = 'Nexa Grand Vitara All Grip';
  }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    var EventText = 'Nexa Grand Vitara Auto Transmission';
  }else if(UrlPath == '/grand-vitara'){
    var EventText = 'Nexa Grand Vitara';
  }


var ContentType = $(this).parent().parent().find('.active .pv-content h2').html();
if(ContentType){
  tdSubmit(
    {
      event: "Key Highlights",
      eventCategory: EventText,
      eventAction: "Click",
      eventLabel: $(this).parent().parent().find('.active .pv-content h2').html(),
    },
    "event_nexa"
  );
}else{
  var IsDisplayed ='';
  if( $("#interior").css("display") == "block" ){
     IsDisplayed = 'Interior';
  }
  if( $("#exterior").css("display") == "block" ){
    IsDisplayed = 'Exterior'; 
  }

  //Keyhigh lighht With intereior & exterior
  var UrlPath = window.location.pathname;
  if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    var EventText = 'Nexa Grand Vitara Manual Transmission - Key Highlights - ';
  }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights - ';
  }else if(UrlPath == '/grand-vitara/allgrip'){
    var EventText = 'Nexa Grand Vitara All Grip - Key Highlights - ';
  }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    var EventText = 'Nexa Grand Vitara Auto Transmission - Key Highlights - ';
  }else if(UrlPath == '/grand-vitara'){
    var EventText = 'Nexa Grand Vitara - Key Highlights - ';
  }

//Keyhigh lighht
  if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    var EventTextl = 'Nexa Grand Vitara Manual Transmission - Key Highlights';
  }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    var EventTextl = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights';
  }else if(UrlPath == '/grand-vitara/allgrip'){
    var EventTextl = 'Nexa Grand Vitara All Grip - Key Highlights';
  }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    var EventTextl = 'Nexa Grand Vitara Auto Transmission - Key Highlights';
  }else if(UrlPath == '/grand-vitara'){
    var EventTextl = 'Nexa Grand Vitara - Key Highlights';
  }


  tdSubmit(
    {
      event: "Key Highlights",
      eventCategory: EventText+IsDisplayed,
      eventAction: "Click",
      eventLabel: $(this).parent().parent().find('.active .pv-content p').html(),
    },
    "event_nexa"
  );
  tdSubmit(
    {
      event: "Key Highlights",
      eventCategory: EventTextl,
      eventAction: "Click",
      eventLabel: IsDisplayed,
    },
    "event_nexa"
  );
}
}); 


//Desktop point no 25,31,37,42 covered
$(document).on("click", ".persona-variant-section #zA7n ul li", function (event) {
  var UrlPath = window.location.pathname;
  if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    var EventText = 'Nexa Grand Vitara Manual Transmission';
  }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid';
  }else if(UrlPath == '/grand-vitara/allgrip'){
    var EventText = 'Nexa Grand Vitara All Grip';
  }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    var EventText = 'Nexa Grand Vitara Auto Transmission';
  }else if(UrlPath == '/grand-vitara'){
    var EventText = 'Nexa Grand Vitara';
  }
      tdSubmit(
        {
          event: "Key Highlights",
          eventCategory: EventText,
          eventAction: "Click",
          eventLabel: $(this).find(".pv-content h2").text(),
        },
        "event_nexa"
      );
    });
//Desktop site 26,27,32,33,38,39,43,44
$(document).on("click", ".key-highlights #zA7n-p ul li a", function (event) {
  var Types = "Interior";
//without keyhigh lights Innterior
  var UrlPath = window.location.pathname;
  if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    var EventText = 'Nexa Grand Vitara Manual Transmission - Key Highlights';
  }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights';
  }else if(UrlPath == '/grand-vitara/allgrip'){
    var EventText = 'Nexa Grand Vitara All Grip - Key Highlights';
  }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    var EventText = 'Nexa Grand Vitara Auto Transmission - Key Highlights';
  }else if(UrlPath == '/grand-vitara'){
    var EventText = 'Nexa Grand Vitara - Key Highlights';
  }
//keyhigh lights Innterior/Exterior
var UrlPath = window.location.pathname;
if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
var EventTextWithType = 'Nexa Grand Vitara Manual Transmission - Key Highlights - ';
}else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
var EventTextWithType = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights - ';
}else if(UrlPath == '/grand-vitara/allgrip'){
var EventTextWithType = 'Nexa Grand Vitara All Grip - Key Highlights - ';
}else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
var EventTextWithType = 'Nexa Grand Vitara Auto Transmission - Key Highlights - ';
}else if(UrlPath == '/grand-vitara'){
var EventTextWithType = 'Nexa Grand Vitara - Key Highlights - ';
}

  tdSubmit(
    {
      event: "Key Highlights",
      eventCategory: EventTextWithType+Types,
      eventAction: "Click",
      eventLabel: $(this).parent().parent().find(".pv-content p").text(),
    },
    "event_nexa"
  );

  tdSubmit(
    {
      event: "Key Highlights",
      eventCategory: EventText,
      eventAction: "Click",
      eventLabel: Types,
    },
    "event_nexa"
  );
});

//For Exterior point no- 26,32,38,43
$(document).on("click", ".key-highlights #zA7n-p2 ul li a", function (event) {
  var Types = "Exterior";
//With Keyheightlight only
  var UrlPath = window.location.pathname;
  if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {  
    var EventText = 'Nexa Grand Vitara Manual Transmission - Key Highlights';
  }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights';
  }else if(UrlPath == '/grand-vitara/allgrip'){
    var EventText = 'Nexa Grand Vitara All Grip - Key Highlights';
  }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    var EventText = 'Nexa Grand Vitara Auto Transmission - Key Highlights';
  }else if(UrlPath == '/grand-vitara'){
    var EventText = 'Nexa Grand Vitara - Key Highlights';
  }
//With Keyheightlight Exterior
var UrlPath = window.location.pathname;
if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
var EventTextWithType = 'Nexa Grand Vitara Manual Transmission - Key Highlights - ';
}else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
var EventTextWithType = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights - ';
}else if(UrlPath == '/grand-vitara/allgrip'){
var EventTextWithType = 'Nexa Grand Vitara All Grip - Key Highlights - ';
}else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
var EventTextWithType = 'Nexa Grand Vitara Auto Transmission - Key Highlights - ';
}else if(UrlPath == '/grand-vitara'){
var EventTextWithType = 'Nexa Grand Vitara - Key Highlights - ';
}

tdSubmit(
  {
    event: "Key Highlights",
    eventCategory: EventText,
    eventAction: "Click",
    eventLabel: Types,
  },
  "event_nexa"
);
  tdSubmit(
    {
      event: "Key Highlights",
      eventCategory: EventTextWithType+Types,
      eventAction: "Click",
      eventLabel: $(this).parent().parent().find(".pv-content p").text(),
    },
    "event_nexa"
  );
});

//point Not 40
$(document).on("click",".drive-mode  .scrollabel ul li a",function (event) {
  var UrlPath = window.location.pathname;
  if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    var EventText = '';
  }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid';
  }else if(UrlPath == '/grand-vitara/allgrip'){
    var EventText = 'Nexa Grand Vitara Choose the right mode';
  }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    var EventText = '';
  }else if(UrlPath == '/grand-vitara'){
    var EventText = '';
  }

  tdSubmit(
    {
      event: "Key Highlights",
      eventCategory: EventText,
      eventAction: "Click",
      eventLabel: $(this).text(),
    },
    "event_nexa"
  );
});

//point Not 29,35,46,40
$(document).on("click",".technology-explorer ul#myTab li a",function (event) {
  var UrlPath = window.location.pathname;
  if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
    var EventText = 'Nexa Grand Vitara Technology For the Explorer';
  }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
    var EventText = '';
  }else if(UrlPath == '/grand-vitara/allgrip'){
    var EventText = 'Nexa Grand Vitara Technology For the Explorer';
  }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
    var EventText = 'Nexa Grand Vitara Auto Transmission Technology For the Explorer';
  }else if(UrlPath == '/grand-vitara'){
    var EventText = '';
  }

  tdSubmit(
    {
      event: "Key Highlights",
      eventCategory: EventText,
      eventAction: "Click",
      eventLabel: $(this).text(),
    },
    "event_nexa"
  ); 
       });


       $(document).on("click", ".ieh-benefits .owl-nav button.owl-next", function (event) {
        var UrlPath = window.location.pathname;
        if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {      
          var EventText = 'Nexa Grand Vitara Benefits of Manual Transmission';
        }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
          var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid Benefits of Intelligent Electric Hybrid';
        }else if(UrlPath == '/grand-vitara/allgrip'){
          var EventText = 'Nexa Grand Vitara Technology For the Explorer';
        }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
          var EventText = 'Nexa Grand Vitara Benefits of Auto Transmission';
        }else if(UrlPath == '/grand-vitara'){
          var EventText = 'Nexa Grand Vitara';
        } 
        tdSubmit(
          {
            event: "Key Highlights",
            eventCategory: EventText,
            eventAction: "Click",
            eventLabel: 'Next',
          },
          "event_nexa"
        );
      }); 

      $(document).on("click", ".ieh-benefits .owl-nav button.owl-prev", function (event) {
        var UrlPath = window.location.pathname;
        if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
          var EventText = 'Nexa Grand Vitara Benefits of Manual Transmission';
        }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
          var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid Benefits of Intelligent Electric Hybrid';
        }else if(UrlPath == '/grand-vitara/allgrip'){
          var EventText = 'Nexa Grand Vitara Technology For the Explorer';
        }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
          var EventText = 'Nexa Grand Vitara Benefits of Auto Transmission';
        }else if(UrlPath == '/grand-vitara'){
          var EventText = 'Nexa Grand Vitara';
        } 
        tdSubmit(
          {
            event: "Key Highlights",
            eventCategory: EventText,
            eventAction: "Click",
            eventLabel: 'Previous',
          },
          "event_nexa"
        );
      });     
      $(document).find('.inrsafetymobilebox .owl-dots button').click(function(){
          setTimeout(function(){
          var TitleText = $(document).find('.owl-stage-outer .owl-stage .active .safetybox').find('.safetycontent').text();
              alert(TitleText);
          tdSubmit({
             'event' : 'Key Highlights',
             'eventCategory': 'Nexa Grand Vitara Safety',
             'eventAction': 'Click',
             'eventLabel': TitleText,
             }, 'event_nexa'); 
          },5000);
          });

        $(document).find(".key-highlights ul.nav-underline-angle li a").on('click', function(event) {  
          var Types = '';
          if($(this).text()=="exterior"){
          var Types = "Exterior";
         }else{
          var Types = "Interior";
         }
    
          var UrlPath = window.location.pathname;
          if (UrlPath == '/grand-vitara/5-speed-manual-transmission') {
            var EventText = 'Nexa Grand Vitara Manual Transmission - Key Highlights';
          }else if(UrlPath == '/grand-vitara/intelligent-electric-hybrid'){
            var EventText = 'Nexa Grand Vitara Intelligent Electric Hybrid - Key Highlights';
          }else if(UrlPath == '/grand-vitara/allgrip'){
            var EventText = 'Nexa Grand Vitara All Grip - Key Highlights';
          }else if(UrlPath == '/grand-vitara/6-speed-automatic-transmission'){
            var EventText = 'Nexa Grand Vitara Auto Transmission - Key Highlights';
          }else if(UrlPath == '/grand-vitara'){
            var EventText = 'Nexa Grand Vitara - Key Highlights';
          }
          tdSubmit(
            {
              event: "Key Highlights",
              eventCategory: EventText,
              eventAction: "Click",
              eventLabel: Types,
            },
            "event_nexa"
          );
    
    });


